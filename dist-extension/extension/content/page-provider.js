(function(){"use strict";var d;const a="forgeos.managed.wallet.v1",o="__forgeos__",n=new Map;window.addEventListener("message",r=>{if(r.source!==window)return;const e=r.data;if(!(e!=null&&e[o])||typeof e.requestId!="string"||!("result"in e)&&!("error"in e))return;const t=n.get(e.requestId);t&&(clearTimeout(t.timer),n.delete(e.requestId),e.error?t.reject(new Error(String(e.error))):t.resolve(e.result))});function i(r,e){return new Promise((t,u)=>{const s=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,w=setTimeout(()=>{n.delete(s),u(new Error("Forge-OS: request timed out"))},12e4);n.set(s,{resolve:t,reject:u,timer:w}),window.postMessage({[o]:!0,type:r,requestId:s,...e},"*")})}function c(){return{isForgeOS:!0,version:"1.0.0",async connect(){try{const r=localStorage.getItem(a);if(r){const e=JSON.parse(r);if(e!=null&&e.address&&(e!=null&&e.network))return{address:e.address,network:e.network}}}catch{}return i("FORGEOS_CONNECT")},async signMessage(r){return i("FORGEOS_SIGN",{message:r})},openExtension(){window.postMessage({[o]:!0,type:"FORGEOS_OPEN_POPUP"},"*")},disconnect(){}}}(d=window.forgeos)!=null&&d.isForgeOS||(window.forgeos=c(),window.dispatchEvent(new CustomEvent("forgeos#initialized")))})();
