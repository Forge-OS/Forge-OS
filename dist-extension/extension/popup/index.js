var eS=Object.defineProperty;var tS=(e,t,n)=>t in e?eS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ll=(e,t,n)=>tS(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Kh={exports:{}},La={},Hh={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Us=Symbol.for("react.element"),nS=Symbol.for("react.portal"),rS=Symbol.for("react.fragment"),oS=Symbol.for("react.strict_mode"),iS=Symbol.for("react.profiler"),sS=Symbol.for("react.provider"),lS=Symbol.for("react.context"),aS=Symbol.for("react.forward_ref"),cS=Symbol.for("react.suspense"),uS=Symbol.for("react.memo"),dS=Symbol.for("react.lazy"),wp=Symbol.iterator;function fS(e){return e===null||typeof e!="object"?null:(e=wp&&e[wp]||e["@@iterator"],typeof e=="function"?e:null)}var Wh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vh=Object.assign,Gh={};function mi(e,t,n){this.props=e,this.context=t,this.refs=Gh,this.updater=n||Wh}mi.prototype.isReactComponent={};mi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xh(){}Xh.prototype=mi.prototype;function Md(e,t,n){this.props=e,this.context=t,this.refs=Gh,this.updater=n||Wh}var zd=Md.prototype=new Xh;zd.constructor=Md;Vh(zd,mi.prototype);zd.isPureReactComponent=!0;var Ep=Array.isArray,Yh=Object.prototype.hasOwnProperty,Ud={current:null},Qh={key:!0,ref:!0,__self:!0,__source:!0};function Jh(e,t,n){var r,o={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Yh.call(t,r)&&!Qh.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)o[r]===void 0&&(o[r]=c[r]);return{$$typeof:Us,type:e,key:i,ref:l,props:o,_owner:Ud.current}}function pS(e,t){return{$$typeof:Us,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Us}function mS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Tp=/\/+/g;function wc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mS(""+e.key):t.toString(36)}function Ml(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Us:case nS:l=!0}}if(l)return l=e,o=o(l),e=r===""?"."+wc(l,0):r,Ep(o)?(n="",e!=null&&(n=e.replace(Tp,"$&/")+"/"),Ml(o,t,n,"",function(d){return d})):o!=null&&(Bd(o)&&(o=pS(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(Tp,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=r===""?".":r+":",Ep(e))for(var c=0;c<e.length;c++){i=e[c];var u=r+wc(i,c);l+=Ml(i,t,n,u,o)}else if(u=fS(e),typeof u=="function")for(e=u.call(e),c=0;!(i=e.next()).done;)i=i.value,u=r+wc(i,c++),l+=Ml(i,t,n,u,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function al(e,t,n){if(e==null)return e;var r=[],o=0;return Ml(e,r,"","",function(i){return t.call(n,i,o++)}),r}function hS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ft={current:null},zl={transition:null},gS={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:zl,ReactCurrentOwner:Ud};function Zh(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:al,forEach:function(e,t,n){al(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return al(e,function(){t++}),t},toArray:function(e){return al(e,function(t){return t})||[]},only:function(e){if(!Bd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};le.Component=mi;le.Fragment=rS;le.Profiler=iS;le.PureComponent=Md;le.StrictMode=oS;le.Suspense=cS;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gS;le.act=Zh;le.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Vh({},e.props),o=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Ud.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)Yh.call(t,u)&&!Qh.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Us,type:e.type,key:o,ref:i,props:r,_owner:l}};le.createContext=function(e){return e={$$typeof:lS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sS,_context:e},e.Consumer=e};le.createElement=Jh;le.createFactory=function(e){var t=Jh.bind(null,e);return t.type=e,t};le.createRef=function(){return{current:null}};le.forwardRef=function(e){return{$$typeof:aS,render:e}};le.isValidElement=Bd;le.lazy=function(e){return{$$typeof:dS,_payload:{_status:-1,_result:e},_init:hS}};le.memo=function(e,t){return{$$typeof:uS,type:e,compare:t===void 0?null:t}};le.startTransition=function(e){var t=zl.transition;zl.transition={};try{e()}finally{zl.transition=t}};le.unstable_act=Zh;le.useCallback=function(e,t){return Ft.current.useCallback(e,t)};le.useContext=function(e){return Ft.current.useContext(e)};le.useDebugValue=function(){};le.useDeferredValue=function(e){return Ft.current.useDeferredValue(e)};le.useEffect=function(e,t){return Ft.current.useEffect(e,t)};le.useId=function(){return Ft.current.useId()};le.useImperativeHandle=function(e,t,n){return Ft.current.useImperativeHandle(e,t,n)};le.useInsertionEffect=function(e,t){return Ft.current.useInsertionEffect(e,t)};le.useLayoutEffect=function(e,t){return Ft.current.useLayoutEffect(e,t)};le.useMemo=function(e,t){return Ft.current.useMemo(e,t)};le.useReducer=function(e,t,n){return Ft.current.useReducer(e,t,n)};le.useRef=function(e){return Ft.current.useRef(e)};le.useState=function(e){return Ft.current.useState(e)};le.useSyncExternalStore=function(e,t,n){return Ft.current.useSyncExternalStore(e,t,n)};le.useTransition=function(){return Ft.current.useTransition()};le.version="18.3.1";Hh.exports=le;var x=Hh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yS=x,SS=Symbol.for("react.element"),xS=Symbol.for("react.fragment"),vS=Object.prototype.hasOwnProperty,wS=yS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ES={key:!0,ref:!0,__self:!0,__source:!0};function qh(e,t,n){var r,o={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)vS.call(t,r)&&!ES.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:SS,type:e,key:i,ref:l,props:o,_owner:wS.current}}La.Fragment=xS;La.jsx=qh;La.jsxs=qh;Kh.exports=La;var s=Kh.exports,eg={exports:{}},pn={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,U){var H=M.length;M.push(U);e:for(;0<H;){var X=H-1>>>1,ie=M[X];if(0<o(ie,U))M[X]=U,M[H]=ie,H=X;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var U=M[0],H=M.pop();if(H!==U){M[0]=H;e:for(var X=0,ie=M.length,Ae=ie>>>1;X<Ae;){var ve=2*(X+1)-1,Z=M[ve],we=ve+1,K=M[we];if(0>o(Z,H))we<ie&&0>o(K,Z)?(M[X]=K,M[we]=H,X=we):(M[X]=Z,M[ve]=H,X=ve);else if(we<ie&&0>o(K,H))M[X]=K,M[we]=H,X=we;else break e}}return U}function o(M,U){var H=M.sortIndex-U.sortIndex;return H!==0?H:M.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var u=[],d=[],f=1,m=null,h=3,y=!1,E=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=M)r(d),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(d)}}function v(M){if(w=!1,S(M),!E)if(n(u)!==null)E=!0,oe(C);else{var U=n(d);U!==null&&ge(v,U.startTime-M)}}function C(M,U){E=!1,w&&(w=!1,p(D),D=-1),y=!0;var H=h;try{for(S(U),m=n(u);m!==null&&(!(m.expirationTime>U)||M&&!me());){var X=m.callback;if(typeof X=="function"){m.callback=null,h=m.priorityLevel;var ie=X(m.expirationTime<=U);U=e.unstable_now(),typeof ie=="function"?m.callback=ie:m===n(u)&&r(u),S(U)}else r(u);m=n(u)}if(m!==null)var Ae=!0;else{var ve=n(d);ve!==null&&ge(v,ve.startTime-U),Ae=!1}return Ae}finally{m=null,h=H,y=!1}}var _=!1,j=null,D=-1,Y=5,B=-1;function me(){return!(e.unstable_now()-B<Y)}function Q(){if(j!==null){var M=e.unstable_now();B=M;var U=!0;try{U=j(!0,M)}finally{U?ce():(_=!1,j=null)}}else _=!1}var ce;if(typeof g=="function")ce=function(){g(Q)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,ke=ze.port2;ze.port1.onmessage=Q,ce=function(){ke.postMessage(null)}}else ce=function(){k(Q,0)};function oe(M){j=M,_||(_=!0,ce())}function ge(M,U){D=k(function(){M(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){E||y||(E=!0,oe(C))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var H=h;h=U;try{return M()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var H=h;h=M;try{return U()}finally{h=H}},e.unstable_scheduleCallback=function(M,U,H){var X=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,M){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=H+ie,M={id:f++,callback:U,priorityLevel:M,startTime:H,expirationTime:ie,sortIndex:-1},H>X?(M.sortIndex=H,t(d,M),n(u)===null&&M===n(d)&&(w?(p(D),D=-1):w=!0,ge(v,H-X))):(M.sortIndex=ie,t(u,M),E||y||(E=!0,oe(C))),M},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(M){var U=h;return function(){var H=h;h=U;try{return M.apply(this,arguments)}finally{h=H}}}})(ng);tg.exports=ng;var TS=tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS=x,fn=TS;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rg=new Set,ms={};function mo(e,t){ei(e,t),ei(e+"Capture",t)}function ei(e,t){for(ms[e]=t,e=0;e<t.length;e++)rg.add(t[e])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yu=Object.prototype.hasOwnProperty,AS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kp={},Ap={};function IS(e){return yu.call(Ap,e)?!0:yu.call(kp,e)?!1:AS.test(e)?Ap[e]=!0:(kp[e]=!0,!1)}function CS(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _S(e,t,n,r){if(t===null||typeof t>"u"||CS(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $t(e,t,n,r,o,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new $t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new $t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new $t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new $t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new $t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new $t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new $t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new $t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new $t(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fd=/[\-:]([a-z])/g;function $d(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fd,$d);vt[t]=new $t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fd,$d);vt[t]=new $t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fd,$d);vt[t]=new $t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new $t(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new $t(e,1,!1,e.toLowerCase(),null,!0,!0)});function Kd(e,t,n,r){var o=vt.hasOwnProperty(t)?vt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_S(t,n,o,r)&&(n=null),r||o===null?IS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mr=kS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cl=Symbol.for("react.element"),Co=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),Hd=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),og=Symbol.for("react.provider"),ig=Symbol.for("react.context"),Wd=Symbol.for("react.forward_ref"),xu=Symbol.for("react.suspense"),vu=Symbol.for("react.suspense_list"),Vd=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),sg=Symbol.for("react.offscreen"),Ip=Symbol.iterator;function ji(e){return e===null||typeof e!="object"?null:(e=Ip&&e[Ip]||e["@@iterator"],typeof e=="function"?e:null)}var Fe=Object.assign,Ec;function Wi(e){if(Ec===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ec=t&&t[1]||""}return`
`+Ec+e}var Tc=!1;function kc(e,t){if(!e||Tc)return"";Tc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),l=o.length-1,c=i.length-1;1<=l&&0<=c&&o[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(o[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||o[l]!==i[c]){var u=`
`+o[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=c);break}}}finally{Tc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wi(e):""}function NS(e){switch(e.tag){case 5:return Wi(e.type);case 16:return Wi("Lazy");case 13:return Wi("Suspense");case 19:return Wi("SuspenseList");case 0:case 2:case 15:return e=kc(e.type,!1),e;case 11:return e=kc(e.type.render,!1),e;case 1:return e=kc(e.type,!0),e;default:return""}}function wu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _o:return"Fragment";case Co:return"Portal";case Su:return"Profiler";case Hd:return"StrictMode";case xu:return"Suspense";case vu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ig:return(e.displayName||"Context")+".Consumer";case og:return(e._context.displayName||"Context")+".Provider";case Wd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vd:return t=e.displayName||null,t!==null?t:wu(e.type)||"Memo";case wr:t=e._payload,e=e._init;try{return wu(e(t))}catch{}}return null}function bS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wu(t);case 8:return t===Hd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Br(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PS(e){var t=lg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ul(e){e._valueTracker||(e._valueTracker=PS(e))}function ag(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=lg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Jl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Eu(e,t){var n=t.checked;return Fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Cp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Br(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cg(e,t){t=t.checked,t!=null&&Kd(e,"checked",t,!1)}function Tu(e,t){cg(e,t);var n=Br(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ku(e,t.type,n):t.hasOwnProperty("defaultValue")&&ku(e,t.type,Br(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _p(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ku(e,t,n){(t!=="number"||Jl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vi=Array.isArray;function Bo(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Br(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Au(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return Fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Np(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(Vi(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Br(n)}}function ug(e,t){var n=Br(t.value),r=Br(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function bp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Iu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var dl,fg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(dl=dl||document.createElement("div"),dl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jS=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(e){jS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qi[t]=Qi[e]})});function pg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Qi.hasOwnProperty(e)&&Qi[e]?(""+t).trim():t+"px"}function mg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=pg(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var RS=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cu(e,t){if(t){if(RS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function _u(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nu=null;function Gd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bu=null,Fo=null,$o=null;function Pp(e){if(e=$s(e)){if(typeof bu!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Ua(t),bu(e.stateNode,e.type,t))}}function hg(e){Fo?$o?$o.push(e):$o=[e]:Fo=e}function gg(){if(Fo){var e=Fo,t=$o;if($o=Fo=null,Pp(e),t)for(e=0;e<t.length;e++)Pp(t[e])}}function yg(e,t){return e(t)}function Sg(){}var Ac=!1;function xg(e,t,n){if(Ac)return e(t,n);Ac=!0;try{return yg(e,t,n)}finally{Ac=!1,(Fo!==null||$o!==null)&&(Sg(),gg())}}function gs(e,t){var n=e.stateNode;if(n===null)return null;var r=Ua(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var Pu=!1;if(ur)try{var Ri={};Object.defineProperty(Ri,"passive",{get:function(){Pu=!0}}),window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch{Pu=!1}function LS(e,t,n,r,o,i,l,c,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var Ji=!1,Zl=null,ql=!1,ju=null,OS={onError:function(e){Ji=!0,Zl=e}};function DS(e,t,n,r,o,i,l,c,u){Ji=!1,Zl=null,LS.apply(OS,arguments)}function MS(e,t,n,r,o,i,l,c,u){if(DS.apply(this,arguments),Ji){if(Ji){var d=Zl;Ji=!1,Zl=null}else throw Error(O(198));ql||(ql=!0,ju=d)}}function ho(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jp(e){if(ho(e)!==e)throw Error(O(188))}function zS(e){var t=e.alternate;if(!t){if(t=ho(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return jp(o),e;if(i===r)return jp(o),t;i=i.sibling}throw Error(O(188))}if(n.return!==r.return)n=o,r=i;else{for(var l=!1,c=o.child;c;){if(c===n){l=!0,n=o,r=i;break}if(c===r){l=!0,r=o,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,r=o;break}if(c===r){l=!0,r=i,n=o;break}c=c.sibling}if(!l)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function wg(e){return e=zS(e),e!==null?Eg(e):null}function Eg(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Eg(e);if(t!==null)return t;e=e.sibling}return null}var Tg=fn.unstable_scheduleCallback,Rp=fn.unstable_cancelCallback,US=fn.unstable_shouldYield,BS=fn.unstable_requestPaint,Qe=fn.unstable_now,FS=fn.unstable_getCurrentPriorityLevel,Xd=fn.unstable_ImmediatePriority,kg=fn.unstable_UserBlockingPriority,ea=fn.unstable_NormalPriority,$S=fn.unstable_LowPriority,Ag=fn.unstable_IdlePriority,Oa=null,Qn=null;function KS(e){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Oa,e,void 0,(e.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:VS,HS=Math.log,WS=Math.LN2;function VS(e){return e>>>=0,e===0?32:31-(HS(e)/WS|0)|0}var fl=64,pl=4194304;function Gi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ta(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~o;c!==0?r=Gi(c):(i&=l,i!==0&&(r=Gi(i)))}else l=n&~o,l!==0?r=Gi(l):i!==0&&(r=Gi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ln(t),o=1<<n,r|=e[n],t&=~o;return r}function GS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XS(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Ln(i),c=1<<l,u=o[l];u===-1?(!(c&n)||c&r)&&(o[l]=GS(c,t)):u<=t&&(e.expiredLanes|=c),i&=~c}}function Ru(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ig(){var e=fl;return fl<<=1,!(fl&4194240)&&(fl=64),e}function Ic(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ln(t),e[t]=n}function YS(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Ln(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function Yd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ln(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Te=0;function Cg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _g,Qd,Ng,bg,Pg,Lu=!1,ml=[],jr=null,Rr=null,Lr=null,ys=new Map,Ss=new Map,kr=[],QS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lp(e,t){switch(e){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Li(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=$s(t),t!==null&&Qd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function JS(e,t,n,r,o){switch(t){case"focusin":return jr=Li(jr,e,t,n,r,o),!0;case"dragenter":return Rr=Li(Rr,e,t,n,r,o),!0;case"mouseover":return Lr=Li(Lr,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return ys.set(i,Li(ys.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ss.set(i,Li(Ss.get(i)||null,e,t,n,r,o)),!0}return!1}function jg(e){var t=Zr(e.target);if(t!==null){var n=ho(t);if(n!==null){if(t=n.tag,t===13){if(t=vg(n),t!==null){e.blockedOn=t,Pg(e.priority,function(){Ng(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ou(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Nu=r,n.target.dispatchEvent(r),Nu=null}else return t=$s(n),t!==null&&Qd(t),e.blockedOn=n,!1;t.shift()}return!0}function Op(e,t,n){Ul(e)&&n.delete(t)}function ZS(){Lu=!1,jr!==null&&Ul(jr)&&(jr=null),Rr!==null&&Ul(Rr)&&(Rr=null),Lr!==null&&Ul(Lr)&&(Lr=null),ys.forEach(Op),Ss.forEach(Op)}function Oi(e,t){e.blockedOn===t&&(e.blockedOn=null,Lu||(Lu=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,ZS)))}function xs(e){function t(o){return Oi(o,e)}if(0<ml.length){Oi(ml[0],e);for(var n=1;n<ml.length;n++){var r=ml[n];r.blockedOn===e&&(r.blockedOn=null)}}for(jr!==null&&Oi(jr,e),Rr!==null&&Oi(Rr,e),Lr!==null&&Oi(Lr,e),ys.forEach(t),Ss.forEach(t),n=0;n<kr.length;n++)r=kr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<kr.length&&(n=kr[0],n.blockedOn===null);)jg(n),n.blockedOn===null&&kr.shift()}var Ko=mr.ReactCurrentBatchConfig,na=!0;function qS(e,t,n,r){var o=Te,i=Ko.transition;Ko.transition=null;try{Te=1,Jd(e,t,n,r)}finally{Te=o,Ko.transition=i}}function ex(e,t,n,r){var o=Te,i=Ko.transition;Ko.transition=null;try{Te=4,Jd(e,t,n,r)}finally{Te=o,Ko.transition=i}}function Jd(e,t,n,r){if(na){var o=Ou(e,t,n,r);if(o===null)Dc(e,t,r,ra,n),Lp(e,r);else if(JS(o,e,t,n,r))r.stopPropagation();else if(Lp(e,r),t&4&&-1<QS.indexOf(e)){for(;o!==null;){var i=$s(o);if(i!==null&&_g(i),i=Ou(e,t,n,r),i===null&&Dc(e,t,r,ra,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Dc(e,t,r,null,n)}}var ra=null;function Ou(e,t,n,r){if(ra=null,e=Gd(r),e=Zr(e),e!==null)if(t=ho(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ra=e,null}function Rg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FS()){case Xd:return 1;case kg:return 4;case ea:case $S:return 16;case Ag:return 536870912;default:return 16}default:return 16}}var Cr=null,Zd=null,Bl=null;function Lg(){if(Bl)return Bl;var e,t=Zd,n=t.length,r,o="value"in Cr?Cr.value:Cr.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===o[i-r];r++);return Bl=o.slice(e,1<r?1-r:void 0)}function Fl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hl(){return!0}function Dp(){return!1}function mn(e){function t(n,r,o,i,l){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hl:Dp,this.isPropagationStopped=Dp,this}return Fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),t}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qd=mn(hi),Fs=Fe({},hi,{view:0,detail:0}),tx=mn(Fs),Cc,_c,Di,Da=Fe({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ef,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Di&&(Di&&e.type==="mousemove"?(Cc=e.screenX-Di.screenX,_c=e.screenY-Di.screenY):_c=Cc=0,Di=e),Cc)},movementY:function(e){return"movementY"in e?e.movementY:_c}}),Mp=mn(Da),nx=Fe({},Da,{dataTransfer:0}),rx=mn(nx),ox=Fe({},Fs,{relatedTarget:0}),Nc=mn(ox),ix=Fe({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),sx=mn(ix),lx=Fe({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ax=mn(lx),cx=Fe({},hi,{data:0}),zp=mn(cx),ux={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function px(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fx[e])?!!t[e]:!1}function ef(){return px}var mx=Fe({},Fs,{key:function(e){if(e.key){var t=ux[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ef,charCode:function(e){return e.type==="keypress"?Fl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hx=mn(mx),gx=Fe({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Up=mn(gx),yx=Fe({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ef}),Sx=mn(yx),xx=Fe({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),vx=mn(xx),wx=Fe({},Da,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ex=mn(wx),Tx=[9,13,27,32],tf=ur&&"CompositionEvent"in window,Zi=null;ur&&"documentMode"in document&&(Zi=document.documentMode);var kx=ur&&"TextEvent"in window&&!Zi,Og=ur&&(!tf||Zi&&8<Zi&&11>=Zi),Bp=" ",Fp=!1;function Dg(e,t){switch(e){case"keyup":return Tx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var No=!1;function Ax(e,t){switch(e){case"compositionend":return Mg(t);case"keypress":return t.which!==32?null:(Fp=!0,Bp);case"textInput":return e=t.data,e===Bp&&Fp?null:e;default:return null}}function Ix(e,t){if(No)return e==="compositionend"||!tf&&Dg(e,t)?(e=Lg(),Bl=Zd=Cr=null,No=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Og&&t.locale!=="ko"?null:t.data;default:return null}}var Cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $p(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cx[e.type]:t==="textarea"}function zg(e,t,n,r){hg(r),t=oa(t,"onChange"),0<t.length&&(n=new qd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qi=null,vs=null;function _x(e){Yg(e,0)}function Ma(e){var t=jo(e);if(ag(t))return e}function Nx(e,t){if(e==="change")return t}var Ug=!1;if(ur){var bc;if(ur){var Pc="oninput"in document;if(!Pc){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Pc=typeof Kp.oninput=="function"}bc=Pc}else bc=!1;Ug=bc&&(!document.documentMode||9<document.documentMode)}function Hp(){qi&&(qi.detachEvent("onpropertychange",Bg),vs=qi=null)}function Bg(e){if(e.propertyName==="value"&&Ma(vs)){var t=[];zg(t,vs,e,Gd(e)),xg(_x,t)}}function bx(e,t,n){e==="focusin"?(Hp(),qi=t,vs=n,qi.attachEvent("onpropertychange",Bg)):e==="focusout"&&Hp()}function Px(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ma(vs)}function jx(e,t){if(e==="click")return Ma(t)}function Rx(e,t){if(e==="input"||e==="change")return Ma(t)}function Lx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:Lx;function ws(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!yu.call(t,o)||!Dn(e[o],t[o]))return!1}return!0}function Wp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vp(e,t){var n=Wp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wp(n)}}function Fg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $g(){for(var e=window,t=Jl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Jl(e.document)}return t}function nf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ox(e){var t=$g(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Fg(n.ownerDocument.documentElement,n)){if(r!==null&&nf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Vp(n,i);var l=Vp(n,r);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Dx=ur&&"documentMode"in document&&11>=document.documentMode,bo=null,Du=null,es=null,Mu=!1;function Gp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mu||bo==null||bo!==Jl(r)||(r=bo,"selectionStart"in r&&nf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),es&&ws(es,r)||(es=r,r=oa(Du,"onSelect"),0<r.length&&(t=new qd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bo)))}function gl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Po={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},jc={},Kg={};ur&&(Kg=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function za(e){if(jc[e])return jc[e];if(!Po[e])return e;var t=Po[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Kg)return jc[e]=t[n];return e}var Hg=za("animationend"),Wg=za("animationiteration"),Vg=za("animationstart"),Gg=za("transitionend"),Xg=new Map,Xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(e,t){Xg.set(e,t),mo(t,[e])}for(var Rc=0;Rc<Xp.length;Rc++){var Lc=Xp[Rc],Mx=Lc.toLowerCase(),zx=Lc[0].toUpperCase()+Lc.slice(1);Hr(Mx,"on"+zx)}Hr(Hg,"onAnimationEnd");Hr(Wg,"onAnimationIteration");Hr(Vg,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(Gg,"onTransitionEnd");ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ux=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function Yp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,MS(r,t,void 0,e),e.currentTarget=null}function Yg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&o.isPropagationStopped())break e;Yp(o,c,d),i=u}else for(l=0;l<r.length;l++){if(c=r[l],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&o.isPropagationStopped())break e;Yp(o,c,d),i=u}}}if(ql)throw e=ju,ql=!1,ju=null,e}function je(e,t){var n=t[$u];n===void 0&&(n=t[$u]=new Set);var r=e+"__bubble";n.has(r)||(Qg(t,e,2,!1),n.add(r))}function Oc(e,t,n){var r=0;t&&(r|=4),Qg(n,e,r,t)}var yl="_reactListening"+Math.random().toString(36).slice(2);function Es(e){if(!e[yl]){e[yl]=!0,rg.forEach(function(n){n!=="selectionchange"&&(Ux.has(n)||Oc(n,!1,e),Oc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yl]||(t[yl]=!0,Oc("selectionchange",!1,t))}}function Qg(e,t,n,r){switch(Rg(t)){case 1:var o=qS;break;case 4:o=ex;break;default:o=Jd}n=o.bind(null,t,n,e),o=void 0,!Pu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Dc(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;l=l.return}for(;c!==null;){if(l=Zr(c),l===null)return;if(u=l.tag,u===5||u===6){r=i=l;continue e}c=c.parentNode}}r=r.return}xg(function(){var d=i,f=Gd(n),m=[];e:{var h=Xg.get(e);if(h!==void 0){var y=qd,E=e;switch(e){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":y=hx;break;case"focusin":E="focus",y=Nc;break;case"focusout":E="blur",y=Nc;break;case"beforeblur":case"afterblur":y=Nc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=rx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Sx;break;case Hg:case Wg:case Vg:y=sx;break;case Gg:y=vx;break;case"scroll":y=tx;break;case"wheel":y=Ex;break;case"copy":case"cut":case"paste":y=ax;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Up}var w=(t&4)!==0,k=!w&&e==="scroll",p=w?h!==null?h+"Capture":null:h;w=[];for(var g=d,S;g!==null;){S=g;var v=S.stateNode;if(S.tag===5&&v!==null&&(S=v,p!==null&&(v=gs(g,p),v!=null&&w.push(Ts(g,v,S)))),k)break;g=g.return}0<w.length&&(h=new y(h,E,null,n,f),m.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==Nu&&(E=n.relatedTarget||n.fromElement)&&(Zr(E)||E[dr]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=d,E=E?Zr(E):null,E!==null&&(k=ho(E),E!==k||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=d),y!==E)){if(w=Mp,v="onMouseLeave",p="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(w=Up,v="onPointerLeave",p="onPointerEnter",g="pointer"),k=y==null?h:jo(y),S=E==null?h:jo(E),h=new w(v,g+"leave",y,n,f),h.target=k,h.relatedTarget=S,v=null,Zr(f)===d&&(w=new w(p,g+"enter",E,n,f),w.target=S,w.relatedTarget=k,v=w),k=v,y&&E)t:{for(w=y,p=E,g=0,S=w;S;S=wo(S))g++;for(S=0,v=p;v;v=wo(v))S++;for(;0<g-S;)w=wo(w),g--;for(;0<S-g;)p=wo(p),S--;for(;g--;){if(w===p||p!==null&&w===p.alternate)break t;w=wo(w),p=wo(p)}w=null}else w=null;y!==null&&Qp(m,h,y,w,!1),E!==null&&k!==null&&Qp(m,k,E,w,!0)}}e:{if(h=d?jo(d):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var C=Nx;else if($p(h))if(Ug)C=Rx;else{C=Px;var _=bx}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=jx);if(C&&(C=C(e,d))){zg(m,C,n,f);break e}_&&_(e,h,d),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&ku(h,"number",h.value)}switch(_=d?jo(d):window,e){case"focusin":($p(_)||_.contentEditable==="true")&&(bo=_,Du=d,es=null);break;case"focusout":es=Du=bo=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,Gp(m,n,f);break;case"selectionchange":if(Dx)break;case"keydown":case"keyup":Gp(m,n,f)}var j;if(tf)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else No?Dg(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Og&&n.locale!=="ko"&&(No||D!=="onCompositionStart"?D==="onCompositionEnd"&&No&&(j=Lg()):(Cr=f,Zd="value"in Cr?Cr.value:Cr.textContent,No=!0)),_=oa(d,D),0<_.length&&(D=new zp(D,e,null,n,f),m.push({event:D,listeners:_}),j?D.data=j:(j=Mg(n),j!==null&&(D.data=j)))),(j=kx?Ax(e,n):Ix(e,n))&&(d=oa(d,"onBeforeInput"),0<d.length&&(f=new zp("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=j))}Yg(m,t)})}function Ts(e,t,n){return{instance:e,listener:t,currentTarget:n}}function oa(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=gs(e,n),i!=null&&r.unshift(Ts(e,i,o)),i=gs(e,t),i!=null&&r.push(Ts(e,i,o))),e=e.return}return r}function wo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qp(e,t,n,r,o){for(var i=t._reactName,l=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,o?(u=gs(n,i),u!=null&&l.unshift(Ts(n,u,c))):o||(u=gs(n,i),u!=null&&l.push(Ts(n,u,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Bx=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function Jp(e){return(typeof e=="string"?e:""+e).replace(Bx,`
`).replace(Fx,"")}function Sl(e,t,n){if(t=Jp(t),Jp(e)!==t&&n)throw Error(O(425))}function ia(){}var zu=null,Uu=null;function Bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fu=typeof setTimeout=="function"?setTimeout:void 0,$x=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,Kx=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(e){return Zp.resolve(null).then(e).catch(Hx)}:Fu;function Hx(e){setTimeout(function(){throw e})}function Mc(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),xs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);xs(t)}function Or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gi=Math.random().toString(36).slice(2),Vn="__reactFiber$"+gi,ks="__reactProps$"+gi,dr="__reactContainer$"+gi,$u="__reactEvents$"+gi,Wx="__reactListeners$"+gi,Vx="__reactHandles$"+gi;function Zr(e){var t=e[Vn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dr]||n[Vn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=qp(e);e!==null;){if(n=e[Vn])return n;e=qp(e)}return t}e=n,n=e.parentNode}return null}function $s(e){return e=e[Vn]||e[dr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Ua(e){return e[ks]||null}var Ku=[],Ro=-1;function Wr(e){return{current:e}}function Re(e){0>Ro||(e.current=Ku[Ro],Ku[Ro]=null,Ro--)}function be(e,t){Ro++,Ku[Ro]=e.current,e.current=t}var Fr={},Pt=Wr(Fr),Jt=Wr(!1),io=Fr;function ti(e,t){var n=e.type.contextTypes;if(!n)return Fr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Zt(e){return e=e.childContextTypes,e!=null}function sa(){Re(Jt),Re(Pt)}function em(e,t,n){if(Pt.current!==Fr)throw Error(O(168));be(Pt,t),be(Jt,n)}function Jg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(O(108,bS(e)||"Unknown",o));return Fe({},n,r)}function la(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fr,io=Pt.current,be(Pt,e),be(Jt,Jt.current),!0}function tm(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=Jg(e,t,io),r.__reactInternalMemoizedMergedChildContext=e,Re(Jt),Re(Pt),be(Pt,e)):Re(Jt),be(Jt,n)}var rr=null,Ba=!1,zc=!1;function Zg(e){rr===null?rr=[e]:rr.push(e)}function Gx(e){Ba=!0,Zg(e)}function Vr(){if(!zc&&rr!==null){zc=!0;var e=0,t=Te;try{var n=rr;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rr=null,Ba=!1}catch(o){throw rr!==null&&(rr=rr.slice(e+1)),Tg(Xd,Vr),o}finally{Te=t,zc=!1}}return null}var Lo=[],Oo=0,aa=null,ca=0,yn=[],Sn=0,so=null,ir=1,sr="";function Qr(e,t){Lo[Oo++]=ca,Lo[Oo++]=aa,aa=e,ca=t}function qg(e,t,n){yn[Sn++]=ir,yn[Sn++]=sr,yn[Sn++]=so,so=e;var r=ir;e=sr;var o=32-Ln(r)-1;r&=~(1<<o),n+=1;var i=32-Ln(t)+o;if(30<i){var l=o-o%5;i=(r&(1<<l)-1).toString(32),r>>=l,o-=l,ir=1<<32-Ln(t)+o|n<<o|r,sr=i+e}else ir=1<<i|n<<o|r,sr=e}function rf(e){e.return!==null&&(Qr(e,1),qg(e,1,0))}function of(e){for(;e===aa;)aa=Lo[--Oo],Lo[Oo]=null,ca=Lo[--Oo],Lo[Oo]=null;for(;e===so;)so=yn[--Sn],yn[Sn]=null,sr=yn[--Sn],yn[Sn]=null,ir=yn[--Sn],yn[Sn]=null}var dn=null,un=null,Me=!1,jn=null;function ey(e,t){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function nm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dn=e,un=Or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dn=e,un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=so!==null?{id:ir,overflow:sr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dn=e,un=null,!0):!1;default:return!1}}function Hu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wu(e){if(Me){var t=un;if(t){var n=t;if(!nm(e,t)){if(Hu(e))throw Error(O(418));t=Or(n.nextSibling);var r=dn;t&&nm(e,t)?ey(r,n):(e.flags=e.flags&-4097|2,Me=!1,dn=e)}}else{if(Hu(e))throw Error(O(418));e.flags=e.flags&-4097|2,Me=!1,dn=e}}}function rm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dn=e}function xl(e){if(e!==dn)return!1;if(!Me)return rm(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bu(e.type,e.memoizedProps)),t&&(t=un)){if(Hu(e))throw ty(),Error(O(418));for(;t;)ey(e,t),t=Or(t.nextSibling)}if(rm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){un=Or(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}un=null}}else un=dn?Or(e.stateNode.nextSibling):null;return!0}function ty(){for(var e=un;e;)e=Or(e.nextSibling)}function ni(){un=dn=null,Me=!1}function sf(e){jn===null?jn=[e]:jn.push(e)}var Xx=mr.ReactCurrentBatchConfig;function Mi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var c=o.refs;l===null?delete c[i]:c[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function vl(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function om(e){var t=e._init;return t(e._payload)}function ny(e){function t(p,g){if(e){var S=p.deletions;S===null?(p.deletions=[g],p.flags|=16):S.push(g)}}function n(p,g){if(!e)return null;for(;g!==null;)t(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function o(p,g){return p=Ur(p,g),p.index=0,p.sibling=null,p}function i(p,g,S){return p.index=S,e?(S=p.alternate,S!==null?(S=S.index,S<g?(p.flags|=2,g):S):(p.flags|=2,g)):(p.flags|=1048576,g)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function c(p,g,S,v){return g===null||g.tag!==6?(g=Wc(S,p.mode,v),g.return=p,g):(g=o(g,S),g.return=p,g)}function u(p,g,S,v){var C=S.type;return C===_o?f(p,g,S.props.children,v,S.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===wr&&om(C)===g.type)?(v=o(g,S.props),v.ref=Mi(p,g,S),v.return=p,v):(v=Xl(S.type,S.key,S.props,null,p.mode,v),v.ref=Mi(p,g,S),v.return=p,v)}function d(p,g,S,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==S.containerInfo||g.stateNode.implementation!==S.implementation?(g=Vc(S,p.mode,v),g.return=p,g):(g=o(g,S.children||[]),g.return=p,g)}function f(p,g,S,v,C){return g===null||g.tag!==7?(g=oo(S,p.mode,v,C),g.return=p,g):(g=o(g,S),g.return=p,g)}function m(p,g,S){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Wc(""+g,p.mode,S),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case cl:return S=Xl(g.type,g.key,g.props,null,p.mode,S),S.ref=Mi(p,null,g),S.return=p,S;case Co:return g=Vc(g,p.mode,S),g.return=p,g;case wr:var v=g._init;return m(p,v(g._payload),S)}if(Vi(g)||ji(g))return g=oo(g,p.mode,S,null),g.return=p,g;vl(p,g)}return null}function h(p,g,S,v){var C=g!==null?g.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:c(p,g,""+S,v);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cl:return S.key===C?u(p,g,S,v):null;case Co:return S.key===C?d(p,g,S,v):null;case wr:return C=S._init,h(p,g,C(S._payload),v)}if(Vi(S)||ji(S))return C!==null?null:f(p,g,S,v,null);vl(p,S)}return null}function y(p,g,S,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return p=p.get(S)||null,c(g,p,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cl:return p=p.get(v.key===null?S:v.key)||null,u(g,p,v,C);case Co:return p=p.get(v.key===null?S:v.key)||null,d(g,p,v,C);case wr:var _=v._init;return y(p,g,S,_(v._payload),C)}if(Vi(v)||ji(v))return p=p.get(S)||null,f(g,p,v,C,null);vl(g,v)}return null}function E(p,g,S,v){for(var C=null,_=null,j=g,D=g=0,Y=null;j!==null&&D<S.length;D++){j.index>D?(Y=j,j=null):Y=j.sibling;var B=h(p,j,S[D],v);if(B===null){j===null&&(j=Y);break}e&&j&&B.alternate===null&&t(p,j),g=i(B,g,D),_===null?C=B:_.sibling=B,_=B,j=Y}if(D===S.length)return n(p,j),Me&&Qr(p,D),C;if(j===null){for(;D<S.length;D++)j=m(p,S[D],v),j!==null&&(g=i(j,g,D),_===null?C=j:_.sibling=j,_=j);return Me&&Qr(p,D),C}for(j=r(p,j);D<S.length;D++)Y=y(j,p,D,S[D],v),Y!==null&&(e&&Y.alternate!==null&&j.delete(Y.key===null?D:Y.key),g=i(Y,g,D),_===null?C=Y:_.sibling=Y,_=Y);return e&&j.forEach(function(me){return t(p,me)}),Me&&Qr(p,D),C}function w(p,g,S,v){var C=ji(S);if(typeof C!="function")throw Error(O(150));if(S=C.call(S),S==null)throw Error(O(151));for(var _=C=null,j=g,D=g=0,Y=null,B=S.next();j!==null&&!B.done;D++,B=S.next()){j.index>D?(Y=j,j=null):Y=j.sibling;var me=h(p,j,B.value,v);if(me===null){j===null&&(j=Y);break}e&&j&&me.alternate===null&&t(p,j),g=i(me,g,D),_===null?C=me:_.sibling=me,_=me,j=Y}if(B.done)return n(p,j),Me&&Qr(p,D),C;if(j===null){for(;!B.done;D++,B=S.next())B=m(p,B.value,v),B!==null&&(g=i(B,g,D),_===null?C=B:_.sibling=B,_=B);return Me&&Qr(p,D),C}for(j=r(p,j);!B.done;D++,B=S.next())B=y(j,p,D,B.value,v),B!==null&&(e&&B.alternate!==null&&j.delete(B.key===null?D:B.key),g=i(B,g,D),_===null?C=B:_.sibling=B,_=B);return e&&j.forEach(function(Q){return t(p,Q)}),Me&&Qr(p,D),C}function k(p,g,S,v){if(typeof S=="object"&&S!==null&&S.type===_o&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case cl:e:{for(var C=S.key,_=g;_!==null;){if(_.key===C){if(C=S.type,C===_o){if(_.tag===7){n(p,_.sibling),g=o(_,S.props.children),g.return=p,p=g;break e}}else if(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===wr&&om(C)===_.type){n(p,_.sibling),g=o(_,S.props),g.ref=Mi(p,_,S),g.return=p,p=g;break e}n(p,_);break}else t(p,_);_=_.sibling}S.type===_o?(g=oo(S.props.children,p.mode,v,S.key),g.return=p,p=g):(v=Xl(S.type,S.key,S.props,null,p.mode,v),v.ref=Mi(p,g,S),v.return=p,p=v)}return l(p);case Co:e:{for(_=S.key;g!==null;){if(g.key===_)if(g.tag===4&&g.stateNode.containerInfo===S.containerInfo&&g.stateNode.implementation===S.implementation){n(p,g.sibling),g=o(g,S.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else t(p,g);g=g.sibling}g=Vc(S,p.mode,v),g.return=p,p=g}return l(p);case wr:return _=S._init,k(p,g,_(S._payload),v)}if(Vi(S))return E(p,g,S,v);if(ji(S))return w(p,g,S,v);vl(p,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,g!==null&&g.tag===6?(n(p,g.sibling),g=o(g,S),g.return=p,p=g):(n(p,g),g=Wc(S,p.mode,v),g.return=p,p=g),l(p)):n(p,g)}return k}var ri=ny(!0),ry=ny(!1),ua=Wr(null),da=null,Do=null,lf=null;function af(){lf=Do=da=null}function cf(e){var t=ua.current;Re(ua),e._currentValue=t}function Vu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ho(e,t){da=e,lf=Do=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Yt=!0),e.firstContext=null)}function En(e){var t=e._currentValue;if(lf!==e)if(e={context:e,memoizedValue:t,next:null},Do===null){if(da===null)throw Error(O(308));Do=e,da.dependencies={lanes:0,firstContext:e}}else Do=Do.next=e;return t}var qr=null;function uf(e){qr===null?qr=[e]:qr.push(e)}function oy(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,uf(t)):(n.next=o.next,o.next=n),t.interleaved=n,fr(e,r)}function fr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Er=!1;function df(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,fr(e,n)}return o=r.interleaved,o===null?(t.next=t,uf(r)):(t.next=o.next,o.next=t),r.interleaved=t,fr(e,n)}function $l(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yd(e,n)}}function im(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fa(e,t,n,r){var o=e.updateQueue;Er=!1;var i=o.firstBaseUpdate,l=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var u=c,d=u.next;u.next=null,l===null?i=d:l.next=d,l=u;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==l&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=o.baseState;l=0,f=d=u=null,c=i;do{var h=c.lane,y=c.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=e,w=c;switch(h=t,y=n,w.tag){case 1:if(E=w.payload,typeof E=="function"){m=E.call(y,m,h);break e}m=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=w.payload,h=typeof E=="function"?E.call(y,m,h):E,h==null)break e;m=Fe({},m,h);break e;case 2:Er=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[c]:h.push(c))}else y={eventTime:y,lane:h,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=y,u=m):f=f.next=y,l|=h;if(c=c.next,c===null){if(c=o.shared.pending,c===null)break;h=c,c=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(f===null&&(u=m),o.baseState=u,o.firstBaseUpdate=d,o.lastBaseUpdate=f,t=o.shared.interleaved,t!==null){o=t;do l|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);ao|=l,e.lanes=l,e.memoizedState=m}}function sm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(O(191,o));o.call(r)}}}var Ks={},Jn=Wr(Ks),As=Wr(Ks),Is=Wr(Ks);function eo(e){if(e===Ks)throw Error(O(174));return e}function ff(e,t){switch(be(Is,t),be(As,e),be(Jn,Ks),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Iu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Iu(t,e)}Re(Jn),be(Jn,t)}function oi(){Re(Jn),Re(As),Re(Is)}function sy(e){eo(Is.current);var t=eo(Jn.current),n=Iu(t,e.type);t!==n&&(be(As,e),be(Jn,n))}function pf(e){As.current===e&&(Re(Jn),Re(As))}var Ue=Wr(0);function pa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uc=[];function mf(){for(var e=0;e<Uc.length;e++)Uc[e]._workInProgressVersionPrimary=null;Uc.length=0}var Kl=mr.ReactCurrentDispatcher,Bc=mr.ReactCurrentBatchConfig,lo=0,Be=null,ot=null,ct=null,ma=!1,ts=!1,Cs=0,Yx=0;function Ct(){throw Error(O(321))}function hf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dn(e[n],t[n]))return!1;return!0}function gf(e,t,n,r,o,i){if(lo=i,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kl.current=e===null||e.memoizedState===null?qx:ev,e=n(r,o),ts){i=0;do{if(ts=!1,Cs=0,25<=i)throw Error(O(301));i+=1,ct=ot=null,t.updateQueue=null,Kl.current=tv,e=n(r,o)}while(ts)}if(Kl.current=ha,t=ot!==null&&ot.next!==null,lo=0,ct=ot=Be=null,ma=!1,t)throw Error(O(300));return e}function yf(){var e=Cs!==0;return Cs=0,e}function Hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Be.memoizedState=ct=e:ct=ct.next=e,ct}function Tn(){if(ot===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=ct===null?Be.memoizedState:ct.next;if(t!==null)ct=t,ot=e;else{if(e===null)throw Error(O(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ct===null?Be.memoizedState=ct=e:ct=ct.next=e}return ct}function _s(e,t){return typeof t=="function"?t(e):t}function Fc(e){var t=Tn(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=ot,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var l=o.next;o.next=i.next,i.next=l}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var c=l=null,u=null,d=i;do{var f=d.lane;if((lo&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,l=r):u=u.next=m,Be.lanes|=f,ao|=f}d=d.next}while(d!==null&&d!==i);u===null?l=r:u.next=c,Dn(r,t.memoizedState)||(Yt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,Be.lanes|=i,ao|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $c(e){var t=Tn(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var l=o=o.next;do i=e(i,l.action),l=l.next;while(l!==o);Dn(i,t.memoizedState)||(Yt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ly(){}function ay(e,t){var n=Be,r=Tn(),o=t(),i=!Dn(r.memoizedState,o);if(i&&(r.memoizedState=o,Yt=!0),r=r.queue,Sf(dy.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Ns(9,uy.bind(null,n,r,o,t),void 0,null),ut===null)throw Error(O(349));lo&30||cy(n,t,o)}return o}function cy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uy(e,t,n,r){t.value=n,t.getSnapshot=r,fy(t)&&py(e)}function dy(e,t,n){return n(function(){fy(t)&&py(e)})}function fy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dn(e,n)}catch{return!0}}function py(e){var t=fr(e,1);t!==null&&On(t,e,1,-1)}function lm(e){var t=Hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},t.queue=e,e=e.dispatch=Zx.bind(null,Be,e),[t.memoizedState,e]}function Ns(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Be.updateQueue,t===null?(t={lastEffect:null,stores:null},Be.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function my(){return Tn().memoizedState}function Hl(e,t,n,r){var o=Hn();Be.flags|=e,o.memoizedState=Ns(1|t,n,void 0,r===void 0?null:r)}function Fa(e,t,n,r){var o=Tn();r=r===void 0?null:r;var i=void 0;if(ot!==null){var l=ot.memoizedState;if(i=l.destroy,r!==null&&hf(r,l.deps)){o.memoizedState=Ns(t,n,i,r);return}}Be.flags|=e,o.memoizedState=Ns(1|t,n,i,r)}function am(e,t){return Hl(8390656,8,e,t)}function Sf(e,t){return Fa(2048,8,e,t)}function hy(e,t){return Fa(4,2,e,t)}function gy(e,t){return Fa(4,4,e,t)}function yy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sy(e,t,n){return n=n!=null?n.concat([e]):null,Fa(4,4,yy.bind(null,t,e),n)}function xf(){}function xy(e,t){var n=Tn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vy(e,t){var n=Tn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wy(e,t,n){return lo&21?(Dn(n,t)||(n=Ig(),Be.lanes|=n,ao|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Yt=!0),e.memoizedState=n)}function Qx(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=Bc.transition;Bc.transition={};try{e(!1),t()}finally{Te=n,Bc.transition=r}}function Ey(){return Tn().memoizedState}function Jx(e,t,n){var r=zr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ty(e))ky(t,n);else if(n=oy(e,t,n,r),n!==null){var o=Bt();On(n,e,r,o),Ay(n,t,r)}}function Zx(e,t,n){var r=zr(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ty(e))ky(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,c=i(l,n);if(o.hasEagerState=!0,o.eagerState=c,Dn(c,l)){var u=t.interleaved;u===null?(o.next=o,uf(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=oy(e,t,o,r),n!==null&&(o=Bt(),On(n,e,r,o),Ay(n,t,r))}}function Ty(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function ky(e,t){ts=ma=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ay(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yd(e,n)}}var ha={readContext:En,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},qx={readContext:En,useCallback:function(e,t){return Hn().memoizedState=[e,t===void 0?null:t],e},useContext:En,useEffect:am,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hl(4194308,4,yy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hl(4,2,e,t)},useMemo:function(e,t){var n=Hn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Hn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jx.bind(null,Be,e),[r.memoizedState,e]},useRef:function(e){var t=Hn();return e={current:e},t.memoizedState=e},useState:lm,useDebugValue:xf,useDeferredValue:function(e){return Hn().memoizedState=e},useTransition:function(){var e=lm(!1),t=e[0];return e=Qx.bind(null,e[1]),Hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Be,o=Hn();if(Me){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),ut===null)throw Error(O(349));lo&30||cy(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,am(dy.bind(null,r,i,e),[e]),r.flags|=2048,Ns(9,uy.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Hn(),t=ut.identifierPrefix;if(Me){var n=sr,r=ir;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Cs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Yx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ev={readContext:En,useCallback:xy,useContext:En,useEffect:Sf,useImperativeHandle:Sy,useInsertionEffect:hy,useLayoutEffect:gy,useMemo:vy,useReducer:Fc,useRef:my,useState:function(){return Fc(_s)},useDebugValue:xf,useDeferredValue:function(e){var t=Tn();return wy(t,ot.memoizedState,e)},useTransition:function(){var e=Fc(_s)[0],t=Tn().memoizedState;return[e,t]},useMutableSource:ly,useSyncExternalStore:ay,useId:Ey,unstable_isNewReconciler:!1},tv={readContext:En,useCallback:xy,useContext:En,useEffect:Sf,useImperativeHandle:Sy,useInsertionEffect:hy,useLayoutEffect:gy,useMemo:vy,useReducer:$c,useRef:my,useState:function(){return $c(_s)},useDebugValue:xf,useDeferredValue:function(e){var t=Tn();return ot===null?t.memoizedState=e:wy(t,ot.memoizedState,e)},useTransition:function(){var e=$c(_s)[0],t=Tn().memoizedState;return[e,t]},useMutableSource:ly,useSyncExternalStore:ay,useId:Ey,unstable_isNewReconciler:!1};function Nn(e,t){if(e&&e.defaultProps){t=Fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var $a={isMounted:function(e){return(e=e._reactInternals)?ho(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bt(),o=zr(e),i=ar(r,o);i.payload=t,n!=null&&(i.callback=n),t=Dr(e,i,o),t!==null&&(On(t,e,o,r),$l(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bt(),o=zr(e),i=ar(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Dr(e,i,o),t!==null&&(On(t,e,o,r),$l(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bt(),r=zr(e),o=ar(n,r);o.tag=2,t!=null&&(o.callback=t),t=Dr(e,o,r),t!==null&&(On(t,e,r,n),$l(t,e,r))}};function cm(e,t,n,r,o,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!ws(n,r)||!ws(o,i):!0}function Iy(e,t,n){var r=!1,o=Fr,i=t.contextType;return typeof i=="object"&&i!==null?i=En(i):(o=Zt(t)?io:Pt.current,r=t.contextTypes,i=(r=r!=null)?ti(e,o):Fr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$a,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function um(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$a.enqueueReplaceState(t,t.state,null)}function Xu(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},df(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=En(i):(i=Zt(t)?io:Pt.current,o.context=ti(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Gu(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&$a.enqueueReplaceState(o,o.state,null),fa(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ii(e,t){try{var n="",r=t;do n+=NS(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function Kc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Yu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var nv=typeof WeakMap=="function"?WeakMap:Map;function Cy(e,t,n){n=ar(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ya||(ya=!0,id=r),Yu(e,t)},n}function _y(e,t,n){n=ar(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Yu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Yu(e,t),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function dm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new nv;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=gv.bind(null,e,t,n),t.then(e,e))}function fm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pm(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ar(-1,1),t.tag=2,Dr(n,t,1))),n.lanes|=1),e)}var rv=mr.ReactCurrentOwner,Yt=!1;function zt(e,t,n,r){t.child=e===null?ry(t,null,n,r):ri(t,e.child,n,r)}function mm(e,t,n,r,o){n=n.render;var i=t.ref;return Ho(t,o),r=gf(e,t,n,r,i,o),n=yf(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,pr(e,t,o)):(Me&&n&&rf(t),t.flags|=1,zt(e,t,r,o),t.child)}function hm(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Cf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Ny(e,t,i,r,o)):(e=Xl(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:ws,n(l,r)&&e.ref===t.ref)return pr(e,t,o)}return t.flags|=1,e=Ur(i,r),e.ref=t.ref,e.return=t,t.child=e}function Ny(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(ws(i,r)&&e.ref===t.ref)if(Yt=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(Yt=!0);else return t.lanes=e.lanes,pr(e,t,o)}return Qu(e,t,n,r,o)}function by(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(zo,an),an|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(zo,an),an|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(zo,an),an|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,be(zo,an),an|=r;return zt(e,t,o,n),t.child}function Py(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qu(e,t,n,r,o){var i=Zt(n)?io:Pt.current;return i=ti(t,i),Ho(t,o),n=gf(e,t,n,r,i,o),r=yf(),e!==null&&!Yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,pr(e,t,o)):(Me&&r&&rf(t),t.flags|=1,zt(e,t,n,o),t.child)}function gm(e,t,n,r,o){if(Zt(n)){var i=!0;la(t)}else i=!1;if(Ho(t,o),t.stateNode===null)Wl(e,t),Iy(t,n,r),Xu(t,n,r,o),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var u=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=En(d):(d=Zt(n)?io:Pt.current,d=ti(t,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||u!==d)&&um(t,l,r,d),Er=!1;var h=t.memoizedState;l.state=h,fa(t,r,l,o),u=t.memoizedState,c!==r||h!==u||Jt.current||Er?(typeof f=="function"&&(Gu(t,n,f,r),u=t.memoizedState),(c=Er||cm(t,n,c,r,h,u,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=d,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,iy(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:Nn(t.type,c),l.props=d,m=t.pendingProps,h=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=En(u):(u=Zt(n)?io:Pt.current,u=ti(t,u));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==m||h!==u)&&um(t,l,r,u),Er=!1,h=t.memoizedState,l.state=h,fa(t,r,l,o);var E=t.memoizedState;c!==m||h!==E||Jt.current||Er?(typeof y=="function"&&(Gu(t,n,y,r),E=t.memoizedState),(d=Er||cm(t,n,d,r,h,E,u)||!1)?(f||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,E,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,E,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=E),l.props=r,l.state=E,l.context=u,r=d):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ju(e,t,n,r,i,o)}function Ju(e,t,n,r,o,i){Py(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return o&&tm(t,n,!1),pr(e,t,i);r=t.stateNode,rv.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ri(t,e.child,null,i),t.child=ri(t,null,c,i)):zt(e,t,c,i),t.memoizedState=r.state,o&&tm(t,n,!0),t.child}function jy(e){var t=e.stateNode;t.pendingContext?em(e,t.pendingContext,t.pendingContext!==t.context):t.context&&em(e,t.context,!1),ff(e,t.containerInfo)}function ym(e,t,n,r,o){return ni(),sf(o),t.flags|=256,zt(e,t,n,r),t.child}var Zu={dehydrated:null,treeContext:null,retryLane:0};function qu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ry(e,t,n){var r=t.pendingProps,o=Ue.current,i=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(o&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),be(Ue,o&1),e===null)return Wu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Wa(l,r,0,null),e=oo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=qu(n),t.memoizedState=Zu,e):vf(t,l));if(o=e.memoizedState,o!==null&&(c=o.dehydrated,c!==null))return ov(e,t,l,r,c,o,n);if(i){i=r.fallback,l=t.mode,o=e.child,c=o.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ur(o,u),r.subtreeFlags=o.subtreeFlags&14680064),c!==null?i=Ur(c,i):(i=oo(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?qu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Zu,r}return i=e.child,e=i.sibling,r=Ur(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vf(e,t){return t=Wa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wl(e,t,n,r){return r!==null&&sf(r),ri(t,e.child,null,n),e=vf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ov(e,t,n,r,o,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Kc(Error(O(422))),wl(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Wa({mode:"visible",children:r.children},o,0,null),i=oo(i,o,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ri(t,e.child,null,l),t.child.memoizedState=qu(l),t.memoizedState=Zu,i);if(!(t.mode&1))return wl(e,t,l,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(O(419)),r=Kc(i,r,void 0),wl(e,t,l,r)}if(c=(l&e.childLanes)!==0,Yt||c){if(r=ut,r!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|l)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,fr(e,o),On(r,e,o,-1))}return If(),r=Kc(Error(O(421))),wl(e,t,l,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=yv.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,un=Or(o.nextSibling),dn=t,Me=!0,jn=null,e!==null&&(yn[Sn++]=ir,yn[Sn++]=sr,yn[Sn++]=so,ir=e.id,sr=e.overflow,so=t),t=vf(t,r.children),t.flags|=4096,t)}function Sm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vu(e.return,t,n)}function Hc(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Ly(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(zt(e,t,r.children,n),r=Ue.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sm(e,n,t);else if(e.tag===19)Sm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(be(Ue,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&pa(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Hc(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&pa(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Hc(t,!0,n,null,i);break;case"together":Hc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ao|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=Ur(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ur(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function iv(e,t,n){switch(t.tag){case 3:jy(t),ni();break;case 5:sy(t);break;case 1:Zt(t.type)&&la(t);break;case 4:ff(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;be(ua,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(be(Ue,Ue.current&1),t.flags|=128,null):n&t.child.childLanes?Ry(e,t,n):(be(Ue,Ue.current&1),e=pr(e,t,n),e!==null?e.sibling:null);be(Ue,Ue.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ly(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),be(Ue,Ue.current),r)break;return null;case 22:case 23:return t.lanes=0,by(e,t,n)}return pr(e,t,n)}var Oy,ed,Dy,My;Oy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ed=function(){};Dy=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,eo(Jn.current);var i=null;switch(n){case"input":o=Eu(e,o),r=Eu(e,r),i=[];break;case"select":o=Fe({},o,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":o=Au(e,o),r=Au(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ia)}Cu(n,r);var l;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var c=o[d];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ms.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ms.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&je("scroll",e),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};My=function(e,t,n,r){n!==r&&(t.flags|=4)};function zi(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function _t(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sv(e,t,n){var r=t.pendingProps;switch(of(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(t),null;case 1:return Zt(t.type)&&sa(),_t(t),null;case 3:return r=t.stateNode,oi(),Re(Jt),Re(Pt),mf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jn!==null&&(ad(jn),jn=null))),ed(e,t),_t(t),null;case 5:pf(t);var o=eo(Is.current);if(n=t.type,e!==null&&t.stateNode!=null)Dy(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return _t(t),null}if(e=eo(Jn.current),xl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vn]=t,r[ks]=i,e=(t.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(o=0;o<Xi.length;o++)je(Xi[o],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Cp(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":Np(r,i),je("invalid",r)}Cu(n,i),o=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Sl(r.textContent,c,e),o=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Sl(r.textContent,c,e),o=["children",""+c]):ms.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&je("scroll",r)}switch(n){case"input":ul(r),_p(r,i,!0);break;case"textarea":ul(r),bp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ia)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Vn]=t,e[ks]=r,Oy(e,t,!1,!1),t.stateNode=e;e:{switch(l=_u(n,r),n){case"dialog":je("cancel",e),je("close",e),o=r;break;case"iframe":case"object":case"embed":je("load",e),o=r;break;case"video":case"audio":for(o=0;o<Xi.length;o++)je(Xi[o],e);o=r;break;case"source":je("error",e),o=r;break;case"img":case"image":case"link":je("error",e),je("load",e),o=r;break;case"details":je("toggle",e),o=r;break;case"input":Cp(e,r),o=Eu(e,r),je("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Fe({},r,{value:void 0}),je("invalid",e);break;case"textarea":Np(e,r),o=Au(e,r),je("invalid",e);break;default:o=r}Cu(n,o),c=o;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?mg(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fg(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&hs(e,u):typeof u=="number"&&hs(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ms.hasOwnProperty(i)?u!=null&&i==="onScroll"&&je("scroll",e):u!=null&&Kd(e,i,u,l))}switch(n){case"input":ul(e),_p(e,r,!1);break;case"textarea":ul(e),bp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Br(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Bo(e,!!r.multiple,i,!1):r.defaultValue!=null&&Bo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ia)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _t(t),null;case 6:if(e&&t.stateNode!=null)My(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=eo(Is.current),eo(Jn.current),xl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vn]=t,(i=r.nodeValue!==n)&&(e=dn,e!==null))switch(e.tag){case 3:Sl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=t,t.stateNode=r}return _t(t),null;case 13:if(Re(Ue),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&un!==null&&t.mode&1&&!(t.flags&128))ty(),ni(),t.flags|=98560,i=!1;else if(i=xl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(O(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[Vn]=t}else ni(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_t(t),i=!1}else jn!==null&&(ad(jn),jn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ue.current&1?it===0&&(it=3):If())),t.updateQueue!==null&&(t.flags|=4),_t(t),null);case 4:return oi(),ed(e,t),e===null&&Es(t.stateNode.containerInfo),_t(t),null;case 10:return cf(t.type._context),_t(t),null;case 17:return Zt(t.type)&&sa(),_t(t),null;case 19:if(Re(Ue),i=t.memoizedState,i===null)return _t(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)zi(i,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=pa(e),l!==null){for(t.flags|=128,zi(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return be(Ue,Ue.current&1|2),t.child}e=e.sibling}i.tail!==null&&Qe()>si&&(t.flags|=128,r=!0,zi(i,!1),t.lanes=4194304)}else{if(!r)if(e=pa(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Me)return _t(t),null}else 2*Qe()-i.renderingStartTime>si&&n!==1073741824&&(t.flags|=128,r=!0,zi(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=Ue.current,be(Ue,r?n&1|2:n&1),t):(_t(t),null);case 22:case 23:return Af(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?an&1073741824&&(_t(t),t.subtreeFlags&6&&(t.flags|=8192)):_t(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function lv(e,t){switch(of(t),t.tag){case 1:return Zt(t.type)&&sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oi(),Re(Jt),Re(Pt),mf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pf(t),null;case 13:if(Re(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));ni()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Ue),null;case 4:return oi(),null;case 10:return cf(t.type._context),null;case 22:case 23:return Af(),null;case 24:return null;default:return null}}var El=!1,Nt=!1,av=typeof WeakSet=="function"?WeakSet:Set,F=null;function Mo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(e,t,r)}else n.current=null}function td(e,t,n){try{n()}catch(r){Xe(e,t,r)}}var xm=!1;function cv(e,t){if(zu=na,e=$g(),nf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,c=-1,u=-1,d=0,f=0,m=e,h=null;t:for(;;){for(var y;m!==n||o!==0&&m.nodeType!==3||(c=l+o),m!==i||r!==0&&m.nodeType!==3||(u=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===e)break t;if(h===n&&++d===o&&(c=l),h===i&&++f===r&&(u=l),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uu={focusedElem:e,selectionRange:n},na=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var w=E.memoizedProps,k=E.memoizedState,p=t.stateNode,g=p.getSnapshotBeforeUpdate(t.elementType===t.type?w:Nn(t.type,w),k);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(v){Xe(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return E=xm,xm=!1,E}function ns(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&td(t,n,i)}o=o.next}while(o!==r)}}function Ka(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zy(e){var t=e.alternate;t!==null&&(e.alternate=null,zy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vn],delete t[ks],delete t[$u],delete t[Wx],delete t[Vx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uy(e){return e.tag===5||e.tag===3||e.tag===4}function vm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ia));else if(r!==4&&(e=e.child,e!==null))for(rd(e,t,n),e=e.sibling;e!==null;)rd(e,t,n),e=e.sibling}function od(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(od(e,t,n),e=e.sibling;e!==null;)od(e,t,n),e=e.sibling}var yt=null,Pn=!1;function Sr(e,t,n){for(n=n.child;n!==null;)By(e,t,n),n=n.sibling}function By(e,t,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Oa,n)}catch{}switch(n.tag){case 5:Nt||Mo(n,t);case 6:var r=yt,o=Pn;yt=null,Sr(e,t,n),yt=r,Pn=o,yt!==null&&(Pn?(e=yt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(Pn?(e=yt,n=n.stateNode,e.nodeType===8?Mc(e.parentNode,n):e.nodeType===1&&Mc(e,n),xs(e)):Mc(yt,n.stateNode));break;case 4:r=yt,o=Pn,yt=n.stateNode.containerInfo,Pn=!0,Sr(e,t,n),yt=r,Pn=o;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&td(n,t,l),o=o.next}while(o!==r)}Sr(e,t,n);break;case 1:if(!Nt&&(Mo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Xe(n,t,c)}Sr(e,t,n);break;case 21:Sr(e,t,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,Sr(e,t,n),Nt=r):Sr(e,t,n);break;default:Sr(e,t,n)}}function wm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new av),t.forEach(function(r){var o=Sv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function _n(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:yt=c.stateNode,Pn=!1;break e;case 3:yt=c.stateNode.containerInfo,Pn=!0;break e;case 4:yt=c.stateNode.containerInfo,Pn=!0;break e}c=c.return}if(yt===null)throw Error(O(160));By(i,l,o),yt=null,Pn=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(d){Xe(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fy(t,e),t=t.sibling}function Fy(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_n(t,e),$n(e),r&4){try{ns(3,e,e.return),Ka(3,e)}catch(w){Xe(e,e.return,w)}try{ns(5,e,e.return)}catch(w){Xe(e,e.return,w)}}break;case 1:_n(t,e),$n(e),r&512&&n!==null&&Mo(n,n.return);break;case 5:if(_n(t,e),$n(e),r&512&&n!==null&&Mo(n,n.return),e.flags&32){var o=e.stateNode;try{hs(o,"")}catch(w){Xe(e,e.return,w)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&cg(o,i),_u(c,l);var d=_u(c,i);for(l=0;l<u.length;l+=2){var f=u[l],m=u[l+1];f==="style"?mg(o,m):f==="dangerouslySetInnerHTML"?fg(o,m):f==="children"?hs(o,m):Kd(o,f,m,d)}switch(c){case"input":Tu(o,i);break;case"textarea":ug(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Bo(o,!!i.multiple,y,!1):h!==!!i.multiple&&(i.defaultValue!=null?Bo(o,!!i.multiple,i.defaultValue,!0):Bo(o,!!i.multiple,i.multiple?[]:"",!1))}o[ks]=i}catch(w){Xe(e,e.return,w)}}break;case 6:if(_n(t,e),$n(e),r&4){if(e.stateNode===null)throw Error(O(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(w){Xe(e,e.return,w)}}break;case 3:if(_n(t,e),$n(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xs(t.containerInfo)}catch(w){Xe(e,e.return,w)}break;case 4:_n(t,e),$n(e);break;case 13:_n(t,e),$n(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Tf=Qe())),r&4&&wm(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Nt=(d=Nt)||f,_n(t,e),Nt=d):_n(t,e),$n(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(F=e,f=e.child;f!==null;){for(m=F=f;F!==null;){switch(h=F,y=h.child,h.tag){case 0:case 11:case 14:case 15:ns(4,h,h.return);break;case 1:Mo(h,h.return);var E=h.stateNode;if(typeof E.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(w){Xe(r,n,w)}}break;case 5:Mo(h,h.return);break;case 22:if(h.memoizedState!==null){Tm(m);continue}}y!==null?(y.return=h,F=y):Tm(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{o=m.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=pg("display",l))}catch(w){Xe(e,e.return,w)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(w){Xe(e,e.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:_n(t,e),$n(e),r&4&&wm(e);break;case 21:break;default:_n(t,e),$n(e)}}function $n(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Uy(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(hs(o,""),r.flags&=-33);var i=vm(e);od(e,i,o);break;case 3:case 4:var l=r.stateNode.containerInfo,c=vm(e);rd(e,c,l);break;default:throw Error(O(161))}}catch(u){Xe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uv(e,t,n){F=e,$y(e)}function $y(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var o=F,i=o.child;if(o.tag===22&&r){var l=o.memoizedState!==null||El;if(!l){var c=o.alternate,u=c!==null&&c.memoizedState!==null||Nt;c=El;var d=Nt;if(El=l,(Nt=u)&&!d)for(F=o;F!==null;)l=F,u=l.child,l.tag===22&&l.memoizedState!==null?km(o):u!==null?(u.return=l,F=u):km(o);for(;i!==null;)F=i,$y(i),i=i.sibling;F=o,El=c,Nt=d}Em(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,F=i):Em(e)}}function Em(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nt||Ka(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Nn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&sm(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}sm(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&xs(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Nt||t.flags&512&&nd(t)}catch(h){Xe(t,t.return,h)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function Tm(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function km(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ka(4,t)}catch(u){Xe(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){Xe(t,o,u)}}var i=t.return;try{nd(t)}catch(u){Xe(t,i,u)}break;case 5:var l=t.return;try{nd(t)}catch(u){Xe(t,l,u)}}}catch(u){Xe(t,t.return,u)}if(t===e){F=null;break}var c=t.sibling;if(c!==null){c.return=t.return,F=c;break}F=t.return}}var dv=Math.ceil,ga=mr.ReactCurrentDispatcher,wf=mr.ReactCurrentOwner,wn=mr.ReactCurrentBatchConfig,pe=0,ut=null,tt=null,xt=0,an=0,zo=Wr(0),it=0,bs=null,ao=0,Ha=0,Ef=0,rs=null,Xt=null,Tf=0,si=1/0,tr=null,ya=!1,id=null,Mr=null,Tl=!1,_r=null,Sa=0,os=0,sd=null,Vl=-1,Gl=0;function Bt(){return pe&6?Qe():Vl!==-1?Vl:Vl=Qe()}function zr(e){return e.mode&1?pe&2&&xt!==0?xt&-xt:Xx.transition!==null?(Gl===0&&(Gl=Ig()),Gl):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Rg(e.type)),e):1}function On(e,t,n,r){if(50<os)throw os=0,sd=null,Error(O(185));Bs(e,n,r),(!(pe&2)||e!==ut)&&(e===ut&&(!(pe&2)&&(Ha|=n),it===4&&Ar(e,xt)),qt(e,r),n===1&&pe===0&&!(t.mode&1)&&(si=Qe()+500,Ba&&Vr()))}function qt(e,t){var n=e.callbackNode;XS(e,t);var r=ta(e,e===ut?xt:0);if(r===0)n!==null&&Rp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Rp(n),t===1)e.tag===0?Gx(Am.bind(null,e)):Zg(Am.bind(null,e)),Kx(function(){!(pe&6)&&Vr()}),n=null;else{switch(Cg(r)){case 1:n=Xd;break;case 4:n=kg;break;case 16:n=ea;break;case 536870912:n=Ag;break;default:n=ea}n=Qy(n,Ky.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ky(e,t){if(Vl=-1,Gl=0,pe&6)throw Error(O(327));var n=e.callbackNode;if(Wo()&&e.callbackNode!==n)return null;var r=ta(e,e===ut?xt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xa(e,r);else{t=r;var o=pe;pe|=2;var i=Wy();(ut!==e||xt!==t)&&(tr=null,si=Qe()+500,ro(e,t));do try{mv();break}catch(c){Hy(e,c)}while(!0);af(),ga.current=i,pe=o,tt!==null?t=0:(ut=null,xt=0,t=it)}if(t!==0){if(t===2&&(o=Ru(e),o!==0&&(r=o,t=ld(e,o))),t===1)throw n=bs,ro(e,0),Ar(e,r),qt(e,Qe()),n;if(t===6)Ar(e,r);else{if(o=e.current.alternate,!(r&30)&&!fv(o)&&(t=xa(e,r),t===2&&(i=Ru(e),i!==0&&(r=i,t=ld(e,i))),t===1))throw n=bs,ro(e,0),Ar(e,r),qt(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:Jr(e,Xt,tr);break;case 3:if(Ar(e,r),(r&130023424)===r&&(t=Tf+500-Qe(),10<t)){if(ta(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Bt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Fu(Jr.bind(null,e,Xt,tr),t);break}Jr(e,Xt,tr);break;case 4:if(Ar(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-Ln(r);i=1<<l,l=t[l],l>o&&(o=l),r&=~i}if(r=o,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dv(r/1960))-r,10<r){e.timeoutHandle=Fu(Jr.bind(null,e,Xt,tr),r);break}Jr(e,Xt,tr);break;case 5:Jr(e,Xt,tr);break;default:throw Error(O(329))}}}return qt(e,Qe()),e.callbackNode===n?Ky.bind(null,e):null}function ld(e,t){var n=rs;return e.current.memoizedState.isDehydrated&&(ro(e,t).flags|=256),e=xa(e,t),e!==2&&(t=Xt,Xt=n,t!==null&&ad(t)),e}function ad(e){Xt===null?Xt=e:Xt.push.apply(Xt,e)}function fv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Dn(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ar(e,t){for(t&=~Ef,t&=~Ha,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ln(t),r=1<<n;e[n]=-1,t&=~r}}function Am(e){if(pe&6)throw Error(O(327));Wo();var t=ta(e,0);if(!(t&1))return qt(e,Qe()),null;var n=xa(e,t);if(e.tag!==0&&n===2){var r=Ru(e);r!==0&&(t=r,n=ld(e,r))}if(n===1)throw n=bs,ro(e,0),Ar(e,t),qt(e,Qe()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jr(e,Xt,tr),qt(e,Qe()),null}function kf(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&(si=Qe()+500,Ba&&Vr())}}function co(e){_r!==null&&_r.tag===0&&!(pe&6)&&Wo();var t=pe;pe|=1;var n=wn.transition,r=Te;try{if(wn.transition=null,Te=1,e)return e()}finally{Te=r,wn.transition=n,pe=t,!(pe&6)&&Vr()}}function Af(){an=zo.current,Re(zo)}function ro(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$x(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sa();break;case 3:oi(),Re(Jt),Re(Pt),mf();break;case 5:pf(r);break;case 4:oi();break;case 13:Re(Ue);break;case 19:Re(Ue);break;case 10:cf(r.type._context);break;case 22:case 23:Af()}n=n.return}if(ut=e,tt=e=Ur(e.current,null),xt=an=t,it=0,bs=null,Ef=Ha=ao=0,Xt=rs=null,qr!==null){for(t=0;t<qr.length;t++)if(n=qr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=o,r.next=l}n.pending=r}qr=null}return e}function Hy(e,t){do{var n=tt;try{if(af(),Kl.current=ha,ma){for(var r=Be.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ma=!1}if(lo=0,ct=ot=Be=null,ts=!1,Cs=0,wf.current=null,n===null||n.return===null){it=1,bs=t,tt=null;break}e:{var i=e,l=n.return,c=n,u=t;if(t=xt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=fm(l);if(y!==null){y.flags&=-257,pm(y,l,c,i,t),y.mode&1&&dm(i,d,t),t=y,u=d;var E=t.updateQueue;if(E===null){var w=new Set;w.add(u),t.updateQueue=w}else E.add(u);break e}else{if(!(t&1)){dm(i,d,t),If();break e}u=Error(O(426))}}else if(Me&&c.mode&1){var k=fm(l);if(k!==null){!(k.flags&65536)&&(k.flags|=256),pm(k,l,c,i,t),sf(ii(u,c));break e}}i=u=ii(u,c),it!==4&&(it=2),rs===null?rs=[i]:rs.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Cy(i,u,t);im(i,p);break e;case 1:c=u;var g=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Mr===null||!Mr.has(S)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=_y(i,c,t);im(i,v);break e}}i=i.return}while(i!==null)}Gy(n)}catch(C){t=C,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function Wy(){var e=ga.current;return ga.current=ha,e===null?ha:e}function If(){(it===0||it===3||it===2)&&(it=4),ut===null||!(ao&268435455)&&!(Ha&268435455)||Ar(ut,xt)}function xa(e,t){var n=pe;pe|=2;var r=Wy();(ut!==e||xt!==t)&&(tr=null,ro(e,t));do try{pv();break}catch(o){Hy(e,o)}while(!0);if(af(),pe=n,ga.current=r,tt!==null)throw Error(O(261));return ut=null,xt=0,it}function pv(){for(;tt!==null;)Vy(tt)}function mv(){for(;tt!==null&&!US();)Vy(tt)}function Vy(e){var t=Yy(e.alternate,e,an);e.memoizedProps=e.pendingProps,t===null?Gy(e):tt=t,wf.current=null}function Gy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lv(n,t),n!==null){n.flags&=32767,tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,tt=null;return}}else if(n=sv(n,t,an),n!==null){tt=n;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);it===0&&(it=5)}function Jr(e,t,n){var r=Te,o=wn.transition;try{wn.transition=null,Te=1,hv(e,t,n,r)}finally{wn.transition=o,Te=r}return null}function hv(e,t,n,r){do Wo();while(_r!==null);if(pe&6)throw Error(O(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(YS(e,i),e===ut&&(tt=ut=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tl||(Tl=!0,Qy(ea,function(){return Wo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wn.transition,wn.transition=null;var l=Te;Te=1;var c=pe;pe|=4,wf.current=null,cv(e,n),Fy(n,e),Ox(Uu),na=!!zu,Uu=zu=null,e.current=n,uv(n),BS(),pe=c,Te=l,wn.transition=i}else e.current=n;if(Tl&&(Tl=!1,_r=e,Sa=o),i=e.pendingLanes,i===0&&(Mr=null),KS(n.stateNode),qt(e,Qe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ya)throw ya=!1,e=id,id=null,e;return Sa&1&&e.tag!==0&&Wo(),i=e.pendingLanes,i&1?e===sd?os++:(os=0,sd=e):os=0,Vr(),null}function Wo(){if(_r!==null){var e=Cg(Sa),t=wn.transition,n=Te;try{if(wn.transition=null,Te=16>e?16:e,_r===null)var r=!1;else{if(e=_r,_r=null,Sa=0,pe&6)throw Error(O(331));var o=pe;for(pe|=4,F=e.current;F!==null;){var i=F,l=i.child;if(F.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(F=d;F!==null;){var f=F;switch(f.tag){case 0:case 11:case 15:ns(8,f,i)}var m=f.child;if(m!==null)m.return=f,F=m;else for(;F!==null;){f=F;var h=f.sibling,y=f.return;if(zy(f),f===d){F=null;break}if(h!==null){h.return=y,F=h;break}F=y}}}var E=i.alternate;if(E!==null){var w=E.child;if(w!==null){E.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}F=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,F=l;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ns(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,F=p;break e}F=i.return}}var g=e.current;for(F=g;F!==null;){l=F;var S=l.child;if(l.subtreeFlags&2064&&S!==null)S.return=l,F=S;else e:for(l=g;F!==null;){if(c=F,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ka(9,c)}}catch(C){Xe(c,c.return,C)}if(c===l){F=null;break e}var v=c.sibling;if(v!==null){v.return=c.return,F=v;break e}F=c.return}}if(pe=o,Vr(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Oa,e)}catch{}r=!0}return r}finally{Te=n,wn.transition=t}}return!1}function Im(e,t,n){t=ii(n,t),t=Cy(e,t,1),e=Dr(e,t,1),t=Bt(),e!==null&&(Bs(e,1,t),qt(e,t))}function Xe(e,t,n){if(e.tag===3)Im(e,e,n);else for(;t!==null;){if(t.tag===3){Im(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){e=ii(n,e),e=_y(t,e,1),t=Dr(t,e,1),e=Bt(),t!==null&&(Bs(t,1,e),qt(t,e));break}}t=t.return}}function gv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Bt(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(xt&n)===n&&(it===4||it===3&&(xt&130023424)===xt&&500>Qe()-Tf?ro(e,0):Ef|=n),qt(e,t)}function Xy(e,t){t===0&&(e.mode&1?(t=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):t=1);var n=Bt();e=fr(e,t),e!==null&&(Bs(e,t,n),qt(e,n))}function yv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xy(e,n)}function Sv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),Xy(e,n)}var Yy;Yy=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jt.current)Yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Yt=!1,iv(e,t,n);Yt=!!(e.flags&131072)}else Yt=!1,Me&&t.flags&1048576&&qg(t,ca,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wl(e,t),e=t.pendingProps;var o=ti(t,Pt.current);Ho(t,n),o=gf(null,t,r,e,o,n);var i=yf();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zt(r)?(i=!0,la(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,df(t),o.updater=$a,t.stateNode=o,o._reactInternals=t,Xu(t,r,e,n),t=Ju(null,t,r,!0,i,n)):(t.tag=0,Me&&i&&rf(t),zt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=vv(r),e=Nn(r,e),o){case 0:t=Qu(null,t,r,e,n);break e;case 1:t=gm(null,t,r,e,n);break e;case 11:t=mm(null,t,r,e,n);break e;case 14:t=hm(null,t,r,Nn(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Nn(r,o),Qu(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Nn(r,o),gm(e,t,r,o,n);case 3:e:{if(jy(t),e===null)throw Error(O(387));r=t.pendingProps,i=t.memoizedState,o=i.element,iy(e,t),fa(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=ii(Error(O(423)),t),t=ym(e,t,r,n,o);break e}else if(r!==o){o=ii(Error(O(424)),t),t=ym(e,t,r,n,o);break e}else for(un=Or(t.stateNode.containerInfo.firstChild),dn=t,Me=!0,jn=null,n=ry(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ni(),r===o){t=pr(e,t,n);break e}zt(e,t,r,n)}t=t.child}return t;case 5:return sy(t),e===null&&Wu(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,l=o.children,Bu(r,o)?l=null:i!==null&&Bu(r,i)&&(t.flags|=32),Py(e,t),zt(e,t,l,n),t.child;case 6:return e===null&&Wu(t),null;case 13:return Ry(e,t,n);case 4:return ff(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ri(t,null,r,n):zt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Nn(r,o),mm(e,t,r,o,n);case 7:return zt(e,t,t.pendingProps,n),t.child;case 8:return zt(e,t,t.pendingProps.children,n),t.child;case 12:return zt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,l=o.value,be(ua,r._currentValue),r._currentValue=l,i!==null)if(Dn(i.value,l)){if(i.children===o.children&&!Jt.current){t=pr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=ar(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Vu(i.return,n,t),c.lanes|=n;break}u=u.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(O(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Vu(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}zt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ho(t,n),o=En(o),r=r(o),t.flags|=1,zt(e,t,r,n),t.child;case 14:return r=t.type,o=Nn(r,t.pendingProps),o=Nn(r.type,o),hm(e,t,r,o,n);case 15:return Ny(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Nn(r,o),Wl(e,t),t.tag=1,Zt(r)?(e=!0,la(t)):e=!1,Ho(t,n),Iy(t,r,o),Xu(t,r,o,n),Ju(null,t,r,!0,e,n);case 19:return Ly(e,t,n);case 22:return by(e,t,n)}throw Error(O(156,t.tag))};function Qy(e,t){return Tg(e,t)}function xv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,t,n,r){return new xv(e,t,n,r)}function Cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vv(e){if(typeof e=="function")return Cf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wd)return 11;if(e===Vd)return 14}return 2}function Ur(e,t){var n=e.alternate;return n===null?(n=xn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xl(e,t,n,r,o,i){var l=2;if(r=e,typeof e=="function")Cf(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case _o:return oo(n.children,o,i,t);case Hd:l=8,o|=8;break;case Su:return e=xn(12,n,t,o|2),e.elementType=Su,e.lanes=i,e;case xu:return e=xn(13,n,t,o),e.elementType=xu,e.lanes=i,e;case vu:return e=xn(19,n,t,o),e.elementType=vu,e.lanes=i,e;case sg:return Wa(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case og:l=10;break e;case ig:l=9;break e;case Wd:l=11;break e;case Vd:l=14;break e;case wr:l=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=xn(l,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function oo(e,t,n,r){return e=xn(7,e,r,t),e.lanes=n,e}function Wa(e,t,n,r){return e=xn(22,e,r,t),e.elementType=sg,e.lanes=n,e.stateNode={isHidden:!1},e}function Wc(e,t,n){return e=xn(6,e,null,t),e.lanes=n,e}function Vc(e,t,n){return t=xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ic(0),this.expirationTimes=Ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ic(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function _f(e,t,n,r,o,i,l,c,u){return e=new wv(e,t,n,c,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},df(i),e}function Ev(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Jy(e){if(!e)return Fr;e=e._reactInternals;e:{if(ho(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(Zt(n))return Jg(e,n,t)}return t}function Zy(e,t,n,r,o,i,l,c,u){return e=_f(n,r,!0,e,o,i,l,c,u),e.context=Jy(null),n=e.current,r=Bt(),o=zr(n),i=ar(r,o),i.callback=t??null,Dr(n,i,o),e.current.lanes=o,Bs(e,o,r),qt(e,r),e}function Va(e,t,n,r){var o=t.current,i=Bt(),l=zr(o);return n=Jy(n),t.context===null?t.context=n:t.pendingContext=n,t=ar(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Dr(o,t,l),e!==null&&(On(e,o,l,i),$l(e,o,l)),l}function va(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nf(e,t){Cm(e,t),(e=e.alternate)&&Cm(e,t)}function Tv(){return null}var qy=typeof reportError=="function"?reportError:function(e){console.error(e)};function bf(e){this._internalRoot=e}Ga.prototype.render=bf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));Va(e,t,null,null)};Ga.prototype.unmount=bf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;co(function(){Va(null,e,null,null)}),t[dr]=null}};function Ga(e){this._internalRoot=e}Ga.prototype.unstable_scheduleHydration=function(e){if(e){var t=bg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kr.length&&t!==0&&t<kr[n].priority;n++);kr.splice(n,0,e),n===0&&jg(e)}};function Pf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _m(){}function kv(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=va(l);i.call(d)}}var l=Zy(t,r,e,0,null,!1,!1,"",_m);return e._reactRootContainer=l,e[dr]=l.current,Es(e.nodeType===8?e.parentNode:e),co(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var c=r;r=function(){var d=va(u);c.call(d)}}var u=_f(e,0,!1,null,null,!1,!1,"",_m);return e._reactRootContainer=u,e[dr]=u.current,Es(e.nodeType===8?e.parentNode:e),co(function(){Va(t,u,n,r)}),u}function Ya(e,t,n,r,o){var i=n._reactRootContainer;if(i){var l=i;if(typeof o=="function"){var c=o;o=function(){var u=va(l);c.call(u)}}Va(t,l,e,o)}else l=kv(n,t,e,o,r);return va(l)}_g=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Gi(t.pendingLanes);n!==0&&(Yd(t,n|1),qt(t,Qe()),!(pe&6)&&(si=Qe()+500,Vr()))}break;case 13:co(function(){var r=fr(e,1);if(r!==null){var o=Bt();On(r,e,1,o)}}),Nf(e,1)}};Qd=function(e){if(e.tag===13){var t=fr(e,134217728);if(t!==null){var n=Bt();On(t,e,134217728,n)}Nf(e,134217728)}};Ng=function(e){if(e.tag===13){var t=zr(e),n=fr(e,t);if(n!==null){var r=Bt();On(n,e,t,r)}Nf(e,t)}};bg=function(){return Te};Pg=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};bu=function(e,t,n){switch(t){case"input":if(Tu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Ua(r);if(!o)throw Error(O(90));ag(r),Tu(r,o)}}}break;case"textarea":ug(e,n);break;case"select":t=n.value,t!=null&&Bo(e,!!n.multiple,t,!1)}};yg=kf;Sg=co;var Av={usingClientEntryPoint:!1,Events:[$s,jo,Ua,hg,gg,kf]},Ui={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Iv={bundleType:Ui.bundleType,version:Ui.version,rendererPackageName:Ui.rendererPackageName,rendererConfig:Ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wg(e),e===null?null:e.stateNode},findFiberByHostInstance:Ui.findFiberByHostInstance||Tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{Oa=kl.inject(Iv),Qn=kl}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Av;pn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pf(t))throw Error(O(200));return Ev(e,t,null,n)};pn.createRoot=function(e,t){if(!Pf(e))throw Error(O(299));var n=!1,r="",o=qy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=_f(e,1,!1,null,null,n,!1,r,o),e[dr]=t.current,Es(e.nodeType===8?e.parentNode:e),new bf(t)};pn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=wg(t),e=e===null?null:e.stateNode,e};pn.flushSync=function(e){return co(e)};pn.hydrate=function(e,t,n){if(!Xa(t))throw Error(O(200));return Ya(null,e,t,!0,n)};pn.hydrateRoot=function(e,t,n){if(!Pf(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",l=qy;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Zy(t,null,e,1,n??null,o,!1,i,l),e[dr]=t.current,Es(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Ga(t)};pn.render=function(e,t,n){if(!Xa(t))throw Error(O(200));return Ya(null,e,t,!1,n)};pn.unmountComponentAtNode=function(e){if(!Xa(e))throw Error(O(40));return e._reactRootContainer?(co(function(){Ya(null,null,e,!1,function(){e._reactRootContainer=null,e[dr]=null})}),!0):!1};pn.unstable_batchedUpdates=kf;pn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xa(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return Ya(e,t,n,!1,r)};pn.version="18.3.1-next-f1338f8080-20240426";function e0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e0)}catch(e){console.error(e)}}e0(),eg.exports=pn;var Cv=eg.exports,t0,Nm=Cv;t0=Nm.createRoot,Nm.hydrateRoot;const _v="modulepreload",Nv=function(e){return"/"+e},bm={},jf=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(n.map(u=>{if(u=Nv(u),u in bm)return;bm[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":_v,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((h,y)=>{m.addEventListener("load",h),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})},a={bg:"#05070A",border:"#213043",muted:"#32435A",accent:"#39DDB6",text:"#EAF1F8",dim:"#8FA0B5",danger:"#FF5D7A",dLow:"#311520",warn:"#F7B267",wLow:"#322515",ok:"#39DDB6",purple:"#8F7BFF"},L={fontFamily:"'IBM Plex Mono','SFMono-Regular',Menlo,Monaco,monospace"},De=(e,t=4)=>parseFloat(e||0).toFixed(t),Hs=e=>e?`${e.slice(0,18)}...${e.slice(-6)}`:"",bv=/^[qpzry9x8gf2tvdw0s3jn54khce6mua7l]+$/i,n0=["kaspa","kaspatest","kaspadev","kaspasim"],Ps=(e,t=n0)=>{const n=String(e||"").trim().toLowerCase(),r=n.indexOf(":");if(r<=0||r===n.length-1)return!1;const o=n.slice(0,r),i=n.slice(r+1);return!t.map(l=>l.toLowerCase()).includes(o)||i.length<61||i.length>63?!1:bv.test(i)},Pv=(e,t=n0)=>{const n=String(e||"").trim();if(!Ps(n,t))throw new Error(`Invalid Kaspa address for allowed prefixes: ${t.join(", ")}`);const r=n.toLowerCase(),o=r.indexOf(":"),i=r.slice(0,o),l=r.slice(o+1);return`${i}:${l}`},jv=e=>{const t=String(e||"").toLowerCase();return t==="mainnet"?"kaspa":t.startsWith("testnet")?"kaspatest":t.startsWith("devnet")?"kaspadev":t.startsWith("simnet")?"kaspasim":"kaspa"},is=(e,t)=>{const n=Pv(e),r=n.indexOf(":"),o=n.slice(r+1);return`${jv(t)}:${o}`},Rv={USD:1,EUR:.92,GBP:.79,JPY:150,CAD:1.36};function Lv(e,t){const n=Rv[t];return e*n}function Ov(e,t){const n=Lv(e,t),r=2;return new Intl.NumberFormat("en-US",{style:"currency",currency:t,maximumFractionDigits:r,minimumFractionDigits:r}).format(n)}const ae={agents:"forgeos.session.agents.v2",activeAgent:"forgeos.session.activeAgent.v2",walletMeta:"forgeos.wallet.meta.v2",network:"forgeos.network",lastProvider:"forgeos.wallet.lastProvider.mainnet",autoLockMinutes:"forgeos.autolock.minutes.v1",persistUnlockSession:"forgeos.unlock.persist-session.v1",displayCurrency:"forgeos.display.currency.v1",hidePortfolioBalances:"forgeos.privacy.hide-balances.v1",kaspaRpcProviderPresetMap:"forgeos.kaspa.rpc-provider.v1",customKaspaRpcMap:"forgeos.kaspa.custom-rpc.v1",kaspaRpcPoolOverrideMap:"forgeos.kaspa.rpc-pool-overrides.v1",localNodeEnabled:"forgeos.local-node.enabled.v1",localNodeNetworkProfile:"forgeos.local-node.network-profile.v1",localNodeDataDir:"forgeos.local-node.data-dir.v1"},Dv=1,Mv=24*60,Pm=-1,cd="official";function r0(e){if(e===Pm)return Pm;if(typeof e!="number"||!Number.isFinite(e))return 15;const t=Math.floor(e);return Math.min(Mv,Math.max(Dv,t))}function $e(){return typeof chrome<"u"&&chrome.storage?chrome.storage.local:null}function Rf(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;try{const n=new URL(t);return n.protocol!=="https:"&&n.protocol!=="http:"?null:t.replace(/\/+$/,"")}catch{return null}}function zv(e){if(typeof e!="object"||e===null)return{};const t={};for(const[n,r]of Object.entries(e)){const o=String(n||"").trim();if(!o)continue;const i=Rf(r);i&&(t[o]=i)}return t}function o0(e){if(!Array.isArray(e))return[];const t=[];for(const n of e){const r=Rf(n);r&&(t.includes(r)||t.push(r))}return t}function i0(e){return e==="local"?"local":e==="igra"?"igra":e==="kasplex"?"kasplex":e==="custom"?"custom":cd}function s0(e){const t=String(e||"").trim().toLowerCase().replace(/_/g,"-");return t==="testnet-10"||t==="tn10"?"testnet-10":t==="testnet-11"||t==="tn11"?"testnet-11":t==="testnet-12"||t==="tn12"?"testnet-12":"mainnet"}function Uv(e){if(typeof e!="object"||e===null)return{};const t={};for(const[n,r]of Object.entries(e)){const o=String(n||"").trim();o&&(t[o]=i0(r))}return t}function Bv(e){if(typeof e!="object"||e===null)return{};const t={};for(const[n,r]of Object.entries(e)){const o=String(n||"").trim();if(!o||typeof r!="object"||r===null)continue;const i=r,l={};for(const c of["official","igra","kasplex"]){const u=o0(i[c]);u.length>0&&(l[c]=u)}(l.official||l.igra||l.kasplex)&&(t[o]=l)}return t}async function Fv(){const e=$e();return e?new Promise(t=>{e.get(ae.agents,n=>{try{const r=n[ae.agents];if(!r)return t([]);const o=typeof r=="string"?JSON.parse(r):r;t(Array.isArray(o)?o:[])}catch{t([])}})}):[]}async function jm(){const e=$e();return e?new Promise(t=>{e.get(ae.walletMeta,n=>{try{const r=n[ae.walletMeta];if(!r)return t(null);const o=typeof r=="string"?JSON.parse(r):r;t(o!=null&&o.address?o:null)}catch{t(null)}})}):null}async function ud(e){const t=$e();if(t)return new Promise(n=>{t.set({[ae.walletMeta]:JSON.stringify(e)},n)})}async function wa(){const e=$e();return e?new Promise(t=>{e.get(ae.network,n=>t(n[ae.network]||"mainnet"))}):"mainnet"}async function $v(e){const t=$e();if(t)return new Promise(n=>{t.set({[ae.network]:e},n)})}async function Kv(){const e=$e();return e?new Promise(t=>{e.get(ae.autoLockMinutes,n=>{t(r0(n[ae.autoLockMinutes]))})}):15}async function Hv(e){const t=$e();if(t)return new Promise(n=>{t.set({[ae.autoLockMinutes]:r0(e)},n)})}async function Wv(){const e=$e();return e?new Promise(t=>{e.get(ae.persistUnlockSession,n=>{t(n[ae.persistUnlockSession]===!0)})}):!1}async function Vv(e){const t=$e();if(t)return new Promise(n=>{t.set({[ae.persistUnlockSession]:e===!0},n)})}async function Gv(){const e=$e();return e?new Promise(t=>{e.get(ae.hidePortfolioBalances,n=>{t(n[ae.hidePortfolioBalances]===!0)})}):!1}async function Xv(e){const t=$e();if(t)return new Promise(n=>{t.set({[ae.hidePortfolioBalances]:e===!0},n)})}async function l0(){const e=$e();return e?new Promise(t=>{e.get(ae.kaspaRpcProviderPresetMap,n=>{try{const r=n[ae.kaspaRpcProviderPresetMap],o=typeof r=="string"?JSON.parse(r):r;t(Uv(o))}catch{t({})}})}):{}}async function a0(e){const t=String(e||"").trim();return t?(await l0())[t]??cd:cd}async function xr(e,t){const n=$e();if(!n)return;const r=String(e||"").trim();if(!r)return;const o=await l0();return o[r]=i0(t),new Promise(i=>{n.set({[ae.kaspaRpcProviderPresetMap]:JSON.stringify(o)},i)})}async function c0(){const e=$e();return e?new Promise(t=>{e.get(ae.customKaspaRpcMap,n=>{try{const r=n[ae.customKaspaRpcMap],o=typeof r=="string"?JSON.parse(r):r;t(zv(o))}catch{t({})}})}):{}}async function u0(e){const t=String(e||"").trim();return t?(await c0())[t]??null:null}async function Rm(e,t){const n=$e();if(!n)return;const r=String(e||"").trim();if(!r)return;const o=await c0();if(t===null||t.trim()==="")delete o[r];else{const i=Rf(t);if(!i)throw new Error("INVALID_RPC_ENDPOINT");o[r]=i}return new Promise(i=>{n.set({[ae.customKaspaRpcMap]:JSON.stringify(o)},i)})}async function d0(){const e=$e();return e?new Promise(t=>{e.get(ae.kaspaRpcPoolOverrideMap,n=>{try{const r=n[ae.kaspaRpcPoolOverrideMap],o=typeof r=="string"?JSON.parse(r):r;t(Bv(o))}catch{t({})}})}):{}}async function Vo(e,t){var o,i;const n=String(e||"").trim();if(!n)return[];const r=await d0();return(o=r[n])!=null&&o[t]?[...((i=r[n])==null?void 0:i[t])||[]]:[]}async function Lm(e,t,n){const r=$e();if(!r)return;const o=String(e||"").trim();if(!o)return;const i=await d0(),l=i[o]?{...i[o]}:{},c=o0(n);return c.length>0?l[t]=c:delete l[t],!l.official&&!l.igra&&!l.kasplex?delete i[o]:i[o]=l,new Promise(u=>{r.set({[ae.kaspaRpcPoolOverrideMap]:JSON.stringify(i)},u)})}async function f0(){const e=$e();return e?new Promise(t=>{e.get(ae.localNodeEnabled,n=>{t(n[ae.localNodeEnabled]===!0)})}):!1}async function Bi(e){const t=$e();if(t)return new Promise(n=>{t.set({[ae.localNodeEnabled]:e===!0},n)})}async function p0(){const e=$e();return e?new Promise(t=>{e.get(ae.localNodeNetworkProfile,n=>{t(s0(n[ae.localNodeNetworkProfile]))})}):"mainnet"}async function Gc(e){const t=$e();if(!t)return;const n=s0(e);return new Promise(r=>{t.set({[ae.localNodeNetworkProfile]:n},r)})}async function Yv(){const e=$e();return e?new Promise(t=>{e.get(ae.localNodeDataDir,n=>{const r=n[ae.localNodeDataDir];t(typeof r=="string"&&r.trim()?r.trim():null)})}):null}async function Om(e){const t=$e();if(!t)return;const n=typeof e=="string"&&e.trim()?e.trim():"";return new Promise(r=>{if(!n){t.remove(ae.localNodeDataDir,r);return}t.set({[ae.localNodeDataDir]:n},r)})}const dd="forgeos.connected.sites.v1";function m0(){return chrome.storage.local}async function Qv(){return new Promise(e=>{m0().get(dd,t=>{const n=t==null?void 0:t[dd];n&&typeof n=="object"&&!Array.isArray(n)?e(n):e({})})})}async function Jv(e,t){if(!e)return;const n=await Qv();return n[e]=t,new Promise(r=>{m0().set({[dd]:n},r)})}var jh;const Xc=((jh=import.meta)==null?void 0:jh.env)??{},Dm="http://127.0.0.1:19725",Zv=1500,h0=15e3,qv=8e3;function Lf(){return String((Xc==null?void 0:Xc.VITE_LOCAL_NODE_CONTROL_URL)??Dm).trim().replace(/\/+$/,"")||Dm}function ew(){return Lf()}async function yi(e,t={},n=Zv){const r=new AbortController,o=setTimeout(()=>r.abort(),n);try{const i=await fetch(`${Lf()}${e}`,{...t,signal:r.signal,headers:{"Content-Type":"application/json",...t.headers||{}}}),l=await i.json().catch(()=>({}));if(!i.ok)throw new Error(typeof(l==null?void 0:l.error)=="string"?l.error:`Local node control error (${i.status})`);return l}catch(i){throw i instanceof Error&&i.name==="AbortError"?new Error("Local node control timeout"):i}finally{clearTimeout(o)}}async function g0(){try{return await yi("/node/status")}catch{return null}}async function Yc(e){return yi("/node/start",{method:"POST",body:JSON.stringify({networkProfile:e.networkProfile,dataDir:e.dataDir??null})},h0)}async function tw(){return yi("/node/stop",{method:"POST"},qv)}async function nw(e){return yi("/node/restart",{method:"POST",body:JSON.stringify({networkProfile:(e==null?void 0:e.networkProfile)??null,dataDir:(e==null?void 0:e.dataDir)??null})},h0)}async function Mm(e=80){try{const t=Math.min(400,Math.max(1,Math.floor(e))),n=await yi(`/node/logs?lines=${t}`);return typeof n.logs=="string"?n.logs:""}catch{return""}}async function rw(){try{return await yi("/metrics")}catch{return null}}function ow(e){const t=typeof(e==null?void 0:e.data)=="string"?e.data:"";if(!t)return{type:"unknown",at:Date.now(),payload:{}};try{const n=JSON.parse(t);if(n&&typeof n=="object"&&typeof n.type=="string")return n}catch{}return{type:"unknown",at:Date.now(),payload:{raw:t}}}function iw(e){if(typeof EventSource>"u")return()=>{};const t=new EventSource(`${Lf()}/events`);t.onopen=()=>{e({type:"connected",at:Date.now(),payload:{message:"Local node event stream connected."}})};const n=o=>{e(ow(o))},r=()=>{e({type:"stream_error",at:Date.now(),payload:{message:"Local node event stream disconnected."}})};return t.addEventListener("status",n),t.addEventListener("lifecycle",n),t.addEventListener("heartbeat",n),t.addEventListener("error",n),t.onerror=r,()=>{t.removeEventListener("status",n),t.removeEventListener("lifecycle",n),t.removeEventListener("heartbeat",n),t.removeEventListener("error",n),t.close()}}function sw(e){const t=[...new Set((e.remotePool||[]).filter(Boolean))],n=Ea(e.targetNetwork),r=Ea(e.localNodeProfile||""),o=e.requireLocalSynced!==!1,i=e.localNodeSynced!==!1;if(!!(e.localNodeEnabled&&e.localNodeHealthy&&(!o||i)&&e.localRpcEndpoint&&n&&r&&n===r)){const u=String(e.localRpcEndpoint).trim(),d=t.filter(f=>f!==u);return{pool:[u,...d],source:"local",reason:"local_node_enabled_and_healthy"}}const c=e.localNodeEnabled?e.localNodeHealthy?o&&!i?"local_node_syncing":n!==r?"local_profile_mismatch":"local_endpoint_missing":"local_node_unhealthy":"local_node_disabled";return{pool:t,source:"remote",reason:c}}function Ea(e){const t=String(e||"").trim().toLowerCase().replace(/_/g,"-");return t?t==="mainnet"||t==="main"?"mainnet":t==="testnet-10"||t==="tn10"?"testnet-10":t==="testnet-11"||t==="tn11"?"testnet-11":t==="testnet-12"||t==="tn12"?"testnet-12":t==="testnet"?"testnet-10":t:""}const Al={mainnet:["https://api.kaspa.org"],"testnet-10":["https://api-tn10.kaspa.org"],"testnet-11":["https://api-tn11.kaspa.org"],"testnet-12":["https://api-tn12.kaspa.org"]};function vn(e,t){var o,i;const n=(i=(o=import.meta)==null?void 0:o.env)==null?void 0:i[e];if(typeof n!="string"||!n.trim())return t;const r=n.split(/[,\s]+/).map(l=>l.trim()).filter(Boolean).filter((l,c,u)=>u.indexOf(l)===c);return r.length?r:t}const Xn={mainnet:vn("VITE_KASPA_MAINNET_API_ENDPOINTS",Al.mainnet),"testnet-10":vn("VITE_KASPA_TN10_API_ENDPOINTS",Al["testnet-10"]),"testnet-11":vn("VITE_KASPA_TN11_API_ENDPOINTS",Al["testnet-11"]),"testnet-12":vn("VITE_KASPA_TN12_API_ENDPOINTS",Al["testnet-12"])},lw={mainnet:vn("VITE_KASPA_IGRA_MAINNET_API_ENDPOINTS",[]),"testnet-10":vn("VITE_KASPA_IGRA_TN10_API_ENDPOINTS",[]),"testnet-11":vn("VITE_KASPA_IGRA_TN11_API_ENDPOINTS",[]),"testnet-12":vn("VITE_KASPA_IGRA_TN12_API_ENDPOINTS",[])},aw={mainnet:vn("VITE_KASPA_KASPLEX_MAINNET_API_ENDPOINTS",[]),"testnet-10":vn("VITE_KASPA_KASPLEX_TN10_API_ENDPOINTS",[]),"testnet-11":vn("VITE_KASPA_KASPLEX_TN11_API_ENDPOINTS",[]),"testnet-12":vn("VITE_KASPA_KASPLEX_TN12_API_ENDPOINTS",[])};Xn.mainnet[0],Xn["testnet-10"][0],Xn["testnet-11"][0],Xn["testnet-12"][0];const cw=12e3,uw=2,dw=600,fw=3e3;var Rh,Lh;const pw=String(((Lh=(Rh=import.meta)==null?void 0:Rh.env)==null?void 0:Lh.VITE_LOCAL_NODE_REQUIRE_SYNC_FOR_SELECTION)??"true").trim().toLowerCase()!=="false";function y0(e){return e===408||e===429||e>=500}const mw=4,hw=3e4,ss={},ls={};let zm=!1,fd=null;const pd="forgeos.rpc.health.v1";async function gw(){if(!zm){zm=!0;try{const e=await chrome.storage.session.get(pd),t=e==null?void 0:e[pd];if(t&&typeof t=="object")for(const[n,r]of Object.entries(t))typeof r=="object"&&r!==null&&(ls[n]=r)}catch{}}}function S0(){chrome.storage.session.set({[pd]:ls}).catch(()=>{})}function js(e){return ls[e]||(ls[e]={lastOkAt:0,lastFailAt:0,consecutiveFails:0,lastLatencyMs:0,lastStatus:0,lastError:""}),ls[e]}function yw(e,t,n=200){const r=js(e);r.lastOkAt=Date.now(),r.consecutiveFails=0,r.lastLatencyMs=t,r.lastStatus=n,r.lastError="",S0()}function Um(e,t,n=0){const r=js(e);r.lastFailAt=Date.now(),r.consecutiveFails+=1,r.lastStatus=n,r.lastError=t,S0()}function Ta(e){ss[e]||(ss[e]={state:"closed",failures:0,openAt:0});const t=ss[e];return t.state==="open"&&Date.now()-t.openAt>hw&&(t.state="half-open"),t}function Sw(e){const t=ss[e];t&&(t.failures=0,t.state="closed")}function xw(e){const t=ss[e];t&&(t.failures++,t.failures>=mw&&(t.state="open",t.openAt=Date.now()))}function x0(e){return[...new Set((e||[]).filter(Boolean))].map(n=>{const r=Ta(n),o=js(n);return{base:n,circuit:r.state,failures:r.failures,lastOkAt:o.lastOkAt,lastFailAt:o.lastFailAt,consecutiveFails:o.consecutiveFails,lastLatencyMs:o.lastLatencyMs,lastStatus:o.lastStatus,lastError:o.lastError}})}function vw(e){const t=n=>{const r=Xn[n]??Xn.mainnet;return x0(r)};return e?t(e):{mainnet:t("mainnet"),"testnet-10":t("testnet-10"),"testnet-11":t("testnet-11"),"testnet-12":t("testnet-12")}}function Fi(e){return[...e].sort((n,r)=>{const o=Ta(n),i=Ta(r);if(o.state==="open"&&i.state!=="open")return 1;if(i.state==="open"&&o.state!=="open")return-1;const l=js(n),c=js(r);return l.lastOkAt!==c.lastOkAt?c.lastOkAt-l.lastOkAt:l.consecutiveFails!==c.consecutiveFails?l.consecutiveFails-c.consecutiveFails:0})}function ww(e){return e==="testnet-10"?"TN10":e==="testnet-11"?"TN11":e==="testnet-12"?"TN12":"MAINNET"}function v0(e,t){const n=Xn[e]??Xn.mainnet;if(t==="local")return n;if(t==="igra"){const r=lw[e]??[];return r.length?r:n}if(t==="kasplex"){const r=aw[e]??[];return r.length?r:n}return n}function Ew(e,t,n=null,r){var h,y,E;const o=Ea(e)||"mainnet",i=[...r!=null&&r.official&&r.official.length>0?r.official:Xn[o]??Xn.mainnet];let l=[...v0(o,t)];t==="official"&&((h=r==null?void 0:r.official)!=null&&h.length)?l=[...r.official]:t==="igra"&&((y=r==null?void 0:r.igra)!=null&&y.length)?l=[...r.igra]:t==="kasplex"&&((E=r==null?void 0:r.kasplex)!=null&&E.length)&&(l=[...r.kasplex]);const c=String(n||"").trim(),u=ww(o);let d=[];t==="igra"?d=[`VITE_KASPA_IGRA_${u}_API_ENDPOINTS`]:t==="kasplex"?d=[`VITE_KASPA_KASPLEX_${u}_API_ENDPOINTS`]:t==="local"?d=["VITE_LOCAL_NODE_CONTROL_URL"]:t==="custom"&&(d=["(custom endpoint saved in extension storage)"]);let f=[...l];t==="custom"&&c&&(f=[c,...i.filter(w=>w!==c)]);const m=!!((t==="igra"||t==="kasplex")&&l.length>0&&i.length>0&&l.every(w=>i.includes(w)))||t==="custom"&&!c;return{network:o,preset:t,officialPool:i,providerPool:l,effectivePool:f,usesOfficialFallback:m,requiredEnvKeys:d}}const Rs=new Map,Tw=5e3;function w0(e){e?Rs.delete(e):Rs.clear(),fd=null}async function kw(){const e=fd;if(e&&Date.now()<e.expiresAt)return e.value;const t=await g0();return fd={value:t,expiresAt:Date.now()+fw},t}async function Of(e){var E,w,k,p,g,S;await gw();const t=Rs.get(e);if(t&&Date.now()<t.expiresAt)return t.pool;let n="official";try{n=await a0(e)}catch{n="official"}const[r,o,i]=await Promise.all([Vo(e,"official").catch(()=>[]),Vo(e,"igra").catch(()=>[]),Vo(e,"kasplex").catch(()=>[])]),l=n==="official"&&r.length>0?[...r]:n==="igra"&&o.length>0?[...o]:n==="kasplex"&&i.length>0?[...i]:[...v0(e,n)];let c;if(n!=="custom")c=Fi(l);else{let v=null;try{v=await u0(e)}catch{v=null}if(v){const C=l.filter(_=>_!==v);c=Fi([v,...C])}else c=Fi(l)}let u=!1,d="mainnet";try{[u,d]=await Promise.all([f0(),p0()])}catch{u=!1}const f=await kw(),m=!!(f!=null&&f.ok&&((E=f==null?void 0:f.status)!=null&&E.running)&&((w=f==null?void 0:f.status)!=null&&w.rpcHealthy)&&((k=f==null?void 0:f.status)!=null&&k.rpcBaseUrl)),h=!!((g=(p=f==null?void 0:f.status)==null?void 0:p.sync)!=null&&g.synced),y=sw({targetNetwork:e,remotePool:c,localNodeEnabled:u,localNodeHealthy:m,localNodeSynced:h,requireLocalSynced:pw,localNodeProfile:d,localRpcEndpoint:((S=f==null?void 0:f.status)==null?void 0:S.rpcBaseUrl)??null});if(y.source==="local"&&y.pool.length>0){const[v,...C]=y.pool;c=[v,...Fi(C)]}else c=Fi(y.pool);return Rs.set(e,{pool:c,source:y.source,reason:y.reason,expiresAt:Date.now()+Tw}),c}async function Aw(e="mainnet"){const t=Ea(e)||"mainnet",n=await Of(t),r=Rs.get(t);return{network:t,source:(r==null?void 0:r.source)??"remote",reason:(r==null?void 0:r.reason)??"unknown",activeEndpoint:n[0]??null,pool:[...n]}}async function E0(e,t,n){if(Ta(e).state==="open")throw new Nr(`Circuit open for ${e}  backing off`,503);let o=null;for(let i=0;i<=uw;i++){i>0&&await new Promise(d=>setTimeout(d,dw*2**(i-1)));const l=new AbortController,c=setTimeout(()=>l.abort(),cw),u=Date.now();try{const d=await fetch(`${e}${t}`,{...n,signal:l.signal});if(clearTimeout(c),!d.ok){const m=await d.text().catch(()=>"");throw Um(e,`HTTP ${d.status}`,d.status),new Nr(`HTTP ${d.status}: ${m.slice(0,120)}`,d.status)}const f=await d.json();return Sw(e),yw(e,Date.now()-u,d.status),f}catch(d){if(clearTimeout(c),d instanceof Nr&&!y0(d.status))throw d;const f=d instanceof Error?d.message:String(d);Um(e,f),o=d instanceof Error?d:new Error(String(d))}}throw xw(e),o??new Nr("Unknown API error",0)}async function go(e,t,n){const r=await Of(e);let o=null;for(const i of r)try{return await E0(i,t,n)}catch(l){if(l instanceof Nr&&!y0(l.status))throw l;o=l instanceof Error?l:new Error(String(l))}throw o??new Nr("Unknown API error",0)}class Nr extends Error{constructor(t,n){super(t),this.status=n,this.name="KaspaApiError"}}const T0={mainnet:10,"testnet-10":10,"testnet-11":32,"testnet-12":10};async function Iw(e,t="mainnet"){return go(t,`/addresses/${encodeURIComponent(e)}/utxos`)}async function Cw(e,t="mainnet"){const n=await go(t,`/addresses/${encodeURIComponent(e)}/balance`);return BigInt((n==null?void 0:n.balance)??0)}async function _w(e="mainnet"){try{const t=await go(e,"/info/price?stringOnly=false");return(t==null?void 0:t.price)??0}catch{return 0}}async function Nw(e="mainnet"){var t;try{const n=await go(e,"/info/fee-estimate");return((t=n==null?void 0:n.priorityBucket)==null?void 0:t.feerate)??1}catch{return 1}}async function Ls(e,t,n="mainnet"){const r=await Nw(n),o=239+142*e+51*t;return BigInt(Math.max(Math.ceil(o*r),1e3))}async function bw(e,t="mainnet"){const n=await go(t,"/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=(n==null?void 0:n.transactionId)??(n==null?void 0:n.txid)??"";if(!r)throw new Nr("Broadcast succeeded but no txId returned",200);return r}async function Pw(e,t="mainnet"){try{return await go(t,`/transactions/${e}`)}catch(n){if(n instanceof Nr&&n.status===404)return null;throw n}}async function k0(e="mainnet"){try{return await go(e,"/info/blockdag")}catch{return null}}async function jw(e="mainnet"){const t=await Of(e);return await Promise.all(t.map(async n=>{try{await E0(n,"/info/blockdag")}catch{}})),x0(t)}async function Rw(e,t="mainnet"){const n=await Cw(e,t);return Number(n)/1e8}async function A0(e="mainnet"){return _w(e)}const Ut=Object.freeze({path:"m/44'/111'",account:0,chain:0,index:0}),Df=Object.freeze(["m/44'/111'","m/44'/972'"]);function Bm(e,t){const n=typeof e=="number"?e:Number(e);return!Number.isFinite(n)||n<0?t:Math.floor(n)}function Lw(e){const t=String(e??"").trim();return t?t.startsWith("m")?t:`m/${t}`:Ut.path}function Qt(e){return{path:Lw(e==null?void 0:e.path),account:Bm(e==null?void 0:e.account,Ut.account),chain:(e==null?void 0:e.chain)===1?1:0,index:Bm(e==null?void 0:e.index,Ut.index)}}function bn(e){const t=Qt(e);return`${t.path}/${t.account}'/${t.chain}/${t.index}`}function Mf(e){return e===1?"change":"receive"}function Ow(e){const n=String(e||"").trim().match(/^(m(?:\/\d+'?)*)\/(\d+)'\s*\/([01])\s*\/(\d+)$/i);if(!n)throw new Error("Invalid derivation path. Expected format like m/44'/111'/0'/0/0");return Qt({path:n[1],account:Number(n[2]),chain:Number(n[3]),index:Number(n[4])})}const Dw=6e5,Mw=["encrypt","decrypt"];async function zw(e,t){const n=new TextEncoder,r=await crypto.subtle.importKey("raw",n.encode(e),{name:"PBKDF2"},!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:Dw,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,Mw)}function Fm(e){return crypto.getRandomValues(new Uint8Array(e))}const I0={memoryMB:64,iterations:3,parallelism:4,hashLength:32};async function C0(e,t,n=I0){const{argon2id:r}=await jf(async()=>{const{argon2id:l}=await import("../../index.esm.js");return{argon2id:l}},[]),o=await r({password:e,salt:t,memorySize:n.memoryMB*1024,iterations:n.iterations,parallelism:n.parallelism,hashLength:n.hashLength,outputType:"hex"}),i=new Uint8Array(o.match(/.{2}/g).map(l=>parseInt(l,16)));return crypto.subtle.importKey("raw",i,{name:"AES-GCM"},!1,["encrypt","decrypt"])}function Qc(e){if(e.length%2!==0)throw new Error("Invalid hex string length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n>>1]=parseInt(e.slice(n,n+2),16);return t}function Jc(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}async function Uw(e,t,n){const r=await crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,n);return new Uint8Array(r)}async function Bw(e,t,n){const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,n);return new Uint8Array(r)}const md="forgeos.vault.v1",ka="forgeos.vault.session-cache.v1",zf=-1,Uf=15;let en=null,Uo=null;function _0(e){return(Uo==null?void 0:Uo.address)===e?Uo.keyHex:null}function hd(e,t){Uo={address:e,keyHex:t}}function N0(e){return!Number.isFinite(e)||e<=0?Number.POSITIVE_INFINITY:Date.now()+e*6e4}function Fw(e){return Number.isFinite(e)?e:zf}function $w(e){return e===zf?Number.POSITIVE_INFINITY:typeof e!="number"||!Number.isFinite(e)?null:e}function Aa(e){try{if(!Number.isFinite(e)||e<=0){chrome.runtime.sendMessage({type:"CANCEL_AUTOLOCK"});return}chrome.runtime.sendMessage({type:"SCHEDULE_AUTOLOCK",minutes:e})}catch{}}function $r(){return en?Date.now()>en.autoLockAt?(Qa(),Si(),null):en:null}function Qa(){if(en){try{en.mnemonic=""}catch{}en=null}Uo=null}function Bf(){return chrome.storage.local}function Ff(){var t;return((t=chrome.storage)==null?void 0:t.session)??null}async function $f(){return new Promise(e=>{Bf().get(md,t=>{try{const n=t[md];if(!n)return e(null);e(JSON.parse(n))}catch{e(null)}})})}async function Kw(e){return new Promise(t=>{Bf().set({[md]:JSON.stringify(e)},t)})}async function Kf(e){const t=Ff();if(t)return new Promise(n=>{t.set({[ka]:{version:1,mnemonic:e.mnemonic,mnemonicPassphrase:e.mnemonicPassphrase,derivation:e.derivation,address:e.address,network:e.network,autoLockAt:Fw(e.autoLockAt)}},n)})}async function Si(){const e=Ff();if(e)return new Promise(t=>{e.remove(ka,t)})}async function Hw(){const e=Ff();return e?new Promise(t=>{e.get(ka,n=>{const r=n==null?void 0:n[ka];if(!r||typeof r!="object"){t(null);return}const o=$w(r.autoLockAt);if(o===null){t(null);return}const i=typeof r.mnemonic=="string"?r.mnemonic:"",l=typeof r.address=="string"?r.address:"",c=typeof r.network=="string"?r.network:"";if(!i||!l||!c){t(null);return}t({mnemonic:i,mnemonicPassphrase:typeof r.mnemonicPassphrase=="string"?r.mnemonicPassphrase:void 0,derivation:Qt(r.derivation??Ut),address:l,network:c,autoLockAt:o})})}):null}async function b0(){return await $f()!==null}async function Os(e,t,n,r,o={}){var E;const i=Fm(32),l=Fm(12),c=I0,u=await C0(t,i,c),d=Qt(o.derivation??Ut),f={version:1,mnemonic:e,mnemonicPassphrase:o.mnemonicPassphrase||void 0,derivation:d,address:n,network:r,derivationPath:`${d.path}/${d.account}'`,addressIndex:d.index},m=new TextEncoder().encode(JSON.stringify(f)),h=await Uw(u,l,m),y={version:2,kdf:"argon2id",argon:c,salt:Jc(i),iv:Jc(l),ciphertext:Jc(h),createdAt:((E=await $f())==null?void 0:E.createdAt)??Date.now(),updatedAt:Date.now()};await Kw(y)}async function uo(e,t=Uf,n={}){const r=await $f();if(!r)throw new Error("NO_VAULT");const o=Qc(r.salt),i=Qc(r.iv),l=Qc(r.ciphertext);let c;r.version===2&&r.kdf==="argon2id"?c=await C0(e,o,r.argon):c=await zw(e,o);let u;try{u=await Bw(c,i,l)}catch{throw new Error("INVALID_PASSWORD")}const d=JSON.parse(new TextDecoder().decode(u));return en={mnemonic:d.mnemonic,mnemonicPassphrase:typeof d.mnemonicPassphrase=="string"?d.mnemonicPassphrase:void 0,derivation:Qt(d.derivation??{path:"m/44'/111'",account:0,chain:0,index:typeof d.addressIndex=="number"?d.addressIndex:0}),address:d.address,network:d.network,autoLockAt:N0(t)},Aa(t),n.persistSession?await Kf(en):await Si(),r.version!==2&&Os(d.mnemonic,e,d.address,d.network,{mnemonicPassphrase:d.mnemonicPassphrase,derivation:d.derivation}).catch(()=>{}),en}async function P0(){const e=await Hw();if(!e)return null;if(Date.now()>e.autoLockAt)return await Si(),null;if(en=e,Number.isFinite(e.autoLockAt)){const t=Math.max(0,(e.autoLockAt-Date.now())/6e4);Aa(t)}else Aa(zf);return en}async function gd(e){if(!e){await Si();return}const t=$r();t&&await Kf(t)}function j0(){Qa(),Si();try{chrome.runtime.sendMessage({type:"CANCEL_AUTOLOCK"})}catch{}}async function R0(e,t){if(t.length<8)throw new Error("WEAK_PASSWORD");const n=await uo(e);await Os(n.mnemonic,t,n.address,n.network,{mnemonicPassphrase:n.mnemonicPassphrase,derivation:n.derivation}),Qa(),await uo(t)}async function L0(){Qa(),await Si(),await new Promise(e=>Bf().clear(e))}function Yi(e=Uf,t={}){en&&(en.autoLockAt=N0(e),Aa(e),t.persistSession&&Kf(en))}const Ww=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_AUTO_LOCK_MINUTES:Uf,changePassword:R0,createVault:Os,extendSession:Yi,getCachedPrivKey:_0,getSession:$r,lockWallet:j0,resetWallet:L0,restoreSessionFromCache:P0,setCachedPrivKey:hd,setSessionPersistence:gd,unlockVault:uo,vaultExists:b0},Symbol.toStringTag,{value:"Module"})),Vw="/kaspa_wasm_bg.wasm";let Il=null,Cl=null;function Gw(e){var t,n,r,o;return e!=null&&e.Mnemonic?e:(t=e==null?void 0:e.default)!=null&&t.Mnemonic?e.default:(n=e==null?void 0:e.k)!=null&&n.Mnemonic?e.k:(o=(r=e==null?void 0:e.k)==null?void 0:r.default)!=null&&o.Mnemonic?e.k.default:e}async function Xw(){globalThis.__forgeosKaspaWasmBytes||(Cl||(Cl=(async()=>{const e=await fetch(Vw);if(!e.ok)throw new Error(`WASM_FETCH_FAILED: ${e.status} ${e.statusText}`);const t=await e.arrayBuffer();globalThis.__forgeosKaspaWasmBytes=new Uint8Array(t)})().catch(e=>{throw Cl=null,e})),await Cl)}async function Ja(){return Il||(Il=(async()=>{try{await Xw();const e=await jf(()=>import("../../kaspa_wasm.js").then(r=>r.k),[]),t=Gw(e),n=t.default||t.init;if(typeof n=="function")try{await n()}catch{}return t}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`KASPA_WASM_INIT_FAILED: ${t}`)}})().catch(e=>{throw Il=null,e})),Il}var Oh;const $i=((Oh=import.meta)==null?void 0:Oh.env)??{};function Yw(e){return e==="mainnet"?$i.VITE_KAS_WS_URL_MAINNET||$i.VITE_KAS_WS_URL||"wss://api.kaspa.org/ws":e==="testnet-10"?$i.VITE_KAS_WS_URL_TESTNET||"wss://api-tn10.kaspa.org/ws":e==="testnet-11"?$i.VITE_KAS_WS_URL_TESTNET||"wss://api-tn11.kaspa.org/ws":$i.VITE_KAS_WS_URL||"wss://api.kaspa.org/ws"}let Rn=null,yd=null,li="disconnected",Go=null,Yl=5e3;const Ao=new Map,Sd=new Set,xd=new Set;function Io(e){li=e}function $m(e){Go||(Go=setTimeout(async()=>{Go=null,await O0(e).catch(()=>{})},Yl),Yl=Math.min(Yl*2,6e4))}function Qw(){Yl=5e3}async function Jw(){var t,n;if(!Rn||li!=="connected")return;const e=Rn;try{await((t=e.subscribeVirtualDaaScoreChanged)==null?void 0:t.call(e))}catch{}for(const r of xd)try{await((n=e.subscribeUtxosChanged)==null?void 0:n.call(e,{addresses:[r]}))}catch{}}async function O0(e){if(!(yd===e&&(li==="connected"||li==="connecting"))){Rn&&await D0(),Io("connecting"),yd=e;try{const n=(await Ja()).RpcClient;if(!n){Io("error");return}const r=Yw(e),o=new n({url:r});Rn=o;const i=o;typeof i.addEventListener=="function"&&(i.addEventListener("connect",()=>{Io("connected"),Qw(),Jw().catch(()=>{})}),i.addEventListener("disconnect",()=>{Io("disconnected"),$m(e)}),i.addEventListener("utxos-changed",l=>{var d;const c=l,u=new Set;for(const f of[...(c==null?void 0:c.added)??[],...(c==null?void 0:c.removed)??[]]){const m=(d=f==null?void 0:f.address)==null?void 0:d.payload;m&&u.add(m)}for(const f of u){w0();const m=Ao.get(f);if(m)for(const h of m)h()}}),i.addEventListener("virtual-daa-score-changed",l=>{const c=l==null?void 0:l.virtualDaaScore;if(c!==void 0)for(const u of Sd)u(c)})),typeof i.connect=="function"&&await i.connect()}catch{Io("error"),$m(e)}}}async function D0(){if(Go&&(clearTimeout(Go),Go=null),Rn){const e=Rn;try{typeof e.disconnect=="function"&&await e.disconnect()}catch{}Rn=null}yd=null,Io("disconnected")}function Zw(e,t){var n;if(!Ao.has(e)&&(Ao.set(e,new Set),xd.add(e),Rn&&li==="connected")){const r=Rn;(n=r.subscribeUtxosChanged)==null||n.call(r,{addresses:[e]}).catch(()=>{})}return Ao.get(e).add(t),()=>{var o;const r=Ao.get(e);if(r&&(r.delete(t),r.size===0&&(Ao.delete(e),xd.delete(e),Rn&&li==="connected"))){const i=Rn;(o=i.unsubscribeUtxosChanged)==null||o.call(i,{addresses:[e]}).catch(()=>{})}}}function qw(e){return Sd.add(e),()=>{Sd.delete(e)}}const vd="forgeos.pending.txs.v1",eE=7*24*60*60*1e3;let Yn=[],Km=!1;function M0(e){return["CONFIRMED","FAILED","CANCELLED"].includes(e.state)}async function z0(){return new Promise(e=>{const t=Yn.map(rE);chrome.storage.local.set({[vd]:JSON.stringify(t)},e)})}async function Za(){return Km?Yn:(Km=!0,new Promise(e=>{chrome.storage.local.get(vd,t=>{try{const n=t[vd];if(!n){e([]);return}const r=JSON.parse(n).map(oE),o=Date.now()-eE;Yn=r.filter(i=>!(M0(i)&&i.builtAt<o))}catch{Yn=[]}e(Yn)})}))}async function tE(e){await Za(),Yn.push(e),await z0()}async function fo(e){await Za();const t=Yn.findIndex(n=>n.id===e.id);t>=0?Yn[t]=e:Yn.push(e),await z0()}async function nE(e){return await Za(),Yn.filter(t=>t.fromAddress.toLowerCase()===e.toLowerCase()&&!M0(t))}async function U0(e){const t=await nE(e),n=new Set;for(const r of t)for(const o of r.inputs)n.add(`${o.txId}:${o.outputIndex}`);return n}function rE(e){return{...e,fee:e.fee.toString(),changeOutput:e.changeOutput?{...e.changeOutput,amount:e.changeOutput.amount.toString()}:null,outputs:e.outputs.map(t=>({...t,amount:t.amount.toString()})),inputs:e.inputs.map(t=>({...t,amount:t.amount.toString(),blockDaaScore:t.blockDaaScore.toString()}))}}function oE(e){return{...e,fee:BigInt(e.fee),changeOutput:e.changeOutput?{...e.changeOutput,amount:BigInt(e.changeOutput.amount)}:null,outputs:e.outputs.map(t=>({...t,amount:BigInt(t.amount)})),inputs:e.inputs.map(t=>({...t,amount:BigInt(t.amount),blockDaaScore:BigInt(t.blockDaaScore),scriptClass:t.scriptClass==="covenant"?"covenant":"standard"}))}}const iE=3e4,Hf=new Map;function sE(e){return String(e||"").trim().toLowerCase()}function lE(e,t){if(e!==0)return!1;const n=sE(t);return/^20[0-9a-f]{64}ac$/.test(n)}function aE(e,t){return lE(e,t)?"standard":"covenant"}function cE(e){const t=Hf.get(e.toLowerCase());return!t||Date.now()-t.lastSyncAt>iE?null:t}function uE(e){Hf.delete(e.toLowerCase())}function dE(e){const t=e.utxoEntry.scriptPublicKey.version,n=e.utxoEntry.scriptPublicKey.scriptPublicKey;return{txId:e.outpoint.transactionId,outputIndex:e.outpoint.index,address:e.address,amount:BigInt(e.utxoEntry.amount),scriptPublicKey:n,scriptVersion:t,scriptClass:aE(t,n),blockDaaScore:BigInt(e.utxoEntry.blockDaaScore),isCoinbase:e.utxoEntry.isCoinbase}}async function Wf(e,t,n=new Set,r=0n){const i=(await Iw(e,t)).map(dE),l=i.reduce((u,d)=>u+d.amount,0n),c={address:e.toLowerCase(),utxos:i,confirmedBalance:l,pendingOutbound:r,lastSyncAt:Date.now()};return Hf.set(e.toLowerCase(),c),c}async function Vf(e,t,n,r){const o=cE(e);return o||Wf(e,t,n,r)}function Ia(e,t,n,r=new Set){const o=e.filter(d=>!r.has(`${d.txId}:${d.outputIndex}`)),i=o.filter(d=>(d.scriptClass??"standard")==="standard").sort((d,f)=>f.amount>d.amount?1:f.amount<d.amount?-1:0),l=t+n;let c=0n;const u=[];for(const d of i)if(u.push(d),c+=d.amount,c>=l)break;if(c<l)throw o.reduce((f,m)=>f+m.amount,0n)>=l?new Error("COVENANT_ONLY_FUNDS"):new Error("INSUFFICIENT_FUNDS");return{selected:u,total:c}}function to(e){return Number(e)/1e8}function B0(e){return BigInt(Math.floor(e*1e8))}const fE=1e3,pE=5*6e4;async function F0(e,t="mainnet"){const n=await Aw(t);try{const r=await Pw(e,t);return{txId:e,network:t,checkedAt:Date.now(),confirmed:!!(r!=null&&r.acceptingBlockHash),acceptingBlockHash:(r==null?void 0:r.acceptingBlockHash)??null,backend:n,error:null}}catch(r){return{txId:e,network:t,checkedAt:Date.now(),confirmed:!1,acceptingBlockHash:null,backend:n,error:r instanceof Error?r.message:String(r)}}}function mE(e,t){return{...e,receiptCheckedAt:t.checkedAt,receiptSourceBackend:t.backend.source,receiptSourceReason:t.backend.reason,receiptSourceEndpoint:t.backend.activeEndpoint,acceptingBlockHash:t.acceptingBlockHash}}async function $0(e,t={}){if(!e.txId)throw new Error("NO_TXID: cannot reconcile receipt without txId");const n=Math.max(1e3,Math.floor(t.timeoutMs??pE)),r=Math.max(250,Math.floor(t.pollIntervalMs??fE)),o=Date.now()+n;let i=0,l={...e,state:"CONFIRMING"};for(;Date.now()<o;){await hE(r);const c=await F0(e.txId,e.network);if(i+=1,t.onProbe&&await t.onProbe(c),l=mE(l,c),l={...l,receiptProbeAttempts:i},c.confirmed)return{...l,state:"CONFIRMED",confirmations:1,confirmedAt:c.checkedAt,signedTxPayload:void 0}}return{...l,state:"FAILED",error:"CONFIRM_TIMEOUT: transaction not confirmed within timeout window"}}function hE(e){return new Promise(t=>setTimeout(t,e))}const gE=1e3,yE=5*6e4;async function SE(e){if(e.txId)return console.info(`[broadcast] tx ${e.id} already has txId=${e.txId}; skipping re-broadcast`),{...e,state:"CONFIRMING"};if(!e.signedTxPayload)throw new Error("NOT_SIGNED");let t;try{t=JSON.parse(e.signedTxPayload)}catch{throw new Error("BROADCAST_FAILED: signedTxPayload is not valid JSON")}let n;try{n=await bw(t,e.network)}catch(o){const i=o instanceof Error?o.message:String(o),l={...e,state:"FAILED",error:`BROADCAST_FAILED: ${i}`};throw await fo(l),new Error(`BROADCAST_FAILED: ${i}`)}const r={...e,state:"BROADCASTING",txId:n,broadcastAt:Date.now(),signedTxPayload:void 0};return await fo(r),uE(e.fromAddress),{...r,state:"CONFIRMING"}}async function xE(e,t=()=>{}){if(!e.txId)throw new Error("NO_TXID: cannot poll without txId");let n=0;const r=await $0({...e,state:"CONFIRMING"},{timeoutMs:yE,pollIntervalMs:gE,onProbe:async o=>{n+=1;const i={...e,state:"CONFIRMING",receiptCheckedAt:o.checkedAt,receiptProbeAttempts:n,receiptSourceBackend:o.backend.source,receiptSourceReason:o.backend.reason,receiptSourceEndpoint:o.backend.activeEndpoint,acceptingBlockHash:o.acceptingBlockHash};await fo(i),t(i)}});if(await fo(r),t(r),r.state==="FAILED")throw new Error(r.error||"CONFIRM_TIMEOUT");return r}var Dh;const Ce=((Dh=import.meta)==null?void 0:Dh.env)??{};function Hm(e,t){const n=Ce==null?void 0:Ce[e];return typeof n!="string"?t:n.trim().toLowerCase()==="true"?!0:n.trim().toLowerCase()==="false"?!1:t}function Ki(e,t,n,r){const o=Ce==null?void 0:Ce[e],i=Number(o);return Number.isFinite(i)?Math.min(r,Math.max(n,Math.floor(i))):t}function vE(e,t){const n=String((Ce==null?void 0:Ce[e])??"").trim();if(!n)return t;const r=n.split(/[,\s]+/).map(i=>Number(i)).filter(i=>Number.isInteger(i)&&i>0),o=[...new Set(r)];return o.length?o:t}function wE(e,t){const n=String((Ce==null?void 0:Ce[e])??"").trim().toLowerCase();return n==="kaspa_native"||n==="evm_0x"||n==="blocked"?n:t}const fe={enabled:Hm("VITE_SWAP_ENABLED",!0),routeSource:wE("VITE_SWAP_ROUTE_SOURCE","kaspa_native"),maxSlippageBps:Ki("VITE_SWAP_MAX_SLIPPAGE_BPS",500,1,2e3),defaultSlippageBps:Ki("VITE_SWAP_DEFAULT_SLIPPAGE_BPS",50,1,2e3),dexEndpoint:String((Ce==null?void 0:Ce.VITE_SWAP_DEX_ENDPOINT)??"").trim()||null,evmChainIdAllowlist:vE("VITE_SWAP_EVM_CHAIN_IDS",[1]),requireExternalEvmSigner:Hm("VITE_SWAP_REQUIRE_EXTERNAL_EVM_SIGNER",!0),zeroExQuoteEndpoint:String((Ce==null?void 0:Ce.VITE_SWAP_ZEROX_QUOTE_ENDPOINT)??"https://api.0x.org/swap/allowance-holder/quote").trim()||null,zeroExApiKey:String((Ce==null?void 0:Ce.VITE_SWAP_ZEROX_API_KEY)??"").trim(),zeroExExpectedSettlerTo:String((Ce==null?void 0:Ce.VITE_SWAP_ZEROX_EXPECTED_SETTLER_TO)??"").trim(),zeroExExpectedAllowanceSpender:String((Ce==null?void 0:Ce.VITE_SWAP_ZEROX_EXPECTED_ALLOWANCE_SPENDER)??"").trim(),settlementRequiredConfirmations:Ki("VITE_SWAP_SETTLEMENT_CONFIRMATIONS",2,1,128),settlementPollIntervalMs:Ki("VITE_SWAP_SETTLEMENT_POLL_MS",4e3,500,6e4),settlementTimeoutMs:Ki("VITE_SWAP_SETTLEMENT_TIMEOUT_MS",24e4,15e3,36e5)},Wm=!0,EE=!0,K0={tokens:{KAS:{id:"KAS",symbol:"KAS",name:"Kaspa",decimals:8,assetId:null,enabled:!0,disabledReason:null},USDT:{id:"USDT",symbol:"USDT",name:"Tether USD",decimals:6,assetId:null,enabled:Wm,disabledReason:null},USDC:{id:"USDC",symbol:"USDC",name:"USD Coin",decimals:6,assetId:null,enabled:Wm,disabledReason:null},ZRX:{id:"ZRX",symbol:"0x",name:"0x Protocol",decimals:18,assetId:null,enabled:EE,disabledReason:null}}};function Vm(e){var t;return((t=K0.tokens[e])==null?void 0:t.enabled)??!1}function H0(){return Object.values(K0.tokens)}function Eo(e){switch(e){case"kaspa_native":return"Kaspa Native";case"evm_0x":return"0x EVM";case"blocked":default:return"Blocked"}}function Gm(e,t){return e==="KAS"||t==="KAS"}function TE(e,t){return e==="ZRX"||t==="ZRX"}function Gf(e,t,n=fe.routeSource,r={}){const o=r.allowHybridAuto!==!1;return n==="blocked"?{source:n,label:Eo(n),allowed:!1,reason:"Swap routes are currently disabled on Kaspa.",requiresEvmSigner:!1}:n==="kaspa_native"?o&&!Gm(e,t)?{source:"evm_0x",label:Eo("evm_0x"),allowed:!0,reason:null,requiresEvmSigner:!0}:TE(e,t)?{source:n,label:Eo(n),allowed:!1,reason:"0x routes are EVM-domain only and cannot bridge directly with native KAS.",requiresEvmSigner:!1}:{source:n,label:Eo(n),allowed:!0,reason:null,requiresEvmSigner:!1}:Gm(e,t)?{source:n,label:Eo(n),allowed:!1,reason:"0x routes are EVM-domain only and cannot use native Kaspa balances directly.",requiresEvmSigner:!0}:{source:n,label:Eo(n),allowed:!0,reason:null,requiresEvmSigner:!0}}function Xm(e){return e.trim().toLowerCase()}function kE(e,t){return!e||!t?!1:Xm(e)===Xm(t)}const Xf="forgeos.swap.evm.sidecar.v1";function AE(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function W0(e){if(typeof e!="string")return"";const t=e.trim();return/^0x[a-fA-F0-9]{40}$/.test(t)?t:""}function qa(e){if(typeof e=="number"&&Number.isInteger(e)&&e>0)return e;if(typeof e=="string"){const t=e.trim().toLowerCase();if(!t)return 0;if(t.startsWith("0x")){const r=Number.parseInt(t.slice(2),16);return Number.isInteger(r)&&r>0?r:0}const n=Number(t);return Number.isInteger(n)&&n>0?n:0}return 0}function Yf(){return typeof window<"u"&&typeof window.localStorage<"u"}function V0(e){const t=e;if(!t)return null;const n=W0(t.address),r=qa(t.chainId),o=t.walletType==="metamask"?"metamask":null,i=typeof t.connectedAt=="number"&&Number.isFinite(t.connectedAt)?t.connectedAt:0,l=typeof t.updatedAt=="number"&&Number.isFinite(t.updatedAt)?t.updatedAt:i;return!o||!n||r<=0?null:{walletType:o,address:n,chainId:r,connectedAt:i||Date.now(),updatedAt:l||Date.now()}}function wd(){if(!Yf())return null;const e=AE(window.localStorage.getItem(Xf));return V0(e)}function IE(e){const t=Date.now(),n=V0({...e,connectedAt:e.connectedAt??t,updatedAt:e.updatedAt??t});if(!n)throw new Error("EVM_SIDECAR_INVALID_SESSION");return Yf()&&window.localStorage.setItem(Xf,JSON.stringify(n)),n}function CE(){Yf()&&window.localStorage.removeItem(Xf)}function G0(e){return fe.evmChainIdAllowlist.includes(e)}function ec(){const e=globalThis==null?void 0:globalThis.ethereum;return e&&typeof e.request=="function"?e:null}async function _E(){const e=ec();if(!e)throw new Error("EVM_SIDECAR_UNAVAILABLE: No injected EVM provider found.");const t=await e.request({method:"eth_requestAccounts"}),n=Array.isArray(t)?t:[],r=W0(n[0]);if(!r)throw new Error("EVM_SIDECAR_CONNECT_FAILED: No EVM account returned.");const o=await e.request({method:"eth_chainId"}),i=qa(o);if(i<=0)throw new Error("EVM_SIDECAR_CHAIN_INVALID: Could not determine chain ID.");if(!G0(i))throw new Error(`EVM_SIDECAR_CHAIN_NOT_ALLOWED: chainId ${i} not allowed.`);return IE({walletType:"metamask",address:r,chainId:i})}async function NE(e){const t=ec();if(!t)throw new Error("EVM_SIDECAR_UNAVAILABLE: No injected EVM provider found.");const n=await t.request({method:"eth_sendTransaction",params:[e]});if(typeof n!="string"||!n.startsWith("0x"))throw new Error("EVM_TX_HASH_INVALID");return n}async function bE(e){const t=ec();if(!t)return null;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]});return!n||typeof n!="object"?null:n}async function PE(){const e=ec();if(!e)return null;const t=await e.request({method:"eth_blockNumber"}),n=qa(t);return n>0?n:null}function jE(e){const t=e.status;if(typeof t=="number")return t===1?"success":"revert";if(typeof t=="string"){const n=t.trim().toLowerCase();if(n==="0x1"||n==="1")return"success";if(n==="0x0"||n==="0")return"revert"}return"unknown"}function RE(e){return qa(e.blockNumber)}function _l(e){return e.trim().toLowerCase()}const LE={1:{USDC:"0xA0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",USDT:"0xdAC17F958D2ee523a2206206994597C13D831ec7",ZRX:"0xE41d2489571d322189246DaFA5ebDe1F4699F498"}};function Ym(e,t){if(e==="KAS")return null;const r=(LE[t]??{})[e];return typeof r=="string"&&r?r:null}function OE(e,t,n){const r=Ym(e.tokenIn,t.chainId),o=Ym(e.tokenOut,t.chainId);if(!r||!o)throw new Error("ZEROX_TOKEN_UNSUPPORTED: token pair is not mapped for selected EVM chain.");return{endpoint:n.endpoint,apiKey:n.apiKey,expectedSettlerTo:n.expectedSettlerTo,expectedAllowanceSpender:n.expectedAllowanceSpender,slippageBps:e.slippageBps,sellTokenAddress:r,buyTokenAddress:o,sellAmount:e.amountIn.toString()}}async function DE(e,t,n){var d;const r=new URLSearchParams({sellToken:e.sellTokenAddress,buyToken:e.buyTokenAddress,sellAmount:e.sellAmount,slippageBps:String(e.slippageBps)}),o=`${e.endpoint}?${r.toString()}`,i={Accept:"application/json","Content-Type":"application/json"};e.apiKey&&(i["0x-api-key"]=e.apiKey);const l=await fetch(o,{method:"GET",headers:i}),c=await l.json().catch(()=>({}));if(!l.ok){const f=typeof(c==null?void 0:c.reason)=="string"?c.reason:`HTTP ${l.status}`;throw new Error(`ZEROX_QUOTE_FAILED: ${f}`)}const u=ME(c,{allowedChainIds:t,expectedChainId:n,expectedSettlerTo:e.expectedSettlerTo,expectedAllowanceSpender:e.expectedAllowanceSpender});if((d=c.issues)!=null&&d.simulationIncomplete&&u.push("ZEROX_SIMULATION_INCOMPLETE"),u.length>0)throw new Error(`ZEROX_POLICY_REJECTED: ${u.join(", ")}`);return c}function ME(e,t){var i,l,c;const n=[],r=Number(e.chainId??0);(!Number.isFinite(r)||!t.allowedChainIds.includes(r))&&n.push("ZEROX_CHAIN_NOT_ALLOWED"),t.expectedChainId&&r!==t.expectedChainId&&n.push("ZEROX_CHAIN_SESSION_MISMATCH"),e.liquidityAvailable||n.push("ZEROX_NO_LIQUIDITY");const o=typeof((i=e.transaction)==null?void 0:i.to)=="string"?e.transaction.to:"";if((!o||_l(o)!==_l(t.expectedSettlerTo))&&n.push("ZEROX_SETTLER_MISMATCH"),t.expectedAllowanceSpender){const u=typeof((c=(l=e.issues)==null?void 0:l.allowance)==null?void 0:c.spender)=="string"?e.issues.allowance.spender:"";(!u||_l(u)!==_l(t.expectedAllowanceSpender))&&n.push("ZEROX_ALLOWANCE_SPENDER_MISMATCH")}return(!e.minBuyAmount||!/^\d+$/.test(String(e.minBuyAmount)))&&n.push("ZEROX_MIN_BUY_AMOUNT_INVALID"),n}var Mh;const Xo=((Mh=import.meta)==null?void 0:Mh.env)??{},zE=12e3,UE="/quote",BE="/execute",FE="/status";function $E(e,t,n,r){const o=Number(Xo==null?void 0:Xo[e]);return Number.isFinite(o)?Math.min(r,Math.max(n,Math.floor(o))):t}function Qf(e,t){return String((Xo==null?void 0:Xo[e])??"").trim()||t}const KE=$E("VITE_SWAP_KASPA_NATIVE_TIMEOUT_MS",zE,1e3,6e4),HE=Qf("VITE_SWAP_KASPA_NATIVE_QUOTE_PATH",UE),WE=Qf("VITE_SWAP_KASPA_NATIVE_EXECUTE_PATH",BE),VE=Qf("VITE_SWAP_KASPA_NATIVE_STATUS_PATH",FE);function X0(e){return String(e||"").trim().replace(/\/+$/,"")}function GE(e){const t=String(e||"").trim();return t?t.startsWith("/")?t:`/${t}`:"/"}function Jf(e,t){const n=X0(e);if(!n)throw new Error("KASPA_NATIVE_ENDPOINT_MISSING");return`${n}${GE(t)}`}async function Zf(e,t){const n=new AbortController,r=setTimeout(()=>n.abort(),t.timeoutMs??KE);try{const o=await fetch(e,{method:t.method,headers:{"Content-Type":"application/json"},...t.body?{body:JSON.stringify(t.body)}:{},signal:n.signal}),i=await o.text().catch(()=>"");let l=null;if(i)try{l=JSON.parse(i)}catch{throw new Error(`KASPA_NATIVE_HTTP_${o.status}: invalid JSON response`)}if(!o.ok){const c=typeof(l==null?void 0:l.error)=="string"?l.error:`HTTP ${o.status}`;throw new Error(`KASPA_NATIVE_HTTP_${o.status}: ${c}`)}return{status:o.status,data:l}}catch(o){throw(o==null?void 0:o.name)==="AbortError"?new Error("KASPA_NATIVE_TIMEOUT: request timed out"):o instanceof Error?o:new Error(String(o))}finally{clearTimeout(r)}}function XE(e){return typeof e=="bigint"?e.toString():typeof e=="number"&&Number.isFinite(e)&&e>=0?String(Math.floor(e)):typeof e=="string"&&/^\d+$/.test(e.trim())?e.trim():""}function Qm(e,t){const n=XE(e);if(!n)throw new Error(`KASPA_NATIVE_QUOTE_INVALID: "${t}" must be an integer string`);const r=BigInt(n);if(r<0n)throw new Error(`KASPA_NATIVE_QUOTE_INVALID: "${t}" must be >= 0`);return r}function Ca(e){const t=typeof e=="number"?e:Number(e);return Number.isFinite(t)?t:null}function YE(e){const t=Ca(e.priceImpactBps);if(t!==null&&t>=0)return t/1e4;const n=Ca(e.priceImpact);if(n!==null&&n>=0&&n<=1)return n;throw new Error("KASPA_NATIVE_QUOTE_INVALID: missing price impact")}function QE(e){if(!Array.isArray(e))return[];const t=e.map(n=>String(n||"").trim()).filter(Boolean);return t.length?t:[]}function JE(e){return e==="mainnet"?"kaspa:":"kaspatest:"}function ZE(e,t){const n=String(e||"").trim().toLowerCase();if(!Ps(n))throw new Error("KASPA_NATIVE_QUOTE_INVALID: settlement address is invalid");const r=JE(t);if(!n.startsWith(r))throw new Error("KASPA_NATIVE_QUOTE_INVALID: settlement address network mismatch")}function qE(e,t,n,r){const o=e??{},i=typeof o.quoteId=="string"?o.quoteId.trim():"";if(!i)throw new Error("KASPA_NATIVE_QUOTE_INVALID: missing quoteId");const l=typeof o.settlementAddress=="string"?o.settlementAddress.trim():"";if(!l)throw new Error("KASPA_NATIVE_QUOTE_INVALID: missing settlementAddress");ZE(l,r);const c=Qm(o.minAmountOut??o.amountOut,"amountOut"),u=Qm(o.feeAmount??o.fee??"0","feeAmount"),d=YE(o),f=QE(o.route),m=Ca(o.validUntil);if(m===null||m<=Date.now())throw new Error("KASPA_NATIVE_QUOTE_INVALID: quote is missing or expired");if(f.length===0)throw new Error("KASPA_NATIVE_QUOTE_INVALID: missing route");return{tokenIn:t.tokenIn,tokenOut:t.tokenOut,amountIn:t.amountIn,amountOut:c,priceImpact:d,fee:u,route:f,validUntil:m,dexEndpoint:n,routeSource:"kaspa_native",rawQuote:{...o,quoteId:i,settlementAddress:l,network:r}}}function eT(e){const t=e.rawQuote??{},n=typeof t.quoteId=="string"?t.quoteId.trim():"",r=typeof t.settlementAddress=="string"?t.settlementAddress.trim():"";if(!n||!r)throw new Error("KASPA_NATIVE_QUOTE_META_INVALID");return{quoteId:n,settlementAddress:r}}async function tT(e,t){const n=Jf(t.endpoint,HE),r={tokenIn:e.tokenIn,tokenOut:e.tokenOut,amountIn:e.amountIn.toString(),slippageBps:e.slippageBps,network:t.network,walletAddress:t.walletAddress};e.customTokenOut&&(r.tokenOutAddress=e.customTokenOut.address,r.tokenOutStandard=e.customTokenOut.standard,r.tokenOutSymbol=e.customTokenOut.symbol,r.tokenOutName=e.customTokenOut.name,r.tokenOutDecimals=e.customTokenOut.decimals);const{data:o}=await Zf(n,{method:"POST",body:r});return qE(o,e,X0(t.endpoint),t.network)}async function nT(e){const t=Jf(e.endpoint,WE),n={quoteId:e.quoteId,network:e.network,depositTxId:e.depositTxId,walletAddress:e.walletAddress,amountIn:e.amountIn.toString()},{data:r}=await Zf(t,{method:"POST",body:n}),o=r??{};if(o.accepted===!1)throw new Error(typeof o.error=="string"?o.error:"KASPA_NATIVE_EXECUTION_REJECTED");const i=typeof o.state=="string"?o.state.toLowerCase().trim():"";if(["failed","rejected","error"].includes(i))throw new Error(typeof o.error=="string"?o.error:`KASPA_NATIVE_EXECUTION_${i.toUpperCase()}`)}function rT(e){const t=e.toLowerCase().trim();return["confirmed","completed","success","settled"].includes(t)?"confirmed":["failed","reverted","rejected","expired","error"].includes(t)?"failed":"pending"}async function oT(e){const t=Jf(e.endpoint,VE),n=new URLSearchParams({quoteId:e.quoteId,depositTxId:e.depositTxId,network:e.network}),r=`${t}?${n.toString()}`;try{const{status:o,data:i}=await Zf(r,{method:"GET"});if(o===404)return{state:"pending",confirmations:0,error:null,settlementTxId:null};const l=i??{},c=String(l.state??l.status??"pending"),u=rT(c),d=Math.max(0,Math.floor(Ca(l.confirmations)??0)),f=typeof l.error=="string"?l.error:null,m=typeof l.settlementTxId=="string"?l.settlementTxId:typeof l.txId=="string"?l.txId:null;return{state:u,confirmations:d,error:f,settlementTxId:m}}catch(o){if(String((o==null?void 0:o.message)||"").includes("HTTP 404"))return{state:"pending",confirmations:0,error:null,settlementTxId:null};throw o}}const iT={REQUESTED:["QUOTED","FAILED_TIMEOUT"],QUOTED:["SIGNED","FAILED_TIMEOUT","FAILED_BRIDGE"],SIGNED:["SUBMITTED","FAILED_TIMEOUT","FAILED_BRIDGE"],SUBMITTED:["SUBMITTED","PENDING_CONFIRMATION","CONFIRMED","FAILED_REVERT","FAILED_TIMEOUT"],PENDING_CONFIRMATION:["PENDING_CONFIRMATION","CONFIRMED","FAILED_REVERT","FAILED_TIMEOUT","FAILED_BRIDGE"],CONFIRMED:[],FAILED_REVERT:[],FAILED_TIMEOUT:[],FAILED_BRIDGE:[]};function Y0(e,t,n="mainnet",r=Date.now()){return{id:e,routeSource:t,state:"REQUESTED",network:n,createdAt:r,updatedAt:r,txHash:null,bridgeTransferId:null,confirmations:0,error:null}}function bt(e,t,n={},r=Date.now()){if(!iT[e.state].includes(t))throw new Error(`INVALID_SETTLEMENT_TRANSITION: ${e.state} -> ${t}`);return{...e,...n,state:t,updatedAt:r}}const Ed="forgeos.swap.settlements.v1",Q0=200;function J0(){return chrome.storage.local}async function sT(){return new Promise(e=>{J0().get(Ed,t=>e((t==null?void 0:t[Ed])??null))})}async function lT(e){return new Promise(t=>{J0().set({[Ed]:e},t)})}function aT(e){return["REQUESTED","QUOTED","SIGNED","SUBMITTED","PENDING_CONFIRMATION","CONFIRMED","FAILED_REVERT","FAILED_TIMEOUT","FAILED_BRIDGE"].includes(String(e))}function cT(e){const t=e;if(!t)return null;const n=typeof t.id=="string"?t.id:"",r=typeof t.routeSource=="string"?t.routeSource:"",o=t.state;return!n||!aT(o)||r!=="blocked"&&r!=="kaspa_native"&&r!=="evm_0x"?null:{id:n,routeSource:r,state:o,network:typeof t.network=="string"&&t.network?t.network:"mainnet",createdAt:typeof t.createdAt=="number"&&Number.isFinite(t.createdAt)?t.createdAt:Date.now(),updatedAt:typeof t.updatedAt=="number"&&Number.isFinite(t.updatedAt)?t.updatedAt:Date.now(),txHash:typeof t.txHash=="string"?t.txHash:null,bridgeTransferId:typeof t.bridgeTransferId=="string"?t.bridgeTransferId:null,confirmations:typeof t.confirmations=="number"&&Number.isFinite(t.confirmations)?t.confirmations:0,error:typeof t.error=="string"?t.error:null}}function uT(e){if(!Array.isArray(e))return[];const t=[];for(const n of e){const r=cT(n);r&&t.push(r)}return t.sort((n,r)=>r.updatedAt-n.updatedAt),t.slice(0,Q0)}async function as(){const e=await sT();return uT(e)}async function et(e){const t=await as(),n=[e,...t.filter(r=>r.id!==e.id)].sort((r,o)=>o.updatedAt-r.updatedAt).slice(0,Q0);await lT(n)}function qf(e){return e.state==="SUBMITTED"||e.state==="PENDING_CONFIRMATION"}var zh;const Zc=((zh=import.meta)==null?void 0:zh.env)??{};function ep(e,t,n,r){const o=Number(Zc==null?void 0:Zc[e]);return Number.isFinite(o)?Math.min(r,Math.max(n,Math.floor(o))):t}const dT=ep("VITE_EXT_TX_FEE_SAFETY_BPS",11500,1e4,3e4),Jm=BigInt(ep("VITE_EXT_TX_FEE_MIN_SOMPI",1e3,1,1e9)),Zm=BigInt(ep("VITE_EXT_TX_FEE_MAX_SOMPI",2e8,1e3,5e9));function _a(e){const t=(e*BigInt(dT)+9999n)/10000n;return t<Jm?Jm:t>Zm?Zm:t}const Na="kaspa:qpv7fcvdlz6th4hqjtm9qkkms2dw0raem963x3hm8glu3kjgj7922vy69hv85",fT=30,qm=100000n,eh=100000000n;function Z0(e){const t=e*BigInt(fT)/10000n;return t<qm?qm:t>eh?eh:t}const pT=Ja;async function mT(e,t,n,r){const o=B0(n);if(o<=0n)throw new Error("AMOUNT_TOO_SMALL");const i=Z0(o),l=o+(i??0n),c=i?3:2,u=await U0(e),d=await Vf(e,r),f=_a(await Ls(1,c,r)),{selected:m,total:h}=Ia(d.utxos,l,f,u),y=_a(await Ls(m.length,c,r));let E=m,w=h;if(h<l+y){const v=Ia(d.utxos,l,y,u);E=v.selected,w=v.total}const k=w-l-y;if(k<0n)throw new Error("INSUFFICIENT_FUNDS");const p=[{address:t,amount:o}];i&&Na&&p.push({address:Na,amount:i});const g=k>0n?{address:e,amount:k}:null;return{id:crypto.randomUUID(),state:"BUILDING",fromAddress:e,network:r,inputs:E,outputs:p,changeOutput:g,fee:y,platformFee:i??void 0,builtAt:Date.now()}}async function hT(e){const t=await pT(),n=t.UtxoEntry,r=e.inputs.map(d=>{const f={address:d.address,outpoint:{transactionId:d.txId,index:d.outputIndex},amount:d.amount,scriptPublicKey:{version:d.scriptVersion,scriptPublicKey:d.scriptPublicKey},blockDaaScore:d.blockDaaScore,isCoinbase:d.isCoinbase};if(n)try{return new n(f)}catch{return f}return f}),o=e.outputs.map(d=>({address:d.address,amount:d.amount}));e.opReturnHex&&o.push({value:0n,scriptPublicKey:{version:0,scriptPublicKey:`6a${e.opReturnHex}`}});const i={entries:r,outputs:o,changeAddress:e.fromAddress,priorityFee:{sompi:e.fee},networkId:e.network},l=t.Generator;if(!l)throw new Error("WASM_GENERATOR_UNAVAILABLE: kaspa-wasm Generator class not found. Ensure kaspa-wasm  0.13.0 is installed.");const u=new l(i).next();if(!u)throw new Error("GENERATOR_EMPTY: Generator produced no transaction. Check UTXO availability.");return u}async function gT(e,t,n,r={}){if(!t.length)throw new Error("BATCH_EMPTY: at least one recipient required");const o=t.map(v=>({address:v.address,amount:B0(v.amountKas)})),i=o.reduce((v,C)=>v+C.amount,0n);if(i<=0n)throw new Error("AMOUNT_TOO_SMALL");const l=Z0(i),c=i+(l??0n),u=o.length+1+(l?1:0)+(r.opReturnHex?1:0),d=await U0(e),f=await Vf(e,n),m=_a(await Ls(1,u,n)),{selected:h,total:y}=Ia(f.utxos,c,m,d),E=_a(await Ls(h.length,u,n));let w=h,k=y;if(k<c+E){const v=Ia(f.utxos,c,E,d);w=v.selected,k=v.total}const p=k-c-E;if(p<0n)throw new Error("INSUFFICIENT_FUNDS");const g=[...o];l&&Na&&g.push({address:Na,amount:l});const S=p>0n?{address:e,amount:p}:null;return{id:crypto.randomUUID(),state:"BUILDING",fromAddress:e,network:n,inputs:w,outputs:g,changeOutput:S,fee:E,platformFee:l??void 0,builtAt:Date.now(),agentJobId:r.agentJobId,opReturnHex:r.opReturnHex}}const yT={mainnet:"kaspa:","testnet-10":"kaspatest:","testnet-11":"kaspatest:","testnet-12":"kaspatest:"};async function ST(e){var u,d;const t=[];let n;try{const f=e.inputs.filter(h=>(h.scriptClass??"standard")==="covenant");f.length>0&&t.push(`COVENANT_INPUT_UNSUPPORTED: ${f.length} covenant UTXO(s) require covenant-aware spend logic`),n=await Wf(e.fromAddress,e.network);const m=new Set(n.utxos.map(h=>`${h.txId}:${h.outputIndex}`));for(const h of e.inputs){const y=`${h.txId}:${h.outputIndex}`;m.has(y)||t.push(`UTXO_SPENT: input ${y} no longer available`)}}catch{t.push("UTXO_FETCH_FAILED: could not verify input availability")}let r;try{r=await Ls(e.inputs.length,e.outputs.length+(e.changeOutput?1:0),e.network),e.fee<r&&t.push(`FEE_TOO_LOW: estimated ${e.fee.toString()} sompi, network requires ${r.toString()} sompi`)}catch{r=e.fee}const o=e.inputs.reduce((f,m)=>f+m.amount,0n),i=e.outputs.reduce((f,m)=>f+m.amount,0n),l=((u=e.changeOutput)==null?void 0:u.amount)??0n;o!==i+l+e.fee&&t.push(`BALANCE_MISMATCH: inputs=${o} != outputs=${i} + change=${l} + fee=${e.fee}`);for(const f of e.outputs)Ps(f.address)||t.push(`INVALID_ADDRESS: "${f.address}" is not a valid Kaspa address`);e.changeOutput&&!Ps(e.changeOutput.address)&&t.push(`INVALID_CHANGE_ADDRESS: "${e.changeOutput.address}"`);const c=yT[e.network];if(c){for(const f of e.outputs)f.address.toLowerCase().startsWith(c)||t.push(`NETWORK_MISMATCH: output address "${f.address}" does not match network "${e.network}"`);e.changeOutput&&!e.changeOutput.address.toLowerCase().startsWith(c)&&t.push(`NETWORK_MISMATCH: change address "${e.changeOutput.address}" does not match network "${e.network}"`)}return{valid:t.length===0,estimatedFee:r??e.fee,changeAmount:((d=e.changeOutput)==null?void 0:d.amount)??0n,errors:t}}const xT=Ja;async function vT(e){const t=$r();if(!t||!t.mnemonic)throw new Error("WALLET_LOCKED");const n=await xT(),{Mnemonic:r,XPrv:o,XPrivateKey:i}=n;let l=null;const c=n.PrivateKey;try{const u=_0(t.address);if(u&&c)l=new c(u);else{const h=Qt(t.derivation??Ut),E=new r(t.mnemonic).toSeed(t.mnemonicPassphrase||void 0),w=new o(E);let k=w;try{k=w.derivePath(h.path)}catch(C){if(h.path.startsWith("m/"))k=w.derivePath(h.path.slice(2));else throw C}const p=k.intoString("kprv"),g=new i(p,!1,BigInt(h.account)),S=h.chain===1?g.changeKey(h.index):g.receiveKey(h.index),v=S.toKeypair();if(l=v.privateKey??(typeof v.toPrivateKey=="function"?v.toPrivateKey():null),l){if(c){const C=typeof l.toString=="function"?l.toString("hex"):null;C&&hd(t.address,C)}}else{const C=typeof S.toString=="function"?S.toString("hex"):null;c&&C&&(l=new c(C),hd(t.address,C))}if(!l)throw new Error("PRIVKEY_UNAVAILABLE: Could not extract PrivateKey from keypair. Verify kaspa-wasm version compatibility.")}const d=await hT(e);await d.sign([l]);let f;typeof d.serializeToObject=="function"?f=JSON.stringify({transaction:d.serializeToObject()}):typeof d.toJSON=="function"?f=d.toJSON():f=JSON.stringify({transaction:d});const m=d.id;return{...e,state:"SIGNED",signedTxPayload:f,txId:m,signedAt:Date.now()}}catch(u){const d=u instanceof Error?u.message:String(u);throw new Error(`SIGN_FAILED: ${d}`)}finally{l=null}}var Uh;const Yo=((Uh=import.meta)==null?void 0:Uh.env)??{},Td="forgeos.execution.audit.v1",wT=["manual","swap","agent"],ET=["build","validate","sign","broadcast","reconcile"];function tp(e,t,n,r){const o=Number(Yo==null?void 0:Yo[e]);return Number.isFinite(o)?Math.min(r,Math.max(n,Math.floor(o))):t}function TT(e,t,n,r){const o=Number(Yo==null?void 0:Yo[e]);return Number.isFinite(o)?Math.min(r,Math.max(n,o)):t}const ba=tp("VITE_EXECUTION_AUDIT_MAX_EVENTS",600,50,5e3),kT=tp("VITE_EXECUTION_SLO_WINDOW_MS",6*60*60*1e3,6e4,7*24*60*60*1e3),AT=TT("VITE_EXECUTION_SLO_TARGET_PCT",99,50,100),IT=tp("VITE_EXECUTION_SLO_MIN_SAMPLES",25,1,2e4),CT=wT,_T=ET;function np(){var e;return typeof chrome>"u"||!((e=chrome==null?void 0:chrome.storage)!=null&&e.local)?null:chrome.storage.local}function th(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`evt_${Date.now()}_${Math.random().toString(36).slice(2,8)}`}function NT(e){if(!e||typeof e!="object")return null;const t=e,n=typeof t.id=="string"?t.id:"",r=typeof t.runId=="string"?t.runId:"",o=t.channel,i=t.stage,l=t.status;if(!n||!r||o!=="manual"&&o!=="swap"&&o!=="agent"||i!=="build"&&i!=="validate"&&i!=="sign"&&i!=="broadcast"&&i!=="reconcile"||l!=="ok"&&l!=="failed")return null;const c=Number(t.ts),u=typeof t.txState=="string"?t.txState:null;return{id:n,runId:r,channel:o,stage:i,status:l,ts:Number.isFinite(c)?c:Date.now(),network:typeof t.network=="string"?t.network:"mainnet",txId:typeof t.txId=="string"?t.txId:null,txState:u,backendSource:t.backendSource==="local"||t.backendSource==="remote"?t.backendSource:null,backendReason:typeof t.backendReason=="string"?t.backendReason:null,backendEndpoint:typeof t.backendEndpoint=="string"?t.backendEndpoint:null,error:typeof t.error=="string"?t.error:null,context:t.context&&typeof t.context=="object"?t.context:{}}}function nh(e){if(!Array.isArray(e))return[];const t=[];for(const n of e){const r=NT(n);r&&t.push(r)}return t.sort((n,r)=>r.ts-n.ts),t.slice(0,ba)}async function q0(){const e=np();return e?new Promise(t=>{e.get(Td,n=>{const r=n==null?void 0:n[Td];if(!r){t([]);return}if(typeof r=="string")try{t(nh(JSON.parse(r)));return}catch{t([]);return}t(nh(r))})}):[]}async function e1(e){const t=np();if(t)return new Promise(n=>{t.set({[Td]:e},n)})}async function bT(e){var i,l,c,u,d;const t={id:th(),runId:String(e.runId||"").trim()||`run_${th()}`,channel:e.channel,stage:e.stage,status:e.status,ts:Date.now(),network:String(e.network||"mainnet"),txId:((i=e.tx)==null?void 0:i.txId)??null,txState:((l=e.tx)==null?void 0:l.state)??null,backendSource:((c=e.tx)==null?void 0:c.receiptSourceBackend)??null,backendReason:((u=e.tx)==null?void 0:u.receiptSourceReason)??null,backendEndpoint:((d=e.tx)==null?void 0:d.receiptSourceEndpoint)??null,error:e.error?String(e.error):null,context:e.context?{...e.context}:{}};if(!np())return t;const r=await q0(),o=[t,...r].slice(0,ba);return await e1(o),t}async function PT(e=120){const t=await q0(),n=Number(e),r=Number.isFinite(n)?Math.max(1,Math.min(ba,Math.floor(n))):Math.min(ba,120);return t.slice(0,r)}async function jT(){await e1([])}function cs(e){const t=String(e||"run").toLowerCase().replace(/[^a-z0-9_-]/g,"")||"run";return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`${t}_${crypto.randomUUID()}`:`${t}_${Date.now()}_${Math.random().toString(36).slice(2,8)}`}function or(e=0,t=0){const n=e+t,r=n>0?e/n*100:100;return{total:n,ok:e,failed:t,successRatePct:r}}function RT(){return{manual:{ok:0,failed:0},swap:{ok:0,failed:0},agent:{ok:0,failed:0}}}function Nl(){return{build:{ok:0,failed:0},validate:{ok:0,failed:0},sign:{ok:0,failed:0},broadcast:{ok:0,failed:0},reconcile:{ok:0,failed:0}}}function LT(e){return{manual:or(e.manual.ok,e.manual.failed),swap:or(e.swap.ok,e.swap.failed),agent:or(e.agent.ok,e.agent.failed)}}function bl(e){return{build:or(e.build.ok,e.build.failed),validate:or(e.validate.ok,e.validate.failed),sign:or(e.sign.ok,e.sign.failed),broadcast:or(e.broadcast.ok,e.broadcast.failed),reconcile:or(e.reconcile.ok,e.reconcile.failed)}}function rh(e,t={}){const n=Number.isFinite(t.nowTs)?Number(t.nowTs):Date.now(),r=Number.isFinite(t.windowMs)?Math.max(6e4,Math.min(7*24*60*60*1e3,Math.floor(Number(t.windowMs)))):kT,o=n-r,i=Number.isFinite(t.sloTargetPct)?Math.max(50,Math.min(100,Number(t.sloTargetPct))):AT,l=Number.isFinite(t.sloMinSamples)?Math.max(1,Math.min(2e4,Math.floor(Number(t.sloMinSamples)))):IT,c=RT(),u=Nl(),d={manual:Nl(),swap:Nl(),agent:Nl()},f=new Set;let m=0,h=0;for(const C of e)!C||C.ts<o||C.ts>n||(f.add(C.runId),C.status==="ok"?(m+=1,c[C.channel].ok+=1,u[C.stage].ok+=1,d[C.channel][C.stage].ok+=1):(h+=1,c[C.channel].failed+=1,u[C.stage].failed+=1,d[C.channel][C.stage].failed+=1));const y=or(m,h),E=LT(c),w=bl(u),k={manual:bl(d.manual),swap:bl(d.swap),agent:bl(d.agent)},p=y.total,g=f.size,S=p>=l,v=S&&y.successRatePct>=i;return{nowTs:n,fromTs:o,windowMs:r,totalEvents:p,uniqueRuns:g,overall:y,byChannel:E,byStage:w,byChannelStage:k,sloTargetPct:i,sloMinSamples:l,sloEligible:S,sloMet:v}}class Kn extends Error{constructor(n,r,o=null,i=[]){super(r);ll(this,"stage");ll(this,"tx");ll(this,"details");this.name="DeterministicExecutionError",this.stage=n,this.tx=o,this.details=i}}const OT={buildTransaction:mT,buildBatchTransaction:gT,dryRunValidate:ST,signTransaction:vT,broadcastTransaction:SE,addPendingTx:tE,updatePendingTx:fo,waitForKaspaConfirmation:$0,appendExecutionTelemetryEvent:bT};function DT(e={}){const t={...OT,...e},n=async(u,d,f)=>{u&&await u({stage:d,tx:f})},r=async(u,d,f,m,h,y=null)=>{if(u)try{await t.appendExecutionTelemetryEvent({runId:u.runId||cs(u.channel),channel:u.channel,stage:d,status:f,network:m,tx:h,error:y,context:u.context})}catch{}},o=u=>u?typeof u=="function"?{onUpdate:u}:u:{},i=async(u,d)=>{const f=o(d),m=f.telemetry?{...f.telemetry,runId:f.telemetry.runId||cs(f.telemetry.channel)}:void 0;if(!u.recipients||u.recipients.length===0)throw await r(m,"build","failed",u.network,null,"INTENT_EMPTY: at least one recipient is required."),new Kn("build","INTENT_EMPTY: at least one recipient is required.");let h;try{if(u.recipients.length===1){const[w]=u.recipients;h=await t.buildTransaction(u.fromAddress,w.address,w.amountKas,u.network),(u.agentJobId||u.opReturnHex)&&(h={...h,agentJobId:u.agentJobId,opReturnHex:u.opReturnHex})}else h=await t.buildBatchTransaction(u.fromAddress,u.recipients,u.network,{agentJobId:u.agentJobId,opReturnHex:u.opReturnHex});await t.addPendingTx(h),await n(f.onUpdate,"build",h),await r(m,"build","ok",u.network,h,null)}catch(w){const k=w instanceof Error?w.message:String(w);throw await r(m,"build","failed",u.network,null,k),new Kn("build",k,null)}let y;try{y=await t.dryRunValidate(h)}catch(w){const k=w instanceof Error?w.message:String(w);throw await r(m,"validate","failed",u.network,h,k),new Kn("validate",k,h)}if(!y.valid){const w={...h,state:"DRY_RUN_FAIL",error:y.errors.join("; ")};throw await t.updatePendingTx(w),await r(m,"validate","failed",u.network,w,`KERNEL_DRY_RUN_FAILED: ${y.errors.join("; ")}`),new Kn("validate",`KERNEL_DRY_RUN_FAILED: ${y.errors.join("; ")}`,w,y.errors)}const E={...h,state:"DRY_RUN_OK",fee:y.estimatedFee};return await t.updatePendingTx(E),await n(f.onUpdate,"validate",E),await r(m,"validate","ok",u.network,E,null),E},l=async(u,d={})=>{const f=d.awaitConfirmation!==!1,m=d.telemetry?{...d.telemetry,runId:d.telemetry.runId||cs(d.telemetry.channel)}:void 0;let h;try{h=await t.signTransaction(u),await t.updatePendingTx(h),await n(d.onUpdate,"sign",h),await r(m,"sign","ok",u.network,h,null)}catch(E){const w=E instanceof Error?E.message:String(E);throw await r(m,"sign","failed",u.network,u,w),new Kn("sign",w,u)}let y;try{y=await t.broadcastTransaction(h),await t.updatePendingTx(y),await n(d.onUpdate,"broadcast",y),await r(m,"broadcast","ok",u.network,y,null)}catch(E){const w=E instanceof Error?E.message:String(E);throw await r(m,"broadcast","failed",u.network,h,w),new Kn("broadcast",w,h)}if(!f)return await r(m,"reconcile","ok",u.network,y,null),y;try{let E=0;const w=await t.waitForKaspaConfirmation(y,{timeoutMs:d.confirmTimeoutMs,pollIntervalMs:d.confirmPollIntervalMs,onProbe:async k=>{E+=1;const p={...y,receiptCheckedAt:k.checkedAt,receiptProbeAttempts:E,receiptSourceBackend:k.backend.source,receiptSourceReason:k.backend.reason,receiptSourceEndpoint:k.backend.activeEndpoint,acceptingBlockHash:k.acceptingBlockHash};await t.updatePendingTx(p),await n(d.onUpdate,"reconcile",p)}});if(await t.updatePendingTx(w),await n(d.onUpdate,"reconcile",w),w.state==="FAILED")throw await r(m,"reconcile","failed",u.network,w,w.error||"Receipt reconciliation failed."),new Kn("reconcile",w.error||"Receipt reconciliation failed.",w);return await r(m,"reconcile","ok",u.network,w,null),w}catch(E){if(E instanceof Kn)throw E;const w=E instanceof Error?E.message:String(E);throw await r(m,"reconcile","failed",u.network,y,w),new Kn("reconcile",w,y)}};return{buildAndValidateKaspaIntent:i,signBroadcastAndReconcileKaspaTx:l,executeKaspaIntent:async(u,d={})=>{const f=await i(u,{onUpdate:d.onUpdate,telemetry:d.telemetry});return l(f,d)}}}const rp=DT(),MT=rp.buildAndValidateKaspaIntent,zT=rp.signBroadcastAndReconcileKaspaTx,UT=rp.executeKaspaIntent;function t1(e){return`${e}_${crypto.randomUUID()}`}function n1(){const e=wd();return e&&G0(e.chainId)?e:null}const BT=1e8;function FT(e){const t=Number(e)/BT;if(!Number.isFinite(t)||t<=0)throw new Error("KASPA_NATIVE_EXECUTION_INVALID_AMOUNT");return t}async function tc(){const e=await wa().catch(()=>"mainnet");return e==="mainnet"||e==="testnet-10"||e==="testnet-11"||e==="testnet-12"?e:"mainnet"}function us(e,t,n="FAILED_BRIDGE"){return bt(e,n,{error:t})}function r1(){return fe.zeroExQuoteEndpoint?fe.zeroExExpectedSettlerTo?{ok:!0,reason:null}:{ok:!1,reason:"0x settler target is not configured."}:{ok:!1,reason:"0x quote endpoint is not configured."}}function o1(){if(!fe.enabled)return{enabled:!1,reason:"Swap functionality not yet active on Kaspa."};if(fe.routeSource==="blocked")return{enabled:!1,reason:"Swap routes are currently disabled on Kaspa."};if(fe.routeSource==="kaspa_native")return{enabled:!0,reason:null};const e=r1();return e.ok?{enabled:!0,reason:null}:{enabled:!1,reason:e.reason}}function $T(e,t={}){const n=[],r=e.customTokenOut??null,o=!!r,i=o?"USDC":e.tokenOut,l=t.routeSource??fe.routeSource,c=t.allowHybridAuto!==!1;!o&&e.tokenIn===e.tokenOut&&n.push("Token in and token out must be different.");const u=Gf(e.tokenIn,i,l,{allowHybridAuto:c});if(!u.allowed&&u.reason&&n.push(u.reason),Vm(e.tokenIn)||n.push(`${e.tokenIn} is not currently available.`),!o&&!Vm(e.tokenOut)&&n.push(`${e.tokenOut} is not currently available.`),o&&(String((r==null?void 0:r.address)??"").trim()||n.push("Custom token address is required."),(r==null?void 0:r.standard)!=="krc20"&&(r==null?void 0:r.standard)!=="krc721"&&n.push("Custom token standard must be KRC20 or KRC721.")),e.amountIn<=0n&&n.push("Amount must be greater than zero."),(e.slippageBps<0||e.slippageBps>fe.maxSlippageBps)&&n.push(`Slippage must be between 0 and ${fe.maxSlippageBps} bps (${fe.maxSlippageBps/100}%).`),u.source==="evm_0x"){const d=r1();!d.ok&&d.reason&&n.push(d.reason)}return u.source==="kaspa_native"?(fe.dexEndpoint||n.push("Kaspa-native DEX endpoint is not configured."),e.tokenIn!=="KAS"&&n.push("Kaspa-native swap currently supports KAS as the input token.")):o&&n.push("Custom KRC token output requires kaspa-native swap route."),n}async function KT(e,t={}){var u,d,f,m,h,y,E;if(!o1().enabled)return null;const r=t.routeSource??fe.routeSource,o=t.allowHybridAuto!==!1,i=$T(e,{routeSource:r,allowHybridAuto:o});if(i.length>0)throw new Error(`SWAP_VALIDATION: ${i.join("; ")}`);const l=e.customTokenOut?"USDC":e.tokenOut,c=Gf(e.tokenIn,l,r,{allowHybridAuto:o});if(c.source==="kaspa_native"){const w=fe.dexEndpoint;if(!w)throw new Error("KASPA_NATIVE_ROUTE_UNAVAILABLE: dex endpoint is not configured.");const k=$r();if(!(k!=null&&k.mnemonic))throw new Error("KASPA_NATIVE_SIGNER_REQUIRED: unlock managed Kaspa wallet.");const p=await tc(),g=is(k.address,p);return{...await tT(e,{endpoint:w,network:p,walletAddress:g}),customTokenOut:e.customTokenOut??null}}if(c.source==="evm_0x"){const w=n1();if(!w)throw new Error("EVM_SIDECAR_REQUIRED: connect external EVM signer first.");const k=OE(e,w,{endpoint:fe.zeroExQuoteEndpoint||"",apiKey:fe.zeroExApiKey||void 0,expectedSettlerTo:fe.zeroExExpectedSettlerTo,expectedAllowanceSpender:fe.zeroExExpectedAllowanceSpender||void 0}),p=await DE(k,fe.evmChainIdAllowlist,w.chainId),g=BigInt(p.minBuyAmount||p.buyAmount||"0"),S=typeof((u=p.transaction)==null?void 0:u.to)=="string"?p.transaction.to:"",v=typeof((d=p.transaction)==null?void 0:d.data)=="string"?p.transaction.data:"";if(!S||!v)throw new Error("ZEROX_QUOTE_INVALID: missing transaction payload.");return{tokenIn:e.tokenIn,tokenOut:e.tokenOut,amountIn:e.amountIn,amountOut:g,priceImpact:0,fee:0n,route:((m=(f=p.route)==null?void 0:f.fills)==null?void 0:m.map(C=>String((C==null?void 0:C.source)||"0x")))||["0x"],validUntil:Date.now()+3e4,dexEndpoint:fe.zeroExQuoteEndpoint||"https://api.0x.org",routeSource:"evm_0x",transaction:{to:S,data:v,value:typeof((h=p.transaction)==null?void 0:h.value)=="string"?p.transaction.value:"0x0"},allowanceSpender:(E=(y=p.issues)==null?void 0:y.allowance)==null?void 0:E.spender,rawQuote:p,customTokenOut:e.customTokenOut??null}}throw new Error(`SWAP_ROUTE_UNSUPPORTED: ${c.source}`)}async function HT(e){if(!e.txHash||e.routeSource!=="evm_0x"||!qf(e))return e;if(e.createdAt+fe.settlementTimeoutMs<=Date.now()){const c=bt(e,"FAILED_TIMEOUT",{error:"Swap timed out waiting for confirmations."});return await et(c),c}const t=await bE(e.txHash).catch(()=>null);if(!t)return e;if(jE(t)==="revert"){const c=bt(e,"FAILED_REVERT",{error:"EVM transaction reverted."});return await et(c),c}const r=RE(t),o=await PE().catch(()=>null),i=r&&o&&o>=r?o-r+1:e.confirmations||1;if(i>=fe.settlementRequiredConfirmations){const c=bt(e,"CONFIRMED",{confirmations:i,error:null});return await et(c),c}const l=bt(e,"PENDING_CONFIRMATION",{confirmations:i});return await et(l),l}async function i1(e){if(!e.txHash||e.routeSource!=="kaspa_native"||!qf(e))return e;if(e.createdAt+fe.settlementTimeoutMs<=Date.now()){const c=bt(e,"FAILED_TIMEOUT",{error:"Swap timed out waiting for confirmations."});return await et(c),c}const t=e.bridgeTransferId||"";if(!t){const c=us(e,"KASPA_NATIVE_SETTLEMENT_MISSING_QUOTE_ID");return await et(c),c}const n=fe.dexEndpoint;if(!n)return e;let r;try{const c=await tc();r=await oT({endpoint:n,network:c,quoteId:t,depositTxId:e.txHash})}catch{return e}if(r.state==="failed"){const c=us(e,r.error||"KASPA_NATIVE_EXECUTION_FAILED");return await et(c),c}const o=await F0(e.txHash,e.network??"mainnet").catch(()=>null),i=!!(o!=null&&o.confirmed);if(i&&r.state==="confirmed"){const c=bt(e,"CONFIRMED",{confirmations:Math.max(1,r.confirmations||1),error:null});return await et(c),c}const l=bt(e,"PENDING_CONFIRMATION",{confirmations:i?1:0});return await et(l),l}async function s1(e){return e.routeSource==="evm_0x"?HT(e):e.routeSource==="kaspa_native"?i1(e):e}async function kd(){const t=(await as()).filter(r=>qf(r)&&(r.routeSource==="evm_0x"||r.routeSource==="kaspa_native")),n=[];for(const r of t)n.push(await s1(r));return n}async function WT(){return _E()}async function VT(e){if(!e.transaction)throw new Error("SWAP_EXECUTION_UNSUPPORTED: missing EVM transaction payload.");const t=n1();if(!t)throw new Error("EVM_SIDECAR_REQUIRED: connect external EVM signer first.");if(!kE(e.transaction.to,fe.zeroExExpectedSettlerTo))throw new Error("ZEROX_SETTLER_MISMATCH: refusing to execute unexpected transaction target.");const n=t1("swap"),r=await tc();let o=Y0(n,"evm_0x",r);o=bt(o,"QUOTED"),await et(o),o=bt(o,"SIGNED"),await et(o);let i="";try{i=await NE({from:t.address,to:e.transaction.to,data:e.transaction.data,value:e.transaction.value||"0x0"})}catch(u){const d=bt(o,"FAILED_BRIDGE",{error:u instanceof Error?u.message:String(u)});return await et(d),d}o=bt(o,"SUBMITTED",{txHash:i,confirmations:0,error:null}),await et(o);const l=Date.now()+fe.settlementTimeoutMs;for(;Date.now()<l;){if(o=await s1(o),o.state==="CONFIRMED"||o.state==="FAILED_REVERT"||o.state==="FAILED_BRIDGE")return o;await new Promise(d=>setTimeout(d,fe.settlementPollIntervalMs))}const c=bt(o,"FAILED_TIMEOUT",{error:"Swap timed out waiting for confirmations."});return await et(c),c}async function GT(e){var h;if(e.routeSource!=="kaspa_native")throw new Error("KASPA_NATIVE_ROUTE_REQUIRED");if(e.tokenIn!=="KAS")throw new Error("KASPA_NATIVE_INPUT_UNSUPPORTED: only KAS input is supported.");if(Date.now()>e.validUntil)throw new Error("KASPA_NATIVE_QUOTE_EXPIRED");const t=fe.dexEndpoint;if(!t)throw new Error("KASPA_NATIVE_ENDPOINT_MISSING");const n=$r();if(!(n!=null&&n.mnemonic))throw new Error("KASPA_NATIVE_SIGNER_REQUIRED: unlock managed Kaspa wallet.");const r=await tc(),o=is(n.address,r),i=eT(e),l=FT(e.amountIn),c=t1("swap");let u=Y0(c,"kaspa_native",r);u=bt(u,"QUOTED"),await et(u),u=bt(u,"SIGNED"),await et(u);let d="";try{d=(await UT({fromAddress:o,network:r,recipients:[{address:i.settlementAddress,amountKas:l}]},{awaitConfirmation:!1,telemetry:{channel:"swap",runId:c,context:{settlementId:c,quoteId:i.quoteId,tokenIn:e.tokenIn,tokenOut:((h=e.customTokenOut)==null?void 0:h.symbol)||e.tokenOut,amountIn:e.amountIn.toString()}}})).txId||""}catch(y){const E=us(u,y instanceof Error?y.message:String(y));return await et(E),E}if(!d){const y=us(u,"KASPA_NATIVE_EXECUTION_NO_TXID");return await et(y),y}u=bt(u,"SUBMITTED",{txHash:d,bridgeTransferId:i.quoteId,confirmations:0,error:null}),await et(u);try{await nT({endpoint:t,network:r,quoteId:i.quoteId,depositTxId:d,walletAddress:o,amountIn:e.amountIn})}catch{}const f=Date.now()+fe.settlementTimeoutMs;for(;Date.now()<f;){if(u=await i1(u),u.state==="CONFIRMED"||u.state==="FAILED_REVERT"||u.state==="FAILED_BRIDGE"||u.state==="FAILED_TIMEOUT")return u;await new Promise(y=>setTimeout(y,fe.settlementPollIntervalMs))}const m=us(u,"Swap timed out waiting for confirmations.","FAILED_TIMEOUT");return await et(m),m}async function XT(e){if(e.routeSource==="kaspa_native")return GT(e);if(e.routeSource==="evm_0x")return VT(e);throw new Error(`SWAP_EXECUTION_UNSUPPORTED: ${e.routeSource||"unknown route"}`)}const YT=new Set([12,15,18,21,24]),l1=Ja;function op(e){return e.trim().toLowerCase().split(/\s+/).join(" ")}function ip(e){const t=e.trim().split(/\s+/).filter(Boolean);if(!YT.has(t.length))throw new Error(`Seed phrase must be a valid BIP39 length (12/15/18/21/24 words; got ${t.length}).`)}async function sp(e,t){const n=await l1(),{Mnemonic:r,XPrv:o}=n,l=new r(e).toSeed(t.mnemonicPassphrase||void 0),c=new o(l);return{kaspa:n,masterXPrv:c}}function QT(e,t){try{return e.derivePath(t)}catch(n){if(t.startsWith("m/"))try{return e.derivePath(t.slice(2))}catch{}const r=n instanceof Error?n.message:String(n);throw new Error(`DERIVATION_PATH_INVALID: ${t} (${r})`)}}function lp(e,t){const n=Qt(t),{XPrivateKey:r}=e.kaspa,i=QT(e.masterXPrv,n.path).intoString("kprv"),l=new r(i,!1,BigInt(n.account));return{privKey:n.chain===1?l.changeKey(n.index):l.receiveKey(n.index),derivation:n}}function a1(e,t){return e.toKeypair().toAddress(t).toString()}async function c1(e,t,n={}){const r=await sp(e,n),{privKey:o,derivation:i}=lp(r,n.derivation);return{address:a1(o,t),derivation:i}}async function JT(e,t=24){const{Mnemonic:n}=await l1();let r;try{r=n.random(t)}catch{r=n.random()}const o=r.phrase,{address:i,derivation:l}=await c1(o,e,{derivation:Ut});return{phrase:o,address:i,network:e,derivation:l}}async function oh(e,t,n={}){ip(e);const r=op(e),o=n.mnemonicPassphrase||void 0,{address:i,derivation:l}=await c1(r,t,n);return{phrase:r,address:i,network:t,mnemonicPassphrase:o,derivation:l}}async function ZT(e,t,n={}){var E,w;ip(e);const r=op(e),o=((E=n.basePaths)!=null&&E.length?n.basePaths:[...Df]).map(k=>String(k).trim()).filter(Boolean),[i,l]=n.accountRange??[0,4],[c,u]=n.indexRange??[0,9],d=((w=n.chains)!=null&&w.length?n.chains:[0,1]).filter(k=>k===0||k===1),f=Math.max(1,n.limit??60),m=await sp(r,n),h=[],y=new Set;e:for(let k=Math.max(0,i);k<=Math.max(i,l);k++)for(const p of d)for(let g=Math.max(0,c);g<=Math.max(c,u);g++)for(const S of o){const v=Qt({path:S,account:k,chain:p,index:g});try{const{privKey:C}=lp(m,v),_=a1(C,t),j=_.toLowerCase();if(y.has(j))continue;if(y.add(j),h.push({address:_,derivation:v,derivationPath:bn(v),chainLabel:Mf(v.chain)}),h.length>=f)break e}catch{}}return h}async function qT(e,t,n={}){var m;ip(e);const r=op(e),o=await sp(r,n),{privKey:i}=lp(o,n.derivation),l=new TextEncoder().encode(t),{PrivateKey:c}=o.kaspa,u=i.toKeypair();let d;try{const h=u.privateKey??((m=u.toPrivateKey)==null?void 0:m.call(u));d=new c(h)}catch{d=i}const f=d.sign(l);return Array.from(f,h=>h.toString(16).padStart(2,"0")).join("")}var Ws={},ek=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},u1={},hn={};let ap;const tk=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];hn.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};hn.getSymbolTotalCodewords=function(t){return tk[t]};hn.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};hn.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');ap=t};hn.isKanjiModeEnabled=function(){return typeof ap<"u"};hn.toSJIS=function(t){return ap(t)};var nc={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,o){if(e.isValid(r))return r;try{return t(r)}catch{return o}}})(nc);function d1(){this.buffer=[],this.length=0}d1.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var nk=d1;function Vs(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Vs.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)};Vs.prototype.get=function(e,t){return this.data[e*this.size+t]};Vs.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Vs.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var rk=Vs,f1={};(function(e){const t=hn.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,i=t(r),l=i===145?26:Math.ceil((i-13)/(2*o-2))*2,c=[i-7];for(let u=1;u<o-1;u++)c[u]=c[u-1]-l;return c.push(6),c.reverse()},e.getPositions=function(r){const o=[],i=e.getRowColCoords(r),l=i.length;for(let c=0;c<l;c++)for(let u=0;u<l;u++)c===0&&u===0||c===0&&u===l-1||c===l-1&&u===0||o.push([i[c],i[u]]);return o}})(f1);var p1={};const ok=hn.getSymbolSize,ih=7;p1.getPositions=function(t){const n=ok(t);return[[0,0],[n-ih,0],[0,n-ih]]};var m1={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},e.from=function(o){return e.isValid(o)?parseInt(o,10):void 0},e.getPenaltyN1=function(o){const i=o.size;let l=0,c=0,u=0,d=null,f=null;for(let m=0;m<i;m++){c=u=0,d=f=null;for(let h=0;h<i;h++){let y=o.get(m,h);y===d?c++:(c>=5&&(l+=t.N1+(c-5)),d=y,c=1),y=o.get(h,m),y===f?u++:(u>=5&&(l+=t.N1+(u-5)),f=y,u=1)}c>=5&&(l+=t.N1+(c-5)),u>=5&&(l+=t.N1+(u-5))}return l},e.getPenaltyN2=function(o){const i=o.size;let l=0;for(let c=0;c<i-1;c++)for(let u=0;u<i-1;u++){const d=o.get(c,u)+o.get(c,u+1)+o.get(c+1,u)+o.get(c+1,u+1);(d===4||d===0)&&l++}return l*t.N2},e.getPenaltyN3=function(o){const i=o.size;let l=0,c=0,u=0;for(let d=0;d<i;d++){c=u=0;for(let f=0;f<i;f++)c=c<<1&2047|o.get(d,f),f>=10&&(c===1488||c===93)&&l++,u=u<<1&2047|o.get(f,d),f>=10&&(u===1488||u===93)&&l++}return l*t.N3},e.getPenaltyN4=function(o){let i=0;const l=o.data.length;for(let u=0;u<l;u++)i+=o.data[u];return Math.abs(Math.ceil(i*100/l/5)-10)*t.N4};function n(r,o,i){switch(r){case e.Patterns.PATTERN000:return(o+i)%2===0;case e.Patterns.PATTERN001:return o%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(o+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return o*i%2+o*i%3===0;case e.Patterns.PATTERN110:return(o*i%2+o*i%3)%2===0;case e.Patterns.PATTERN111:return(o*i%3+(o+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(o,i){const l=i.size;for(let c=0;c<l;c++)for(let u=0;u<l;u++)i.isReserved(u,c)||i.xor(u,c,n(o,u,c))},e.getBestMask=function(o,i){const l=Object.keys(e.Patterns).length;let c=0,u=1/0;for(let d=0;d<l;d++){i(d),e.applyMask(d,o);const f=e.getPenaltyN1(o)+e.getPenaltyN2(o)+e.getPenaltyN3(o)+e.getPenaltyN4(o);e.applyMask(d,o),f<u&&(u=f,c=d)}return c}})(m1);var rc={};const br=nc,Pl=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],jl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];rc.getBlocksCount=function(t,n){switch(n){case br.L:return Pl[(t-1)*4+0];case br.M:return Pl[(t-1)*4+1];case br.Q:return Pl[(t-1)*4+2];case br.H:return Pl[(t-1)*4+3];default:return}};rc.getTotalCodewordsCount=function(t,n){switch(n){case br.L:return jl[(t-1)*4+0];case br.M:return jl[(t-1)*4+1];case br.Q:return jl[(t-1)*4+2];case br.H:return jl[(t-1)*4+3];default:return}};var h1={},oc={};const ds=new Uint8Array(512),Pa=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)ds[n]=t,Pa[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)ds[n]=ds[n-255]})();oc.log=function(t){if(t<1)throw new Error("log("+t+")");return Pa[t]};oc.exp=function(t){return ds[t]};oc.mul=function(t,n){return t===0||n===0?0:ds[Pa[t]+Pa[n]]};(function(e){const t=oc;e.mul=function(r,o){const i=new Uint8Array(r.length+o.length-1);for(let l=0;l<r.length;l++)for(let c=0;c<o.length;c++)i[l+c]^=t.mul(r[l],o[c]);return i},e.mod=function(r,o){let i=new Uint8Array(r);for(;i.length-o.length>=0;){const l=i[0];for(let u=0;u<o.length;u++)i[u]^=t.mul(o[u],l);let c=0;for(;c<i.length&&i[c]===0;)c++;i=i.slice(c)}return i},e.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let i=0;i<r;i++)o=e.mul(o,new Uint8Array([1,t.exp(i)]));return o}})(h1);const g1=h1;function cp(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}cp.prototype.initialize=function(t){this.degree=t,this.genPoly=g1.generateECPolynomial(this.degree)};cp.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=g1.mod(n,this.genPoly),o=this.degree-r.length;if(o>0){const i=new Uint8Array(this.degree);return i.set(r,o),i}return r};var ik=cp,y1={},Gr={},up={};up.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var er={};const S1="[0-9]+",sk="[A-Z $%*+\\-./:]+";let Ds="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ds=Ds.replace(/u/g,"\\u");const lk="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ds+`)(?:.|[\r
]))+`;er.KANJI=new RegExp(Ds,"g");er.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");er.BYTE=new RegExp(lk,"g");er.NUMERIC=new RegExp(S1,"g");er.ALPHANUMERIC=new RegExp(sk,"g");const ak=new RegExp("^"+Ds+"$"),ck=new RegExp("^"+S1+"$"),uk=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");er.testKanji=function(t){return ak.test(t)};er.testNumeric=function(t){return ck.test(t)};er.testAlphanumeric=function(t){return uk.test(t)};(function(e){const t=up,n=er;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,l){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?i.ccBits[0]:l<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+o)}}e.from=function(i,l){if(e.isValid(i))return i;try{return r(i)}catch{return l}}})(Gr);(function(e){const t=hn,n=rc,r=nc,o=Gr,i=up,l=7973,c=t.getBCHDigit(l);function u(h,y,E){for(let w=1;w<=40;w++)if(y<=e.getCapacity(w,E,h))return w}function d(h,y){return o.getCharCountIndicator(h,y)+4}function f(h,y){let E=0;return h.forEach(function(w){const k=d(w.mode,y);E+=k+w.getBitsLength()}),E}function m(h,y){for(let E=1;E<=40;E++)if(f(h,E)<=e.getCapacity(E,y,o.MIXED))return E}e.from=function(y,E){return i.isValid(y)?parseInt(y,10):E},e.getCapacity=function(y,E,w){if(!i.isValid(y))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=o.BYTE);const k=t.getSymbolTotalCodewords(y),p=n.getTotalCodewordsCount(y,E),g=(k-p)*8;if(w===o.MIXED)return g;const S=g-d(w,y);switch(w){case o.NUMERIC:return Math.floor(S/10*3);case o.ALPHANUMERIC:return Math.floor(S/11*2);case o.KANJI:return Math.floor(S/13);case o.BYTE:default:return Math.floor(S/8)}},e.getBestVersionForData=function(y,E){let w;const k=r.from(E,r.M);if(Array.isArray(y)){if(y.length>1)return m(y,k);if(y.length===0)return 1;w=y[0]}else w=y;return u(w.mode,w.getLength(),k)},e.getEncodedBits=function(y){if(!i.isValid(y)||y<7)throw new Error("Invalid QR Code version");let E=y<<12;for(;t.getBCHDigit(E)-c>=0;)E^=l<<t.getBCHDigit(E)-c;return y<<12|E}})(y1);var x1={};const Ad=hn,v1=1335,dk=21522,sh=Ad.getBCHDigit(v1);x1.getEncodedBits=function(t,n){const r=t.bit<<3|n;let o=r<<10;for(;Ad.getBCHDigit(o)-sh>=0;)o^=v1<<Ad.getBCHDigit(o)-sh;return(r<<10|o)^dk};var w1={};const fk=Gr;function ai(e){this.mode=fk.NUMERIC,this.data=e.toString()}ai.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};ai.prototype.getLength=function(){return this.data.length};ai.prototype.getBitsLength=function(){return ai.getBitsLength(this.data.length)};ai.prototype.write=function(t){let n,r,o;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),o=parseInt(r,10),t.put(o,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),o=parseInt(r,10),t.put(o,i*3+1))};var pk=ai;const mk=Gr,qc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ci(e){this.mode=mk.ALPHANUMERIC,this.data=e}ci.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};ci.prototype.getLength=function(){return this.data.length};ci.prototype.getBitsLength=function(){return ci.getBitsLength(this.data.length)};ci.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=qc.indexOf(this.data[n])*45;r+=qc.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(qc.indexOf(this.data[n]),6)};var hk=ci;const gk=Gr;function ui(e){this.mode=gk.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}ui.getBitsLength=function(t){return t*8};ui.prototype.getLength=function(){return this.data.length};ui.prototype.getBitsLength=function(){return ui.getBitsLength(this.data.length)};ui.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var yk=ui;const Sk=Gr,xk=hn;function di(e){this.mode=Sk.KANJI,this.data=e}di.getBitsLength=function(t){return t*13};di.prototype.getLength=function(){return this.data.length};di.prototype.getBitsLength=function(){return di.getBitsLength(this.data.length)};di.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=xk.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var vk=di,E1={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,o){var i={},l={};l[r]=0;var c=t.PriorityQueue.make();c.push(r,0);for(var u,d,f,m,h,y,E,w,k;!c.empty();){u=c.pop(),d=u.value,m=u.cost,h=n[d]||{};for(f in h)h.hasOwnProperty(f)&&(y=h[f],E=m+y,w=l[f],k=typeof l[f]>"u",(k||w>E)&&(l[f]=E,c.push(f,E),i[f]=d))}if(typeof o<"u"&&typeof l[o]>"u"){var p=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var o=[],i=r;i;)o.push(i),n[i],i=n[i];return o.reverse(),o},find_path:function(n,r,o){var i=t.single_source_shortest_paths(n,r,o);return t.extract_shortest_path_from_predecessor_list(i,o)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,o={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);return o.queue=[],o.sorter=n.sorter||r.default_sorter,o},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var o={value:n,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(E1);var wk=E1.exports;(function(e){const t=Gr,n=pk,r=hk,o=yk,i=vk,l=er,c=hn,u=wk;function d(p){return unescape(encodeURIComponent(p)).length}function f(p,g,S){const v=[];let C;for(;(C=p.exec(S))!==null;)v.push({data:C[0],index:C.index,mode:g,length:C[0].length});return v}function m(p){const g=f(l.NUMERIC,t.NUMERIC,p),S=f(l.ALPHANUMERIC,t.ALPHANUMERIC,p);let v,C;return c.isKanjiModeEnabled()?(v=f(l.BYTE,t.BYTE,p),C=f(l.KANJI,t.KANJI,p)):(v=f(l.BYTE_KANJI,t.BYTE,p),C=[]),g.concat(S,v,C).sort(function(j,D){return j.index-D.index}).map(function(j){return{data:j.data,mode:j.mode,length:j.length}})}function h(p,g){switch(g){case t.NUMERIC:return n.getBitsLength(p);case t.ALPHANUMERIC:return r.getBitsLength(p);case t.KANJI:return i.getBitsLength(p);case t.BYTE:return o.getBitsLength(p)}}function y(p){return p.reduce(function(g,S){const v=g.length-1>=0?g[g.length-1]:null;return v&&v.mode===S.mode?(g[g.length-1].data+=S.data,g):(g.push(S),g)},[])}function E(p){const g=[];for(let S=0;S<p.length;S++){const v=p[S];switch(v.mode){case t.NUMERIC:g.push([v,{data:v.data,mode:t.ALPHANUMERIC,length:v.length},{data:v.data,mode:t.BYTE,length:v.length}]);break;case t.ALPHANUMERIC:g.push([v,{data:v.data,mode:t.BYTE,length:v.length}]);break;case t.KANJI:g.push([v,{data:v.data,mode:t.BYTE,length:d(v.data)}]);break;case t.BYTE:g.push([{data:v.data,mode:t.BYTE,length:d(v.data)}])}}return g}function w(p,g){const S={},v={start:{}};let C=["start"];for(let _=0;_<p.length;_++){const j=p[_],D=[];for(let Y=0;Y<j.length;Y++){const B=j[Y],me=""+_+Y;D.push(me),S[me]={node:B,lastCount:0},v[me]={};for(let Q=0;Q<C.length;Q++){const ce=C[Q];S[ce]&&S[ce].node.mode===B.mode?(v[ce][me]=h(S[ce].lastCount+B.length,B.mode)-h(S[ce].lastCount,B.mode),S[ce].lastCount+=B.length):(S[ce]&&(S[ce].lastCount=B.length),v[ce][me]=h(B.length,B.mode)+4+t.getCharCountIndicator(B.mode,g))}}C=D}for(let _=0;_<C.length;_++)v[C[_]].end=0;return{map:v,table:S}}function k(p,g){let S;const v=t.getBestModeForData(p);if(S=t.from(g,v),S!==t.BYTE&&S.bit<v.bit)throw new Error('"'+p+'" cannot be encoded with mode '+t.toString(S)+`.
 Suggested mode is: `+t.toString(v));switch(S===t.KANJI&&!c.isKanjiModeEnabled()&&(S=t.BYTE),S){case t.NUMERIC:return new n(p);case t.ALPHANUMERIC:return new r(p);case t.KANJI:return new i(p);case t.BYTE:return new o(p)}}e.fromArray=function(g){return g.reduce(function(S,v){return typeof v=="string"?S.push(k(v,null)):v.data&&S.push(k(v.data,v.mode)),S},[])},e.fromString=function(g,S){const v=m(g,c.isKanjiModeEnabled()),C=E(v),_=w(C,S),j=u.find_path(_.map,"start","end"),D=[];for(let Y=1;Y<j.length-1;Y++)D.push(_.table[j[Y]].node);return e.fromArray(y(D))},e.rawSplit=function(g){return e.fromArray(m(g,c.isKanjiModeEnabled()))}})(w1);const ic=hn,eu=nc,Ek=nk,Tk=rk,kk=f1,Ak=p1,Id=m1,Cd=rc,Ik=ik,ja=y1,Ck=x1,_k=Gr,tu=w1;function Nk(e,t){const n=e.size,r=Ak.getPositions(t);for(let o=0;o<r.length;o++){const i=r[o][0],l=r[o][1];for(let c=-1;c<=7;c++)if(!(i+c<=-1||n<=i+c))for(let u=-1;u<=7;u++)l+u<=-1||n<=l+u||(c>=0&&c<=6&&(u===0||u===6)||u>=0&&u<=6&&(c===0||c===6)||c>=2&&c<=4&&u>=2&&u<=4?e.set(i+c,l+u,!0,!0):e.set(i+c,l+u,!1,!0))}}function bk(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function Pk(e,t){const n=kk.getPositions(t);for(let r=0;r<n.length;r++){const o=n[r][0],i=n[r][1];for(let l=-2;l<=2;l++)for(let c=-2;c<=2;c++)l===-2||l===2||c===-2||c===2||l===0&&c===0?e.set(o+l,i+c,!0,!0):e.set(o+l,i+c,!1,!0)}}function jk(e,t){const n=e.size,r=ja.getEncodedBits(t);let o,i,l;for(let c=0;c<18;c++)o=Math.floor(c/3),i=c%3+n-8-3,l=(r>>c&1)===1,e.set(o,i,l,!0),e.set(i,o,l,!0)}function nu(e,t,n){const r=e.size,o=Ck.getEncodedBits(t,n);let i,l;for(i=0;i<15;i++)l=(o>>i&1)===1,i<6?e.set(i,8,l,!0):i<8?e.set(i+1,8,l,!0):e.set(r-15+i,8,l,!0),i<8?e.set(8,r-i-1,l,!0):i<9?e.set(8,15-i-1+1,l,!0):e.set(8,15-i-1,l,!0);e.set(r-8,8,1,!0)}function Rk(e,t){const n=e.size;let r=-1,o=n-1,i=7,l=0;for(let c=n-1;c>0;c-=2)for(c===6&&c--;;){for(let u=0;u<2;u++)if(!e.isReserved(o,c-u)){let d=!1;l<t.length&&(d=(t[l]>>>i&1)===1),e.set(o,c-u,d),i--,i===-1&&(l++,i=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}function Lk(e,t,n){const r=new Ek;n.forEach(function(u){r.put(u.mode.bit,4),r.put(u.getLength(),_k.getCharCountIndicator(u.mode,e)),u.write(r)});const o=ic.getSymbolTotalCodewords(e),i=Cd.getTotalCodewordsCount(e,t),l=(o-i)*8;for(r.getLengthInBits()+4<=l&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const c=(l-r.getLengthInBits())/8;for(let u=0;u<c;u++)r.put(u%2?17:236,8);return Ok(r,e,t)}function Ok(e,t,n){const r=ic.getSymbolTotalCodewords(t),o=Cd.getTotalCodewordsCount(t,n),i=r-o,l=Cd.getBlocksCount(t,n),c=r%l,u=l-c,d=Math.floor(r/l),f=Math.floor(i/l),m=f+1,h=d-f,y=new Ik(h);let E=0;const w=new Array(l),k=new Array(l);let p=0;const g=new Uint8Array(e.buffer);for(let j=0;j<l;j++){const D=j<u?f:m;w[j]=g.slice(E,E+D),k[j]=y.encode(w[j]),E+=D,p=Math.max(p,D)}const S=new Uint8Array(r);let v=0,C,_;for(C=0;C<p;C++)for(_=0;_<l;_++)C<w[_].length&&(S[v++]=w[_][C]);for(C=0;C<h;C++)for(_=0;_<l;_++)S[v++]=k[_][C];return S}function Dk(e,t,n,r){let o;if(Array.isArray(e))o=tu.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const f=tu.rawSplit(e);d=ja.getBestVersionForData(f,n)}o=tu.fromString(e,d||40)}else throw new Error("Invalid data");const i=ja.getBestVersionForData(o,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const l=Lk(t,n,o),c=ic.getSymbolSize(t),u=new Tk(c);return Nk(u,t),bk(u),Pk(u,t),nu(u,n,0),t>=7&&jk(u,t),Rk(u,l),isNaN(r)&&(r=Id.getBestMask(u,nu.bind(null,u,n))),Id.applyMask(r,u),nu(u,n,r),{modules:u,version:t,errorCorrectionLevel:n,maskPattern:r,segments:o}}u1.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=eu.M,o,i;return typeof n<"u"&&(r=eu.from(n.errorCorrectionLevel,eu.M),o=ja.from(n.version),i=Id.from(n.maskPattern),n.toSJISFunc&&ic.setToSJISFunction(n.toSJISFunc)),Dk(t,o,r,i)};var T1={},dp={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,l=r.scale||4;return{width:i,scale:i?4:l,margin:o,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},e.getImageWidth=function(r,o){const i=e.getScale(r,o);return Math.floor((r+o.margin*2)*i)},e.qrToImageData=function(r,o,i){const l=o.modules.size,c=o.modules.data,u=e.getScale(l,i),d=Math.floor((l+i.margin*2)*u),f=i.margin*u,m=[i.color.light,i.color.dark];for(let h=0;h<d;h++)for(let y=0;y<d;y++){let E=(h*d+y)*4,w=i.color.light;if(h>=f&&y>=f&&h<d-f&&y<d-f){const k=Math.floor((h-f)/u),p=Math.floor((y-f)/u);w=m[c[k*l+p]?1:0]}r[E++]=w.r,r[E++]=w.g,r[E++]=w.b,r[E]=w.a}}})(dp);(function(e){const t=dp;function n(o,i,l){o.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=l,i.width=l,i.style.height=l+"px",i.style.width=l+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,l,c){let u=c,d=l;typeof u>"u"&&(!l||!l.getContext)&&(u=l,l=void 0),l||(d=r()),u=t.getOptions(u);const f=t.getImageWidth(i.modules.size,u),m=d.getContext("2d"),h=m.createImageData(f,f);return t.qrToImageData(h.data,i,u),n(m,d,f),m.putImageData(h,0,0),d},e.renderToDataURL=function(i,l,c){let u=c;typeof u>"u"&&(!l||!l.getContext)&&(u=l,l=void 0),u||(u={});const d=e.render(i,l,u),f=u.type||"image/png",m=u.rendererOpts||{};return d.toDataURL(f,m.quality)}})(T1);var k1={};const Mk=dp;function lh(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function ru(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function zk(e,t,n){let r="",o=0,i=!1,l=0;for(let c=0;c<e.length;c++){const u=Math.floor(c%t),d=Math.floor(c/t);!u&&!i&&(i=!0),e[c]?(l++,c>0&&u>0&&e[c-1]||(r+=i?ru("M",u+n,.5+d+n):ru("m",o,0),o=0,i=!1),u+1<t&&e[c+1]||(r+=ru("h",l),l=0)):o++}return r}k1.render=function(t,n,r){const o=Mk.getOptions(n),i=t.modules.size,l=t.modules.data,c=i+o.margin*2,u=o.color.light.a?"<path "+lh(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+lh(o.color.dark,"stroke")+' d="'+zk(l,i,o.margin)+'"/>',f='viewBox="0 0 '+c+" "+c+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+f+' shape-rendering="crispEdges">'+u+d+`</svg>
`;return typeof r=="function"&&r(null,h),h};const Uk=ek,_d=u1,A1=T1,Bk=k1;function fp(e,t,n,r,o){const i=[].slice.call(arguments,1),l=i.length,c=typeof i[l-1]=="function";if(!c&&!Uk())throw new Error("Callback required as last argument");if(c){if(l<2)throw new Error("Too few arguments provided");l===2?(o=n,n=t,t=r=void 0):l===3&&(t.getContext&&typeof o>"u"?(o=r,r=void 0):(o=r,r=n,n=t,t=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(n=t,t=r=void 0):l===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(u,d){try{const f=_d.create(n,r);u(e(f,t,r))}catch(f){d(f)}})}try{const u=_d.create(n,r);o(null,e(u,t,r))}catch(u){o(u)}}Ws.create=_d.create;Ws.toCanvas=fp.bind(null,A1.render);Ws.toDataURL=fp.bind(null,A1.renderToDataURL);Ws.toString=fp.bind(null,function(e,t,n){return Bk.render(e,n)});var Bh;const cr=((Bh=import.meta)==null?void 0:Bh.env)??{},Fk=3500,$k=2e4,Kk=512,Wn=new Map,ah=100,Hk=0,Wk=200,Vk=12,Gk=35,Xk=55,Yk=8,Qk=2,Jk=12e4,Zk=1500,qk=3e4,ch=new Map;function ou(e){const t=String((cr==null?void 0:cr[e])??"").trim();if(!t)return[];const n=t.split(/[,\s]+/).map(r=>r.trim().replace(/\/+$/,"")).filter(Boolean);return[...new Set(n)]}function Gs(e,t){const n=String((cr==null?void 0:cr[e])??"").trim();if(!n)return t;const r=Number(n);return Number.isFinite(r)?Math.max(0,Math.floor(r)):t}function Xs(e,t){const n=String((cr==null?void 0:cr[e])??"").trim();if(!n)return t;const r=Number(n);return Number.isFinite(r)?Math.max(0,r):t}function eA(){return Gs("VITE_SWAP_KRC_TOKEN_METADATA_CACHE_TTL_MS",$k)}function tA(){return Math.max(1,Gs("VITE_SWAP_KRC_TOKEN_METADATA_CACHE_MAX_ENTRIES",Kk))}function nA(){return Xs("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_SUCCESS_REWARD",Vk)}function rA(){return Xs("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_FAILURE_PENALTY",Gk)}function oA(){return Xs("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_TIMEOUT_PENALTY",Xk)}function iA(){return Xs("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_MISS_PENALTY",Yk)}function sA(){return Xs("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_LATENCY_PENALTY_PER_100MS",Qk)}function lA(){return Gs("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_DECAY_TAU_MS",Jk)}function aA(){return Gs("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_BACKOFF_BASE_MS",Zk)}function cA(){return Gs("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINT_BACKOFF_MAX_MS",qk)}function uA(e){return e==="testnet-10"?"TN10":e==="testnet-11"?"TN11":e==="testnet-12"?"TN12":"MAINNET"}function I1(e){const t=uA(e),n=ou("VITE_SWAP_KRC_TOKEN_METADATA_ENDPOINTS"),r=ou(`VITE_KASPA_KASPLEX_${t}_API_ENDPOINTS`),o=ou("VITE_KASPA_KASPLEX_API_ENDPOINTS");return[...new Set([...n,...r,...o])]}function C1(e,t={},n=Fk){const r=new AbortController,o=setTimeout(()=>r.abort(),n);return fetch(e,{...t,signal:r.signal}).finally(()=>clearTimeout(o))}function Nd(e){return e&&typeof e=="object"&&!Array.isArray(e)?e:null}function dA(e){const t=["token","data","result","item","collection","metadata"];for(const n of t){const r=Nd(e[n]);if(r)return r}return null}function Gn(e,t){for(const n of t){const r=e[n];if(typeof r=="string"&&r.trim())return r.trim()}return""}function fA(e,t){for(const n of t){const r=e[n],o=typeof r=="number"?r:Number(r);if(Number.isFinite(o))return o}return null}function Ra(e){return String(e||"").trim().toLowerCase()}function _1(e,t,n){return`${n}|${t}|${Ra(e)}`}function Ms(e){return{...e}}function pA(e){const t=Wn.get(e);return t?t.expiresAt<=Date.now()?(Wn.delete(e),null):(Wn.delete(e),Wn.set(e,t),Ms(t.token)):null}function bd(e,t){const n=eA();if(n<=0)return;Wn.has(e)&&Wn.delete(e),Wn.set(e,{token:Ms(t),expiresAt:Date.now()+n});const r=tA();for(;Wn.size>r;){const o=Wn.keys().next().value;if(typeof o!="string")break;Wn.delete(o)}}function Ql(e){return Math.max(Hk,Math.min(Wk,e))}function N1(e,t=Date.now()){let n=ch.get(e);if(!n)return n={score:ah,consecutiveFailures:0,backoffUntil:0,lastUpdatedAt:t},ch.set(e,n),n;const r=Math.max(0,t-n.lastUpdatedAt),o=lA();if(o>0&&r>0){const i=1-Math.exp(-r/o);n.score=Ql(n.score+(ah-n.score)*i)}return n.lastUpdatedAt=t,n}function mA(e){const t=sA();return t<=0?0:Math.max(0,e)/100*t}function b1(e,t,n,r=Date.now()){const o=N1(e,r),i=mA(n);if(t==="success"){o.consecutiveFailures=0,o.backoffUntil=0,o.score=Ql(o.score+nA()-i);return}if(t==="miss"){o.score=Ql(o.score-iA()-i*.5),o.consecutiveFailures=Math.max(0,o.consecutiveFailures-1);return}const l=t==="timeout"?oA():rA();o.consecutiveFailures+=1,o.score=Ql(o.score-l-i);const c=aA(),u=cA(),d=Math.min(u,c*Math.pow(2,Math.max(0,o.consecutiveFailures-1)));o.backoffUntil=r+d}function P1(e,t=Date.now()){const n=[],r=[];for(const o of e){const i=N1(o,t);i.backoffUntil>t?r.push({endpoint:o,score:i.score,backoffUntil:i.backoffUntil}):n.push({endpoint:o,score:i.score})}return n.sort((o,i)=>i.score-o.score),n.length>0?n.map(o=>o.endpoint):(r.sort((o,i)=>o.backoffUntil-i.backoffUntil||i.score-o.score),r.length>0?[r[0].endpoint]:[])}function hA(e,t){const n=t==="krc721"?0:8;return Number.isFinite(e)?Math.max(0,Math.min(18,Math.floor(e))):n}function gA(e){let t=2166136261;for(let n=0;n<e.length;n+=1)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function uh(e,t=64,n=52){return`hsl(${e%360} ${t}% ${n}%)`}function j1(e,t){const n=Ra(e),r=gA(`${t}:${n}`),o=uh(r),i=uh(r>>3),l=t==="krc721"?"721":"20",c=n.slice(0,6).toUpperCase(),u=`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='${o}'/><stop offset='100%' stop-color='${i}'/></linearGradient></defs><rect width='120' height='120' rx='24' fill='url(#g)'/><text x='60' y='56' text-anchor='middle' font-family='IBM Plex Mono, monospace' font-size='18' fill='white'>${l}</text><text x='60' y='78' text-anchor='middle' font-family='IBM Plex Mono, monospace' font-size='10' fill='white'>${c}</text></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(u)}`}function yA(e,t){const n=String(e??"").trim().toLowerCase();return n.includes("721")?"krc721":n.includes("20")?"krc20":n==="nft"?"krc721":n==="ft"?"krc20":t}function R1(e,t,n){const o=Gn(e,["address","tokenAddress","contractAddress","contract","id","assetId"])||t,i=yA(Gn(e,["standard","type","tokenType","protocol"]),n),l=Gn(e,["symbol","ticker","tick","tokenSymbol"])||o.slice(0,6).toUpperCase(),c=Gn(e,["name","collectionName","tokenName","title"])||l,u=fA(e,["decimals","decimal","precision"]),d=hA(u??(i==="krc721"?0:8),i),f=Gn(e,["logo","logoUrl","image","imageUrl","icon","iconUrl"])||j1(o,i);return{address:o,standard:i,symbol:l,name:c,decimals:d,logoUri:f}}function L1(e){const t=[],n=Nd(e);if(!n)return t;t.push(n);const r=dA(n);r&&t.push(r);for(const o of["tokens","items","results","data"]){const i=n[o];if(Array.isArray(i))for(const l of i){const c=Nd(l);c&&t.push(c)}}return t}function SA(e,t){const n=Ra(t);if(!n)return e[0]??null;for(const r of e){const o=Ra(Gn(r,["address","tokenAddress","contractAddress","contract","id","assetId"]));if(o&&o===n)return r}return e[0]??null}function xA(e,t){const n=encodeURIComponent(e);return t==="krc721"?[`/krc721/tokens/${n}`,`/krc721/collections/${n}`,`/krc721/${n}`,`/tokens/${n}`,`/token/${n}`,`/v1/krc721/${n}`]:[`/krc20/tokens/${n}`,`/krc20/token/${n}`,`/krc20/${n}`,`/tokens/${n}`,`/token/${n}`,`/v1/krc20/${n}`]}function vA(e,t){const n=encodeURIComponent(e);return t==="krc721"?[`/krc721/tokens?search=${n}`,`/krc721/tokens?q=${n}`,`/krc721/collections?search=${n}`,`/krc721/search?query=${n}`,`/tokens?search=${n}`,`/token/search?query=${n}`,`/v1/krc721/tokens?search=${n}`]:[`/krc20/tokens?search=${n}`,`/krc20/tokens?q=${n}`,`/krc20/search?query=${n}`,`/tokens?search=${n}`,`/token/search?query=${n}`,`/v1/krc20/tokens?search=${n}`]}function wA(e,t){const n=Gn(e,["symbol","ticker","tick","tokenSymbol"]).toLowerCase(),r=Gn(e,["name","collectionName","tokenName","title"]).toLowerCase(),o=Gn(e,["address","tokenAddress","contractAddress","contract","id","assetId"]).toLowerCase();return o?n===t?0:r===t?1:o===t?2:n.startsWith(t)?3:r.startsWith(t)?4:n.includes(t)?5:r.includes(t)?6:Number.POSITIVE_INFINITY:Number.POSITIVE_INFINITY}function EA(e,t){const n=String(t||"").trim().toLowerCase();if(!n)return null;let r=null,o=Number.POSITIVE_INFINITY;for(const i of e){const l=wA(i,n);l<o&&(r=i,o=l)}return Number.isFinite(o)?r:null}async function TA(e,t,n){const r=Date.now(),o=e.replace(/\/+$/,""),i=xA(t,n);let l=!1,c=!1;for(const u of i)try{const d=await C1(`${o}${u}`,{method:"GET"});if(!d.ok){(d.status>=500||d.status===429)&&(l=!0);continue}const f=await d.json().catch(()=>null);if(!f){l=!0;continue}const m=L1(f);if(m.length===0)continue;const h=SA(m,t);if(!h)continue;return{token:R1(h,t,n),outcome:"success",elapsedMs:Math.max(0,Date.now()-r)}}catch(d){d instanceof Error&&d.name==="AbortError"?c=!0:l=!0}return{token:null,outcome:c?"timeout":l?"failure":"miss",elapsedMs:Math.max(0,Date.now()-r)}}async function kA(e,t,n){const r=Date.now(),o=e.replace(/\/+$/,""),i=vA(t,n);let l=!1,c=!1;for(const u of i)try{const d=await C1(`${o}${u}`,{method:"GET"});if(!d.ok){(d.status>=500||d.status===429)&&(l=!0);continue}const f=await d.json().catch(()=>null);if(!f){l=!0;continue}const m=L1(f);if(m.length===0)continue;const h=EA(m,t);if(!h)continue;const y=Gn(h,["address","tokenAddress","contractAddress","contract","id","assetId"]);if(!y)continue;return{token:R1(h,y,n),outcome:"success",elapsedMs:Math.max(0,Date.now()-r)}}catch(d){d instanceof Error&&d.name==="AbortError"?c=!0:l=!0}return{token:null,outcome:c?"timeout":l?"failure":"miss",elapsedMs:Math.max(0,Date.now()-r)}}async function sc(e,t,n){const r=String(e||"").trim();if(!r)throw new Error("Token address is required.");const o=_1(r,t,n),i=pA(o);if(i)return i;const l=P1(I1(n));for(const u of l){const d=await TA(u,r,t);if(b1(u,d.outcome,d.elapsedMs),d.token)return bd(o,d.token),Ms(d.token)}const c={address:r,standard:t,symbol:r.slice(0,6).toUpperCase(),name:t==="krc721"?"KRC721 Token":"KRC20 Token",decimals:t==="krc721"?0:8,logoUri:j1(r,t)};return bd(o,c),Ms(c)}function AA(e){const t=String(e||"").trim();return t?t.includes(":")||/^0x[a-fA-F0-9]{40}$/.test(t)?!0:/^[a-zA-Z0-9_-]{24,}$/.test(t):!1}async function O1(e,t,n){const r=String(e||"").trim();if(!r)return null;if(AA(r))return sc(r,t,n);const o=P1(I1(n));for(const i of o){const l=await kA(i,r,t);if(b1(i,l.outcome,l.elapsedMs),l.token)return bd(_1(l.token.address,l.token.standard,n),l.token),Ms(l.token)}return null}var Fh;const Qo=((Fh=import.meta)==null?void 0:Fh.env)??{},IA=1e4,CA=1500,_A=3e4,NA=3e4,bA=120,PA=360,jA=120,RA=360,LA=5*6e4,OA=6,Pd="forgeos.krc.prefetch.v1",DA=3500,MA=24,dh=new Map,fh=new Map,iu=new Map,su=new Map,lu=new Map;function Pr(e){const t=String((Qo==null?void 0:Qo[e])??"").trim();return t?[...new Set(t.split(/[,\s]+/).map(n=>n.trim().replace(/\/+$/,"")).filter(Boolean))]:[]}function Zn(e,t){const n=Number(Qo==null?void 0:Qo[e]);return Number.isFinite(n)?Math.max(0,Math.floor(n)):t}function qn(e,t,n){return Math.min(n,Math.max(t,e))}function zA(){return qn(Zn("VITE_KRC_HOLDINGS_TTL_MS",IA),5e3,15e3)}function ph(){return qn(Zn("VITE_KRC_PRICE_TTL_MS",CA),1e3,2e3)}function mh(){return qn(Zn("VITE_KRC_CHAIN_TTL_MS",_A),15e3,6e4)}function hh(){return qn(Zn("VITE_KRC_CANDLES_TTL_MS",NA),15e3,6e4)}function UA(e){const t=Zn("VITE_KRC_CANDLE_FETCH_LIMIT",bA);return qn(e==="krc721"?Zn("VITE_KRC721_CANDLE_FETCH_LIMIT",Zn("VITE_KRC_CANDLE_FETCH_LIMIT",PA)):t,30,2400)}function BA(e){const t=Zn("VITE_KRC_CANDLE_POINT_MAX",jA);return qn(e==="krc721"?Zn("VITE_KRC721_CANDLE_POINT_MAX",Zn("VITE_KRC_CANDLE_POINT_MAX",RA)):t,20,2400)}function pp(e){return e==="testnet-10"?"TN10":e==="testnet-11"?"TN11":e==="testnet-12"?"TN12":"MAINNET"}function mp(e){const t=pp(e),n=Pr("VITE_KRC_INDEXER_ENDPOINTS"),r=Pr(`VITE_KRC_INDEXER_${t}_ENDPOINTS`),o=Pr(`VITE_KASPA_KASPLEX_${t}_API_ENDPOINTS`),i=Pr("VITE_KASPA_KASPLEX_API_ENDPOINTS");return[...new Set([...n,...r,...o,...i])]}function D1(e){const t=pp(e),n=Pr("VITE_KRC_MARKET_ENDPOINTS"),r=Pr(`VITE_KRC_MARKET_${t}_ENDPOINTS`),o=mp(e);return[...new Set([...n,...r,...o])]}function FA(e){const t=pp(e),n=Pr("VITE_KRC_CANDLES_ENDPOINTS"),r=Pr(`VITE_KRC_CANDLES_${t}_ENDPOINTS`),o=D1(e);return[...new Set([...n,...r,...o])]}function hp(e){let t=dh.get(e);return t||(t={score:100,failures:0,backoffUntil:0},dh.set(e,t)),t}function lc(e){const t=Date.now(),n=[],r=[];for(const o of e){const i=hp(o);i.backoffUntil>t?r.push({endpoint:o,score:i.score,backoffUntil:i.backoffUntil}):n.push({endpoint:o,score:i.score})}return n.sort((o,i)=>i.score-o.score),n.length>0?n.map(o=>o.endpoint):(r.sort((o,i)=>o.backoffUntil-i.backoffUntil||i.score-o.score),r.slice(0,1).map(o=>o.endpoint))}function $A(e,t){const n=hp(e),r=Math.min(25,t/200);n.score=qn(Math.round(n.score+10-r),0,200),n.failures=0,n.backoffUntil=0}function KA(e,t=!1){const n=hp(e);n.failures+=1,n.score=qn(n.score-(t?30:18),0,200);const r=Math.min(3e4,1500*Math.pow(2,Math.max(0,n.failures-1)));n.backoffUntil=Date.now()+r}function ac(e,t){const n=e.get(t);return n?n.expiresAt<=Date.now()?(e.delete(t),null):(n.usedAt=Date.now(),e.delete(t),e.set(t,n),n.value):null}function po(e,t,n,r,o){for(e.delete(t),e.set(t,{value:n,expiresAt:Date.now()+r,usedAt:Date.now()});e.size>o;){const i=e.keys().next().value;if(typeof i!="string")break;e.delete(i)}}function Jo(e){return e&&typeof e=="object"&&!Array.isArray(e)?e:null}function M1(e,t){for(const n of t){const r=e[n];if(typeof r=="string"&&r.trim())return r.trim()}return""}function Mt(e,t){for(const n of t){const r=e[n],o=typeof r=="number"?r:Number(r);if(Number.isFinite(o))return o}return null}function HA(e){const t=String(e||"").trim();return t?/^0x[a-fA-F0-9]{40}$/.test(t)?!0:/^[a-zA-Z0-9:_-]{24,}$/.test(t):!1}function Kr(e){return String(e||"").trim().toLowerCase()}function WA(e,t="1"){if(typeof e=="bigint")return e>0n?e.toString():null;if(typeof e=="number")return!Number.isFinite(e)||e<=0?null:Math.floor(e).toString();if(typeof e=="string"){const n=e.trim();if(!n)return null;if(/^\d+$/.test(n))try{const r=BigInt(n);return r>0n?r.toString():null}catch{return null}if(/^\d+(\.\d+)?$/.test(n)){const r=Number(n);if(Number.isFinite(r)&&r>0)return Math.floor(r).toString()}}return t}function gp(e){const t=[],n=Jo(e);if(!n)return t;t.push(n);for(const r of["data","result","items","tokens","holdings","balances","collections"]){const o=n[r];if(Array.isArray(o))for(const i of o){const l=Jo(i);l&&t.push(l)}else{const i=Jo(o);i&&t.push(i)}}return t}function VA(e){const t=new AbortController,n=setTimeout(()=>t.abort(),DA);return fetch(e,{method:"GET",signal:t.signal}).finally(()=>clearTimeout(n))}function GA(e,t){const n=encodeURIComponent(e);return t==="krc721"?[`/addresses/${n}/krc721/tokens`,`/address/${n}/krc721/tokens`,`/krc721/address/${n}/tokens`,`/krc721/holders/${n}`,`/v1/addresses/${n}/krc721/tokens`]:[`/addresses/${n}/krc20/balances`,`/address/${n}/krc20/balances`,`/krc20/address/${n}/balances`,`/krc20/holders/${n}`,`/v1/addresses/${n}/krc20/balances`]}function XA(e,t){const n=encodeURIComponent(e);return t==="krc721"?[`/krc721/collections/${n}/floor`,`/krc721/floor/${n}`,`/market/krc721/${n}`,`/v1/krc721/${n}/floor`]:[`/krc20/tokens/${n}/price`,`/krc20/price/${n}`,`/market/krc20/${n}`,`/v1/krc20/${n}/price`]}function YA(e,t){const n=encodeURIComponent(e);return t==="krc721"?[`/krc721/collections/${n}/stats`,`/krc721/stats/${n}`,`/v1/krc721/${n}/stats`,`/krc721/collections/${n}`]:[`/krc20/tokens/${n}/stats`,`/krc20/stats/${n}`,`/v1/krc20/${n}/stats`,`/krc20/tokens/${n}`]}function QA(e,t){const n=encodeURIComponent(e),r=UA(t);return t==="krc721"?[`/krc721/collections/${n}/candles?interval=1m&limit=${r}`,`/krc721/candles/${n}?interval=1m&limit=${r}`,`/market/krc721/${n}/candles?interval=1m&limit=${r}`]:[`/krc20/tokens/${n}/candles?interval=1m&limit=${r}`,`/krc20/candles/${n}?interval=1m&limit=${r}`,`/market/krc20/${n}/candles?interval=1m&limit=${r}`]}function JA(e,t){const n=new Map,r=gp(e);for(const o of r){const i=M1(o,["tokenAddress","address","contractAddress","contract","id","assetId","collectionAddress"]);if(!HA(i))continue;const l=String(o.standard??o.type??"").toLowerCase().includes("721")?"krc721":t,c=WA(o.balance??o.amount??o.quantity??o.tokenBalance??o.rawBalance??o.count,l==="krc721"?"1":null);if(!c)continue;const u=`${l}|${Kr(i)}`,d=n.get(u);if(!d){n.set(u,{address:i,standard:l,balanceRaw:c});continue}try{const f=(BigInt(d.balanceRaw)+BigInt(c)).toString();n.set(u,{...d,balanceRaw:f})}catch{n.set(u,{...d,balanceRaw:c})}}return[...n.values()]}async function cc(e,t,n){for(const r of t){const o=`${e}${r}`,i=Date.now();try{const l=await VA(o);if(!l.ok)continue;const c=await l.json().catch(()=>null);if(!c)continue;const u=n(c);if(u===null)continue;return $A(e,Date.now()-i),u}catch(l){const c=l instanceof Error&&l.name==="AbortError";KA(e,c)}}return null}function ZA(e,t){try{const n=BigInt(e),r=10n**BigInt(Math.max(0,t)),o=n/r,i=n%r,l=i.toString().padStart(t,"0").slice(0,6).replace(/0+$/,""),c=l?`${o.toString()}.${l}`:o.toString(),u=Number(o)+Number(i)/Number(r);return{display:c,approx:Number.isFinite(u)?u:0}}catch{return{display:e,approx:0}}}function qA(e,t,n){const r=Date.now(),o=gp(e);for(const i of o){const l=Mt(i,["priceUsd","usdPrice","price","floorPriceUsd","floorPrice"]);if(!Number.isFinite(l))continue;const c=Mt(i,["change24hPct","change24h","priceChange24hPct"]);return{priceUsd:Number(l),change24hPct:Number.isFinite(c)?Number(c):t==="krc721"?null:0,updatedAt:r,source:n}}return null}function eI(e,t){const n=Date.now(),r=gp(e)[0];if(!r)return null;const o=Mt(r,["holders","holderCount"]),i=Mt(r,["owners","ownerCount","uniqueOwners"]),l=M1(r,["supply","totalSupply","circulatingSupply"]),c=Mt(r,["txCount24h","transactions24h","tx24h"]),u=Mt(r,["sales24h","salesCount24h","trades24h"]),d=Mt(r,["listedCount","listed","listings","activeListings"]),f=Mt(r,["collectionItems","items","itemCount"]),m=Mt(r,["volume24hUsd","volumeUsd24h","volume24h"]),h=Mt(r,["floorPriceUsd","floorPrice"]),y=Mt(r,["floorChange24hPct","floor24hChangePct","floorChangePct24h","floorChange24h"]),E=Mt(r,["marketCapUsd","marketCap","fdvUsd","fullyDilutedValueUsd"]);return o===null&&i===null&&!l&&c===null&&u===null&&d===null&&f===null&&m===null&&h===null&&y===null&&E===null?null:{holders:Number.isFinite(o)?Number(o):null,owners:Number.isFinite(i)?Number(i):null,supply:l||null,txCount24h:Number.isFinite(c)?Number(c):null,sales24h:Number.isFinite(u)?Number(u):null,listedCount:Number.isFinite(d)?Number(d):null,collectionItems:Number.isFinite(f)?Number(f):null,volume24hUsd:Number.isFinite(m)?Number(m):null,floorPriceUsd:Number.isFinite(h)?Number(h):null,floorChange24hPct:Number.isFinite(y)?Number(y):null,marketCapUsd:Number.isFinite(E)?Number(E):null,updatedAt:n,source:t}}function tI(e,t){const n=[],r=o=>{const i=Mt(o,["ts","timestamp","time","t"]),l=Mt(o,["close","priceUsd","price","floorPriceUsd","value"]),c=Mt(o,["volumeUsd","volume","quoteVolumeUsd","volUsd","v"]);!Number.isFinite(i)||!Number.isFinite(l)||n.push({ts:Math.floor(Number(i)),valueUsd:Number(l),volumeUsd:Number.isFinite(c)?Number(c):null})};if(Array.isArray(e))for(const o of e){const i=Jo(o);i&&r(i)}else{const o=Jo(e);if(!o)return[];for(const i of["candles","data","items","result"]){const l=o[i];if(Array.isArray(l))for(const c of l){const u=Jo(c);u&&r(u)}}}return n.sort((o,i)=>o.ts-i.ts),n.slice(-BA(t))}async function gh(e,t,n){const r=lc(mp(t));if(r.length===0)return[];for(const o of r){const i=await cc(o,GA(e,n),l=>{const c=JA(l,n);return c.length>0?c:null});if(i&&i.length>0)return i}return[]}async function nI(e,t,n){const r=`${n}|${t}|${Kr(e)}`,o=ac(iu,r);if(o!==null)return o;const i=lc(D1(n));for(const l of i){const c=await cc(l,XA(e,t),u=>qA(u,t,l));if(c)return po(iu,r,c,ph(),1024),c}return po(iu,r,null,ph(),1024),null}async function rI(e,t,n){const r=`${n}|${t}|${Kr(e)}`,o=ac(su,r);if(o!==null)return o;const i=lc(mp(n));for(const l of i){const c=await cc(l,YA(e,t),u=>eI(u,l));if(c)return po(su,r,c,mh(),512),c}return po(su,r,null,mh(),512),null}async function oI(e,t,n,r){const o=`${n}|${t}|${Kr(e)}`,i=ac(lu,o);if(i!==null)return i;const l=lc(FA(n));for(const f of l){const m=await cc(f,QA(e,t),h=>{const y=tI(h,t);return y.length>0?y:null});if(m&&m.length>0)return po(lu,o,m,hh(),256),m}const c=Date.now(),u=r&&r>0?r:1,d=[{ts:c-6e4,valueUsd:u,volumeUsd:0},{ts:c,valueUsd:u,volumeUsd:0}];return po(lu,o,d,hh(),256),d}async function iI(e,t){const n=`${t}|${Kr(e)}`,r=ac(fh,n);if(r!==null)return r;const[o,i]=await Promise.all([gh(e,t,"krc20"),gh(e,t,"krc721")]),l=new Map;for(const u of[...o,...i]){const d=`${u.standard}|${Kr(u.address)}`,f=l.get(d);if(!f){l.set(d,u);continue}try{l.set(d,{...f,balanceRaw:(BigInt(f.balanceRaw)+BigInt(u.balanceRaw)).toString()})}catch{l.set(d,u)}}const c=[...l.values()].slice(0,MA);return po(fh,n,c,zA(),128),c}async function sI(e,t){const n=[],r=[...e];return await Promise.all(Array.from({length:Math.min(t,r.length)},async()=>{for(;r.length;)n.push(await r.shift()())})),n}async function lI(e,t){const n=String(e||"").trim();if(!n)return[];const r=await iI(n,t);return r.length===0?[]:(await sI(r.map(i=>async()=>{try{const l=await sc(i.address,i.standard,t),c=await nI(l.address,l.standard,t),u=await rI(l.address,l.standard,t),d=await oI(l.address,l.standard,t,(c==null?void 0:c.priceUsd)??(u==null?void 0:u.floorPriceUsd)??null),f=ZA(i.balanceRaw,l.decimals),m=(c==null?void 0:c.priceUsd)!=null?f.approx*c.priceUsd:null;return{key:`${l.standard}|${Kr(l.address)}`,token:l,standard:l.standard,balanceRaw:i.balanceRaw,balanceDisplay:f.display,balanceApprox:f.approx,market:c,chain:u,candles:d,valueUsd:m,updatedAt:Date.now()}}catch{return null}}),4)).filter(i=>i!==null).sort((i,l)=>{const c=i.valueUsd??-1,u=l.valueUsd??-1;return c!==u?u-c:l.balanceApprox-i.balanceApprox})}function z1(){var e;return typeof chrome<"u"&&((e=chrome.storage)!=null&&e.session)?chrome.storage.session:null}async function U1(){const e=z1();if(!e)return{};const t=await e.get(Pd),n=t==null?void 0:t[Pd];return!n||typeof n!="object"?{}:n}async function aI(e){const t=z1();t&&await t.set({[Pd]:e})}function B1(e,t){return`${t}|${Kr(e)}`}async function cI(e,t){const n=B1(e,t),o=(await U1())[n];return!o||Date.now()-o.updatedAt>LA?null:Array.isArray(o.entries)?o.entries:null}async function uI(e,t,n){const r=B1(e,t),o=await U1();o[r]={updatedAt:Date.now(),entries:n};const i=Object.entries(o).sort((l,c)=>c[1].updatedAt-l[1].updatedAt).slice(0,OA);await aI(Object.fromEntries(i))}function dI(e,t){const n=Math.max(2,Math.floor(t));if(e.length<=n)return e;const r=[];r.push(e[0]);const o=n-2,l=(e.length-2)/o;let c=0;for(let u=0;u<o;u+=1){const d=1+Math.floor(u*l),f=Math.min(e.length-2,Math.max(c+1,d));r.push(e[f]),c=f}return r.push(e[e.length-1]),r}const fI={default:a.border,accent:a.accent,warn:a.warn,danger:a.danger,purple:a.purple,success:a.ok},pI={default:"rgba(143,160,181,0.08)",accent:"rgba(57,221,182,0.12)",warn:"rgba(247,178,103,0.12)",danger:"rgba(255,93,122,0.12)",purple:"rgba(143,123,255,0.12)",success:"rgba(57,221,182,0.1)"},no={padding:"13px 15px 15px",display:"flex",flexDirection:"column",gap:11,minWidth:0};function fi(){return{backgroundColor:a.bg,backgroundImage:["radial-gradient(120% 95% at 50% -8%, rgba(57,221,182,0.18) 0%, rgba(57,221,182,0.05) 40%, transparent 72%)","radial-gradient(88% 86% at 92% 100%, rgba(57,221,182,0.12) 0%, transparent 70%)","radial-gradient(80% 90% at 8% 88%, rgba(23,64,74,0.3) 0%, transparent 74%)","linear-gradient(165deg, #0b141f 0%, #070e16 52%, #05090f 100%)","repeating-linear-gradient(0deg, transparent 0px, transparent 31px, rgba(57,221,182,0.06) 32px)","repeating-linear-gradient(90deg, transparent 0px, transparent 31px, rgba(57,221,182,0.05) 32px)"].join(", "),backgroundSize:"auto, auto, auto, auto, 32px 32px, 32px 32px",backgroundPosition:"center, center, center, center, center, center"}}function St(e="default",t=!1){const n=fI[e],r=pI[e];return{background:"linear-gradient(155deg, rgba(11,17,24,0.92) 0%, rgba(8,13,20,0.86) 100%)",border:`1px solid ${e==="default"?a.border:`${n}32`}`,borderRadius:12,padding:t?"10px 12px":"12px 14px",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.04), 0 10px 22px rgba(0,0,0,0.22)",position:"relative",overflow:"hidden",minWidth:0,overflowWrap:"anywhere",backgroundImage:[`radial-gradient(circle at 100% 0%, ${r}, transparent 46%)`,"linear-gradient(155deg, rgba(11,17,24,0.92) 0%, rgba(8,13,20,0.86) 100%)"].join(", ")}}function J(){return{background:"linear-gradient(180deg, rgba(5,7,10,0.62), rgba(7,11,16,0.72))",border:`1px solid ${a.border}`,borderRadius:10,padding:"10px 12px",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.02)",minWidth:0,overflowWrap:"anywhere"}}const cn={fontSize:8,color:a.dim,letterSpacing:"0.14em",fontWeight:700,...L},lr={fontSize:10,color:a.text,fontWeight:700,letterSpacing:"0.08em",...L};function F1(e=1){return{height:1,background:`rgba(33,48,67,${.9*e})`}}function V(e=a.dim,t=!1){return{background:t?"linear-gradient(180deg, rgba(14,22,32,0.9), rgba(9,14,20,0.9))":"rgba(16,25,35,0.55)",border:`1px solid ${e===a.dim?a.border:`${e}40`}`,borderRadius:8,color:e,cursor:"pointer",fontSize:10,fontWeight:700,letterSpacing:"0.08em",...L,boxShadow:t?"0 6px 14px rgba(0,0,0,0.18)":void 0,whiteSpace:"normal",lineHeight:1.2,textAlign:"center"}}function Ir(e=!0){return{background:e?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:"rgba(33,48,67,0.55)",color:e?"#04110E":a.dim,border:"none",borderRadius:8,cursor:e?"pointer":"not-allowed",fontSize:10,fontWeight:700,letterSpacing:"0.08em",...L,boxShadow:e?"0 8px 18px rgba(57,221,182,0.16)":void 0,whiteSpace:"normal",lineHeight:1.2,textAlign:"center"}}function $1(e=!1){return{width:"100%",boxSizing:"border-box",background:"linear-gradient(180deg, rgba(8,13,20,0.82), rgba(9,14,21,0.9))",border:`1px solid ${e?a.danger:a.border}`,borderRadius:8,padding:"9px 11px",color:a.text,fontSize:10,...L,outline:"none",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.02)",minWidth:0}}const yh={mainnet:"https://explorer.kaspa.org","testnet-10":"https://explorer-tn10.kaspa.org","testnet-11":"https://explorer-tn11.kaspa.org","testnet-12":"https://explorer-tn12.kaspa.org"},au=900,mI=1e3;var $h;const Zo=(($h=import.meta)==null?void 0:$h.env)??{};function K1(e,t){const n=Number(Zo==null?void 0:Zo[e]);return Number.isFinite(n)?Math.floor(n):t}function hI(e,t){const n=String((Zo==null?void 0:Zo[e])??"").trim();if(!n)return t;const r=[...new Set(n.split(/[,\s]+/).map(o=>Number(o)).filter(o=>Number.isInteger(o)&&o>=2).map(o=>Math.floor(o)))];return r.length>0?r:t}const jd=hI("VITE_KRC721_CHART_WINDOWS",[120,360,720]),cu=(()=>{const e=K1("VITE_KRC721_CHART_DEFAULT_WINDOW",jd[0]),t=[...jd].sort((n,r)=>n-r);for(const n of t)if(n>=e)return n;return t[t.length-1]})(),gI=Math.min(1200,Math.max(40,K1("VITE_KRC721_CHART_RENDER_MAX_POINTS",220)));function yI({address:e,balance:t,usdPrice:n,network:r,hideBalances:o=!1,mode:i,modeRequestId:l,onModeConsumed:c,onBalanceInvalidated:u}){var bi,T,P,ne,at,sn,Gt,yr,xo,ol,Pi,il,yp,Sp,xp,vp;const[d,f]=x.useState("idle"),[m,h]=x.useState(!1),[y,E]=x.useState(""),[w,k]=x.useState(""),[p,g]=x.useState(null),[S,v]=x.useState([]),[C,_]=x.useState(null),[j,D]=x.useState(null),[Y,B]=x.useState(!1),[me,Q]=x.useState(null),[ce,ze]=x.useState(null),[ke,oe]=x.useState([]),[ge,M]=x.useState(!1),[U,H]=x.useState(null),[X,ie]=x.useState(null),[Ae,ve]=x.useState(0),[Z,we]=x.useState(null),[K,ye]=x.useState(n),[Le,de]=x.useState([]),[Ke,dt]=x.useState(null),[He,Ye]=x.useState(null),[wt,Je]=x.useState(300),[st,ft]=x.useState(0),[pt,Se]=x.useState(null),[lt,Pe]=x.useState(""),[N,A]=x.useState("krc20"),[te,se]=x.useState(null),[Ie,mt]=x.useState(!1),[kn,Et]=x.useState(null),[Tt,q]=x.useState([]),[_e,kt]=x.useState(!1),[Kt,Ht]=x.useState(null),[Wt,ue]=x.useState(null),[Ee,tn]=x.useState("floor"),[We,gn]=x.useState(cu),[Mn,b]=x.useState(null);x.useEffect(()=>{i&&(we(null),ue(null),i==="send"?(h(!1),f("form"),g(null),v([]),D(null),_(null)):(h(!0),f("idle")),c==null||c())},[i,l,c]),x.useEffect(()=>{let I=!1;return(async()=>{if(!m||!e){Q(null),ze(null);return}ze(null);try{const xe=await Ws.toDataURL(e,{errorCorrectionLevel:"M",margin:1,width:220,color:{dark:"#39DDB6",light:"#0A1118"}});if(I)return;Q(xe)}catch(xe){if(I)return;Q(null),ze(xe instanceof Error?xe.message:"Failed to generate QR code.")}})().catch(()=>{}),()=>{I=!0}},[m,e]),x.useEffect(()=>{let I=!0;const G=async(gt=!1)=>{if(!e){if(!I)return;oe([]),H(null),ie(null),M(!1);return}if(I){M(!0),gt&&H(null);try{const Ot=gt?await Wf(e,r):await Vf(e,r);if(!I)return;const ln=[...Ot.utxos].sort((Dt,vo)=>Dt.amount===vo.amount?0:Dt.amount>vo.amount?-1:1);oe(ln),ie(Date.now()),H(null)}catch(Ot){if(!I)return;H(Ot instanceof Error?Ot.message:"Failed to load UTXOs.")}finally{I&&M(!1)}}};G(!0).catch(()=>{});const xe=window.setInterval(()=>{G(!1).catch(()=>{})},25e3);return()=>{I=!1,clearInterval(xe)}},[e,r,Ae]),x.useEffect(()=>{n<=0||(ye(n),de(I=>{const G=Date.now();return[...I,{ts:G,price:n}].slice(-au)}),dt(Date.now()))},[n]),x.useEffect(()=>{if(Z!=="KAS")return;let I=!0;const G=async()=>{try{const[gt,Ot]=await Promise.all([A0(r),k0(r)]);if(!I)return;const ln=Date.now();gt>0&&ye(gt),de(Dt=>{const vo=Dt.length>0?Dt[Dt.length-1].price:0,sl=gt>0?gt:vo;return sl<=0?Dt:[...Dt,{ts:ln,price:sl}].slice(-au)}),dt(ln),Ye(gt>0?null:"Price endpoint stale  plotting last known value."),Ot!=null&&Ot.virtualDaaScore&&Se(Ot.virtualDaaScore)}catch(gt){if(!I)return;Ye(gt instanceof Error?gt.message:"Live feed unavailable.")}};G().catch(()=>{});const xe=window.setInterval(()=>{G().catch(()=>{})},mI);return()=>{I=!1,clearInterval(xe)}},[r,Z,st]),x.useEffect(()=>{Z&&(Pe(""),se(null),Et(null))},[Z,r]),x.useEffect(()=>{let I=!0;const G=String(e||"").trim();if(!G){q([]),Ht(null),kt(!1);return}chrome.runtime.sendMessage({type:"FORGEOS_PREFETCH_KRC"}).catch(()=>{});const xe=async(Ot=!0)=>{if(I){kt(!0),Ot||Ht(null);try{if(Ot){const Dt=await cI(G,r);I&&Dt&&Dt.length>0&&q(Dt)}const ln=await lI(G,r);if(!I)return;q(ln),Ht(null),await uI(G,r,ln)}catch(ln){if(!I)return;Ht(ln instanceof Error?ln.message:"Failed to sync KRC portfolio.")}finally{I&&kt(!1)}}};xe(!0).catch(()=>{});const gt=window.setInterval(()=>{xe(!1).catch(()=>{})},2500);return()=>{I=!1,clearInterval(gt)}},[e,r]),x.useEffect(()=>{ue(I=>I?Tt.find(xe=>xe.key===I.key)??null:null)},[Tt]);const z=$r(),ee=!!(z!=null&&z.mnemonic),nt=r==="mainnet"?"kaspa:":"kaspatest:",jt=Ps(y)&&y.toLowerCase().startsWith(nt),Rt=parseFloat(w),zn=Rt>0&&(t===null||Rt<=t),Lt=jt&&zn,rt=async()=>{if(!e||!Lt)return;f("building"),v([]),D(null);const I=cs("manual_send");b(I);try{const G=await MT({fromAddress:e,network:r,recipients:[{address:y.trim(),amountKas:Rt}]},{onUpdate:({stage:xe})=>{xe==="validate"&&f("dry_run")},telemetry:{channel:"manual",runId:I,context:{surface:"wallet_tab_send",to:y.trim(),amountKas:Rt}}});g(G),f("confirm")}catch(G){const xe=G instanceof Error?G.message:String(G);G instanceof Kn&&G.stage==="validate"&&G.details.length>0&&v(G.details),D(xe==="INSUFFICIENT_FUNDS"?"Insufficient balance including fees.":xe==="COVENANT_ONLY_FUNDS"?"Funds are currently locked in covenant outputs. Standard send only spends standard UTXOs.":`Build failed: ${xe}`),f("error")}},xi=async()=>{if(!(!p||!ee)){f("signing");try{await zT(p,{awaitConfirmation:!0,telemetry:{channel:"manual",runId:Mn||cs("manual_send"),context:{surface:"wallet_tab_send",to:y.trim(),amountKas:Rt}},onUpdate:async({stage:I,tx:G})=>{g(G),await fo(G),(I==="broadcast"||I==="reconcile")&&f("broadcast"),G.state==="CONFIRMED"&&(_(G.txId??null),f("done"),ve(xe=>xe+1),u==null||u()),G.state==="FAILED"&&(D(G.error??"Transaction failed."),f("error"))}})}catch(I){const G=I instanceof Error?I.message:"Transaction timed out awaiting confirmation.";D(G),f("error")}}},yo=async()=>{p&&await fo({...p,state:"CANCELLED"}),Un()},Un=()=>{f("idle"),g(null),v([]),D(null),_(null),b(null)},R=async()=>{if(e)try{await navigator.clipboard.writeText(e),B(!0),setTimeout(()=>B(!1),2e3)}catch{}},W=I=>{ue(null),we(I)},he=I=>{we(null),ue(I),tn("floor"),gn(cu)},Ne=()=>{we(null),ue(null),tn("floor"),gn(cu)},Oe=async()=>{const I=lt.trim();if(!I){Et("Paste a token address or search by symbol.");return}mt(!0),Et(null);try{const xe=await O1(I,N,r)??await sc(I,N,r);se(xe)}catch(G){se(null),Et(G instanceof Error?G.message:"Metadata lookup failed.")}finally{mt(!1)}},Ze=async()=>{var I;if(!((I=navigator==null?void 0:navigator.clipboard)!=null&&I.readText)){Et("Clipboard read is unavailable in this browser.");return}try{const xe=(await navigator.clipboard.readText()).trim();if(!xe){Et("Clipboard is empty.");return}Pe(xe),Et(null),se(null)}catch{Et("Failed to read clipboard.")}},Ve=[...H0()].sort((I,G)=>I.id==="KAS"?-1:G.id==="KAS"?1:0),ht={KAS:"../icons/kaspa-logo.png",USDT:"../icons/usdt.png",USDC:"../icons/usdc.png"},An={KAS:t??0,USDT:0,USDC:0,ZRX:0},vi=yh[r]??yh.mainnet,Ys=e?`${vi}/addresses/${e}`:vi,nn=ke.reduce((I,G)=>I+G.amount,0n),wi=to(nn),Ei=ke.length?to(ke[0].amount):0,uc=ke.length?wi/ke.length:0,hr=ke.filter(I=>(I.scriptClass??"standard")==="covenant").length,Qs=ke.length-hr,Ti=X?new Date(X).toLocaleTimeString([],{hour12:!1}):"",Xr=!!(e&&!ge&&!U&&X!==null),dc=Xr?`ON-CHAIN VERIFIED  ${r.toUpperCase()}  ${Ti}`:ge?"VERIFYING ON-CHAIN STATE":"ON-CHAIN VERIFICATION PENDING",Bn=I=>o?"":I,In=(I,G)=>o?" KAS":`${De(I,G)} KAS`,qe=(I,G)=>o?"$":`$${De(I,G)}`,re=Z?Ve.find(I=>I.id===Z)??null:null,$=Wt,Ge=(re==null?void 0:re.id)==="USDT"||(re==null?void 0:re.id)==="USDC",At=!!(re||$),Vt=d!=="idle"||m,It=(Le.length>0?Le:K>0?[{ts:Date.now(),price:K}]:[]).slice(-Math.max(2,wt)),Cn=t??0,fc=Cn*(K>0?K:0),Js=re?An[re.id]??0:0,ki=((bi=$==null?void 0:$.market)==null?void 0:bi.priceUsd)??((T=$==null?void 0:$.chain)==null?void 0:T.floorPriceUsd)??null,Ai=($==null?void 0:$.valueUsd)??null,rn=((P=$==null?void 0:$.market)==null?void 0:P.change24hPct)??((ne=$==null?void 0:$.chain)==null?void 0:ne.floorChange24hPct)??null,Ii=$?$.candles.map(I=>({ts:I.ts,price:$.standard==="krc721"&&Ee==="volume"?Math.max(0,I.volumeUsd??0):I.valueUsd})):[],Ci=($==null?void 0:$.standard)==="krc721"?Ii.slice(-Math.max(2,We)):Ii,Fn=dI(Ci,gI),pc=($==null?void 0:$.standard)==="krc721"?Ee==="volume"?"24H VOLUME TREND":"FLOOR PRICE TREND":"PRICE TREND",mc=($==null?void 0:$.standard)==="krc721"&&Ee==="volume"?"USD VOL":"USD",Zs=Fn.length>0?Math.max(...Fn.map(I=>I.price)):null,qs=Fn.length>0?Math.min(...Fn.map(I=>I.price)):null,on=Ge?It.length>0?It.map(I=>({...I,price:1})):[{ts:Date.now()-6e4,price:1},{ts:Date.now(),price:1}]:It,So=on.length>0?on[0].price:0,hc=on.length>0?on[on.length-1].price:0,_i=So>0?(hc-So)/So*100:0,gc=on.length>0?Math.max(...on.map(I=>I.price)):0,yc=on.length>0?Math.min(...on.map(I=>I.price)):0,Ni=Ge?1:K||n||0,el=Js*Ni,tl=d==="form"||d==="error"||d==="done",Sc=At||m||tl,nl=()=>{if(At){Ne();return}m&&h(!1),d!=="idle"&&tl&&Un()},xc=s.jsxs(s.Fragment,{children:[d==="form"&&s.jsxs("div",{style:Tr(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:lr,children:"SEND KAS"}),s.jsxs("div",{style:{display:"flex",gap:8},children:[t!==null&&s.jsxs("div",{style:{fontSize:8,color:a.dim},children:["Bal: ",In(t,2),n>0?`  ${qe(t*n,2)}`:""]}),s.jsx("button",{onClick:()=>f("idle"),style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...L},children:""})]})]}),!ee&&s.jsx("div",{style:{...J(),fontSize:8,color:a.dim,marginBottom:6,lineHeight:1.4},children:"External wallet: signing opens in Forge-OS."}),s.jsx("input",{value:y,onChange:I=>E(I.target.value),placeholder:`Recipient ${nt}qp`,style:uu(!!(y&&!jt))}),y&&!jt&&s.jsx("div",{style:{fontSize:8,color:a.danger},children:y.toLowerCase().startsWith(nt)?"Invalid Kaspa address":`Must start with "${nt}" on ${r}`}),s.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[s.jsx("input",{value:w,onChange:I=>k(I.target.value),placeholder:"Amount (KAS)",type:"number",min:"0",style:{...uu(!1),paddingRight:48}}),t!==null&&t>0&&s.jsx("button",{onClick:()=>{const I=Math.max(0,t-.01);k(I>0?String(parseFloat(I.toFixed(4))):"")},style:{position:"absolute",right:6,background:`${a.accent}20`,border:`1px solid ${a.accent}50`,borderRadius:4,padding:"2px 6px",color:a.accent,fontSize:8,fontWeight:700,cursor:"pointer",...L,letterSpacing:"0.06em"},children:"MAX"})]}),Rt>0&&n>0&&s.jsxs("div",{style:{fontSize:8,color:a.dim},children:[" ",qe(Rt*n,2)]}),s.jsx("button",{onClick:ee?rt:()=>chrome.tabs.create({url:`https://forge-os.xyz?send=1&to=${encodeURIComponent(y)}&amount=${encodeURIComponent(w)}`}),disabled:!Lt,style:Rl(Lt),children:ee?"PREVIEW SEND ":"OPEN IN FORGE-OS "})]}),(d==="building"||d==="dry_run")&&s.jsx(du,{icon:"",title:d==="building"?"SELECTING INPUTS":"VALIDATING",sub:d==="building"?"Fetching UTXOs and estimating network fee.":"Running 5 security checks.",color:a.accent}),d==="confirm"&&p&&s.jsx(wI,{tx:p,usdPrice:n,onConfirm:xi,onCancel:yo}),d==="signing"&&s.jsx(du,{icon:"",title:"SIGNING",sub:"Deriving key and signing inputs with kaspa-wasm.",color:a.warn}),d==="broadcast"&&s.jsx(du,{icon:"",title:"BROADCASTING",sub:`Polling for confirmation. TxID: ${p!=null&&p.txId?p.txId.slice(0,20)+"":"pending"}`,color:a.accent}),d==="done"&&s.jsxs("div",{style:{...Tr(),background:`${a.ok}0A`,borderColor:`${a.ok}30`},children:[s.jsx("div",{style:{fontSize:10,color:a.ok,fontWeight:700,marginBottom:6},children:" TRANSACTION CONFIRMED"}),C&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:3},children:"Transaction ID"}),s.jsx("div",{style:{fontSize:8,color:a.text,wordBreak:"break-all",marginBottom:8},children:C}),s.jsx("button",{onClick:()=>chrome.tabs.create({url:`${vi}/txs/${C}`}),style:{background:"none",border:"none",color:a.accent,fontSize:8,cursor:"pointer",...L},children:"View on Explorer "})]}),s.jsx("button",{onClick:Un,style:{...Rl(!0),marginTop:10,background:`${a.ok}20`,color:a.ok},children:"DONE"})]}),d==="error"&&s.jsxs("div",{style:{...Tr(),background:a.dLow,borderColor:`${a.danger}40`},children:[s.jsx("div",{style:{fontSize:9,color:a.danger,fontWeight:700,marginBottom:6},children:"TRANSACTION FAILED"}),j&&s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:6,lineHeight:1.5},children:j}),S.map((I,G)=>s.jsxs("div",{style:{fontSize:8,color:a.danger,marginBottom:2},children:[" ",I]},G)),s.jsx("button",{onClick:Un,style:{...Rl(!0),marginTop:8,background:a.dLow,border:`1px solid ${a.danger}50`,color:a.danger},children:"TRY AGAIN"})]}),m&&e&&s.jsxs("div",{style:Tr(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:lr,children:"RECEIVE KAS"}),s.jsx("button",{onClick:()=>h(!1),style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...L},children:""})]}),s.jsxs("div",{style:{...J(),display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,marginBottom:6},children:[s.jsx("div",{style:{fontSize:8,color:Xr?a.ok:a.warn,fontWeight:700,letterSpacing:"0.06em"},children:dc}),s.jsx("button",{onClick:()=>chrome.tabs.create({url:Ys}),style:{...V(a.accent,!0),padding:"4px 7px",fontSize:8,color:a.accent,flexShrink:0},children:"EXPLORER "})]}),s.jsx("div",{style:{...J(),display:"flex",justifyContent:"center",alignItems:"center",minHeight:140,marginBottom:6},children:me?s.jsx("img",{src:me,alt:"Wallet receive QR",style:{width:138,height:138,borderRadius:8,border:`1px solid ${a.border}`}}):s.jsx("div",{style:{fontSize:8,color:ce?a.danger:a.dim},children:ce?"QR ERROR":"GENERATING QR"})}),s.jsx("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.08em"},children:"CONNECTED WALLET ADDRESS"}),s.jsx("div",{style:{...J(),fontSize:8,color:a.dim,lineHeight:1.6,wordBreak:"break-all",marginBottom:6},children:e}),s.jsx("button",{onClick:R,style:{...V(Y?a.ok:a.dim,!0),padding:"7px 8px",color:Y?a.ok:a.dim,width:"100%"},children:Y?" COPIED":"COPY ADDRESS"}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginTop:4},children:"Send KAS to this address from any Kaspa wallet. Funds and UTXO state are verified against live on-chain data."})]})]}),vc=re?s.jsxs("div",{style:Tr(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:lr,children:"TOKEN ANALYTICS"}),s.jsx("button",{onClick:Ne,style:{background:"none",border:"none",color:a.dim,fontSize:9,cursor:"pointer",...L},children:""})]}),s.jsxs("div",{style:{...J(),display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("img",{src:ht[re.id]??ht.KAS,alt:`${re.symbol} logo`,style:{width:32,height:32,borderRadius:"50%",objectFit:"contain"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:700,letterSpacing:"0.05em",...L},children:re.symbol}),s.jsxs("div",{style:{fontSize:8,color:a.dim},children:[re.name,"  ",r.toUpperCase()]})]})]}),s.jsx("div",{style:{...V(re.id==="KAS"||Ge?a.ok:a.warn,!0),padding:"4px 7px",fontSize:8,color:re.id==="KAS"||Ge?a.ok:a.warn},children:re.id==="KAS"?"LIVE FEED":Ge?"STABLE PEG":"METADATA FEED"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:7},children:[s.jsx(vr,{label:re.id==="KAS"||Ge?"LIVE PRICE":"TOKEN STATUS",value:re.id==="KAS"||Ge?qe(Ni,4):re.enabled?"ENABLED":"READ-ONLY",tone:re.id==="KAS"||Ge?a.accent:re.enabled?a.ok:a.warn}),s.jsx(vr,{label:re.id==="KAS"||Ge?"SESSION ":"DECIMALS",value:re.id==="KAS"||Ge?`${o?"":Ge?"0.00%":`${_i>=0?"+":""}${De(_i,2)}%`}`:String(re.decimals),tone:re.id==="KAS"||Ge?_i>=0?a.ok:a.danger:a.text}),s.jsx(vr,{label:re.id==="KAS"||Ge?"BALANCE":"TOKEN ID",value:re.id==="KAS"?In(Cn,4):Ge?`${Bn(De(Js,2))} ${re.symbol}`:re.id,tone:a.text}),s.jsx(vr,{label:re.id==="KAS"||Ge?"USD VALUE":"FEED UPDATE",value:re.id==="KAS"||Ge?qe(re.id==="KAS"?fc:el,2):Ke?new Date(Ke).toLocaleTimeString([],{hour12:!1}):"",tone:re.id==="KAS"||Ge?a.accent:a.dim})]}),s.jsxs("div",{style:J(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[s.jsxs("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em",display:"flex",alignItems:"center",gap:6},children:[s.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:He?a.danger:a.ok,boxShadow:He?`0 0 6px ${a.danger}`:`0 0 6px ${a.ok}`}}),re.id==="KAS"?"REAL-TIME KAS/USD CHART":Ge?"STABLECOIN PEG CHART":"BASE LAYER LIVE CHART"]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[[60,300,au].map(I=>s.jsx("button",{onClick:()=>Je(I),style:{...V(wt===I?a.accent:a.dim,!0),padding:"3px 6px",fontSize:8,color:wt===I?a.accent:a.dim},children:I===60?"1M":I===300?"5M":"15M"},I)),s.jsx("button",{onClick:()=>ft(I=>I+1),style:{...V(a.dim,!0),padding:"3px 6px",fontSize:8,color:a.dim},children:"REFRESH"})]})]}),s.jsx(Sh,{points:on,color:a.accent}),s.jsxs("div",{style:{marginTop:6,display:"flex",justifyContent:"space-between",fontSize:8,color:a.dim},children:[s.jsxs("span",{children:["LOW ",qe(yc,4)]}),s.jsxs("span",{children:["HIGH ",qe(gc,4)]})]}),s.jsxs("div",{style:{marginTop:4,display:"flex",justifyContent:"space-between",fontSize:8,color:a.muted},children:[s.jsx("span",{children:Ke?`updated ${new Date(Ke).toLocaleTimeString([],{hour12:!1})}`:"awaiting feed"}),s.jsxs("span",{children:[on.length," ticks  1s cadence"]})]}),re.id!=="KAS"&&s.jsx("div",{style:{marginTop:6,fontSize:8,color:a.dim,lineHeight:1.45},children:Ge?"Stablecoin chart is pegged to $1.00 in-wallet by design for USDT/USDC analytics.":"Spot chart reflects live Kaspa base feed. Token-specific pricing requires a trusted market route."})]}),s.jsxs("div",{style:J(),children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em",marginBottom:5},children:"ON-CHAIN TECHNICALS"}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Network BPS: ",s.jsx("span",{style:{color:a.accent},children:T0[r]??10})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Virtual DAA: ",s.jsx("span",{style:{color:a.accent},children:pt??""})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Spendable UTXOs: ",s.jsx("span",{style:{color:a.ok},children:Qs}),"  Covenant UTXOs:"," ",s.jsx("span",{style:{color:hr>0?a.warn:a.dim},children:hr})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Largest UTXO: ",s.jsx("span",{style:{color:a.accent},children:In(Ei,4)}),"  Avg UTXO:"," ",s.jsx("span",{style:{color:a.accent},children:In(uc,4)})]}),He&&s.jsxs("div",{style:{fontSize:8,color:a.danger,marginTop:5,lineHeight:1.45},children:["Feed warning: ",He]})]}),re.id!=="KAS"&&s.jsxs("div",{style:J(),children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em",marginBottom:6},children:"KRC TOKEN ADDRESS LOOKUP"}),s.jsxs("div",{style:{display:"flex",gap:6,marginBottom:6},children:[s.jsx("input",{value:lt,onChange:I=>Pe(I.target.value),placeholder:"Search symbol/name or paste token address",style:{...uu(!!kn),flex:1,marginBottom:0}}),s.jsx("button",{onClick:Ze,style:{...V(a.dim,!0),padding:"7px 8px",color:a.dim,fontSize:8},children:"PASTE"})]}),s.jsx("div",{style:{display:"flex",gap:6,marginBottom:6},children:["krc20","krc721"].map(I=>s.jsx("button",{onClick:()=>A(I),style:{...V(N===I?a.accent:a.dim,!0),padding:"6px 8px",color:N===I?a.accent:a.dim,fontSize:8,flex:1},children:I.toUpperCase()},I))}),s.jsx("button",{onClick:Oe,disabled:Ie||!lt.trim(),style:{...Rl(!!lt.trim()&&!Ie),marginTop:0},children:Ie?"RESOLVING":"RESOLVE TOKEN METADATA"}),kn&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:6,lineHeight:1.45},children:kn}),te&&s.jsxs("div",{style:{...J(),marginTop:7},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:5},children:[s.jsx("img",{src:te.logoUri,alt:`${te.symbol} logo`,style:{width:26,height:26,borderRadius:"50%",objectFit:"cover",border:`1px solid ${a.border}`}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:10,color:a.text,fontWeight:700,...L},children:te.symbol}),s.jsx("div",{style:{fontSize:8,color:a.dim},children:te.name})]})]}),s.jsx("div",{style:{fontSize:8,color:a.text,lineHeight:1.5,wordBreak:"break-all"},children:te.address}),s.jsxs("div",{style:{fontSize:8,color:a.dim,marginTop:4},children:["Standard: ",te.standard.toUpperCase(),"  Decimals: ",te.decimals]})]}),s.jsx("div",{style:{fontSize:7,color:a.muted,lineHeight:1.45,marginTop:6},children:"Resolver is env-driven with bounded LRU + endpoint health scoring for low-latency repeated lookups."})]})]}):null,rl=$?s.jsxs("div",{style:Tr(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:lr,children:"KRC TOKEN ANALYTICS"}),s.jsx("button",{onClick:Ne,style:{background:"none",border:"none",color:a.dim,fontSize:9,cursor:"pointer",...L},children:""})]}),s.jsxs("div",{style:{...J(),display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,minWidth:0},children:[s.jsx("img",{src:$.token.logoUri,alt:`${$.token.symbol} logo`,style:{width:32,height:32,borderRadius:"50%",objectFit:"cover",border:`1px solid ${a.border}`}}),s.jsxs("div",{style:{minWidth:0},children:[s.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:700,letterSpacing:"0.05em",...L},children:$.token.symbol}),s.jsxs("div",{style:{fontSize:8,color:a.dim,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:220},children:[$.token.name,"  ",$.standard.toUpperCase(),"  ",r.toUpperCase()]})]})]}),s.jsx("div",{style:{...V(a.ok,!0),padding:"4px 7px",fontSize:8,color:a.ok},children:"LIVE"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:7},children:[s.jsx(vr,{label:"PRICE USD",value:ki!=null?qe(ki,6):"",tone:ki!=null?a.accent:a.dim}),s.jsx(vr,{label:"SESSION ",value:rn!=null?`${o?"":`${rn>=0?"+":""}${De(rn,2)}%`}`:"",tone:rn!=null?rn>=0?a.ok:a.danger:a.dim}),s.jsx(vr,{label:"BALANCE",value:`${Bn($.balanceDisplay)} ${$.token.symbol}`,tone:a.text}),s.jsx(vr,{label:"USD VALUE",value:Ai!=null?qe(Ai,2):"",tone:Ai!=null?a.accent:a.dim})]}),s.jsxs("div",{style:J(),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em"},children:pc}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[$.standard==="krc721"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>tn("floor"),style:{...V(Ee==="floor"?a.accent:a.dim,!0),padding:"3px 6px",fontSize:8,color:Ee==="floor"?a.accent:a.dim},children:"FLOOR"}),s.jsx("button",{onClick:()=>tn("volume"),style:{...V(Ee==="volume"?a.accent:a.dim,!0),padding:"3px 6px",fontSize:8,color:Ee==="volume"?a.accent:a.dim},children:"VOLUME"})]}),s.jsxs("div",{style:{fontSize:8,color:a.muted},children:[Ci.length," pts"]})]})]}),$.standard==="krc721"&&s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:6,marginBottom:6},children:[s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:jd.map(I=>s.jsx("button",{onClick:()=>gn(I),style:{...V(We===I?a.accent:a.dim,!0),padding:"3px 6px",fontSize:8,color:We===I?a.accent:a.dim},children:vI(I)},I))}),s.jsxs("div",{style:{fontSize:8,color:a.muted},children:["render ",Fn.length]})]}),s.jsx(Sh,{points:Fn,color:a.accent}),s.jsxs("div",{style:{marginTop:6,display:"flex",justifyContent:"space-between",fontSize:8,color:a.dim},children:[s.jsxs("span",{children:["LOW ",qs!=null?qe(qs,4):""]}),s.jsxs("span",{children:["HIGH ",Zs!=null?qe(Zs,4):""]})]}),s.jsxs("div",{style:{marginTop:4,fontSize:8,color:a.muted},children:["UNIT: ",mc]})]}),s.jsxs("div",{style:J(),children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em",marginBottom:5},children:"CHAIN INFO"}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55,wordBreak:"break-all"},children:["Address: ",s.jsx("span",{style:{color:a.accent},children:$.token.address})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Holders: ",s.jsx("span",{style:{color:a.accent},children:((at=$.chain)==null?void 0:at.holders)??""})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Owners: ",s.jsx("span",{style:{color:a.accent},children:((sn=$.chain)==null?void 0:sn.owners)??""}),"  Listed:"," ",s.jsx("span",{style:{color:a.accent},children:((Gt=$.chain)==null?void 0:Gt.listedCount)??""})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Supply: ",s.jsx("span",{style:{color:a.accent},children:((yr=$.chain)==null?void 0:yr.supply)??""})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Collection Items: ",s.jsx("span",{style:{color:a.accent},children:((xo=$.chain)==null?void 0:xo.collectionItems)??""}),"  24h Sales:"," ",s.jsx("span",{style:{color:a.accent},children:((ol=$.chain)==null?void 0:ol.sales24h)??""})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["24h Tx: ",s.jsx("span",{style:{color:a.accent},children:((Pi=$.chain)==null?void 0:Pi.txCount24h)??""}),"  24h Volume USD:"," ",s.jsx("span",{style:{color:a.accent},children:((il=$.chain)==null?void 0:il.volume24hUsd)!=null?De($.chain.volume24hUsd,2):""})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Floor USD:"," ",s.jsx("span",{style:{color:a.accent},children:((yp=$.chain)==null?void 0:yp.floorPriceUsd)!=null?De($.chain.floorPriceUsd,4):""})," "," Floor  24h:"," ",s.jsx("span",{style:{color:((Sp=$.chain)==null?void 0:Sp.floorChange24hPct)==null?a.accent:$.chain.floorChange24hPct>=0?a.ok:a.danger},children:((xp=$.chain)==null?void 0:xp.floorChange24hPct)!=null?`${$.chain.floorChange24hPct>=0?"+":""}${De($.chain.floorChange24hPct,2)}%`:""})]}),s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.55},children:["Market Cap USD:"," ",s.jsx("span",{style:{color:a.accent},children:((vp=$.chain)==null?void 0:vp.marketCapUsd)!=null?De($.chain.marketCapUsd,2):""})]})]})]}):null;return s.jsxs("div",{style:{...no,position:"relative"},children:[(Vt||At)&&s.jsx("div",{style:SI,onClick:I=>{I.target===I.currentTarget&&Sc&&nl()},children:s.jsx("div",{style:xI,children:At?$?rl:vc:xc})}),s.jsxs("div",{style:{...St("purple"),background:"linear-gradient(165deg, rgba(10,18,28,0.96) 0%, rgba(7,13,22,0.93) 52%, rgba(5,10,18,0.94) 100%)",border:`1px solid ${a.accent}3A`,boxShadow:"inset 0 1px 0 rgba(255,255,255,0.06), 0 12px 26px rgba(0,0,0,0.28), 0 0 24px rgba(57,221,182,0.09)"},children:[s.jsx("div",{style:{position:"absolute",top:-32,right:-26,width:130,height:130,borderRadius:"50%",background:"radial-gradient(circle, rgba(57,221,182,0.26) 0%, rgba(57,221,182,0.05) 48%, transparent 75%)",pointerEvents:"none"}}),s.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",backgroundImage:"repeating-linear-gradient(0deg, transparent 0px, transparent 23px, rgba(57,221,182,0.05) 24px), repeating-linear-gradient(90deg, transparent 0px, transparent 23px, rgba(57,221,182,0.04) 24px)",opacity:.45}}),s.jsx("div",{style:{marginBottom:11,display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,position:"relative"},children:s.jsx("div",{style:cn,children:"TOKEN BALANCES"})}),Ve.map((I,G)=>{const xe=ht[I.id]??ht.KAS,gt=I.id==="KAS",Ot=gt?48:30,ln=gt?40:20,Dt=An[I.id]??0,vo=I.id==="KAS"?De(Dt,4):De(Dt,2),sl=Bn(vo);return s.jsxs("button",{onClick:()=>W(I.id),style:{width:"100%",border:"none",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",background:"linear-gradient(160deg, rgba(15,24,36,0.86), rgba(8,14,22,0.88))",borderRadius:12,padding:"10px 11px",marginTop:G>0?8:0,opacity:gt||I.enabled?1:.58,position:"relative",zIndex:1},children:[s.jsx("div",{style:{position:"absolute",inset:0,border:`1px solid ${Z===I.id?`${a.accent}75`:a.border}`,borderRadius:12,pointerEvents:"none"}}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx("div",{style:{width:Ot,height:Ot,borderRadius:"50%",flexShrink:0,background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",border:"none",boxShadow:"none",overflow:"hidden"},children:s.jsx("img",{src:xe,alt:`${I.symbol} logo`,style:{width:ln,height:ln,objectFit:"contain",borderRadius:"50%",filter:"none"}})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:11,fontWeight:700,color:a.text,letterSpacing:"0.05em",...L},children:I.symbol}),s.jsx("div",{style:{fontSize:9,color:a.dim,letterSpacing:"0.03em"},children:I.name})]})]}),s.jsxs("div",{style:{textAlign:"right",paddingRight:12},children:[s.jsx("div",{style:{fontSize:18,fontWeight:700,color:a.text},children:sl}),!I.enabled&&I.disabledReason&&s.jsx("div",{style:{fontSize:8,color:a.dim,maxWidth:140,lineHeight:1.35,marginTop:3},children:I.disabledReason})]}),s.jsx("div",{style:{fontSize:10,color:a.dim,...L},children:""})]},I.id)}),_e&&s.jsx("div",{style:{...J(),marginTop:8,fontSize:8,color:a.dim},children:"Syncing KRC holdings"}),Kt&&s.jsxs("div",{style:{...J(),marginTop:8,fontSize:8,color:a.warn,lineHeight:1.45},children:["KRC feed warning: ",Kt]}),Tt.map((I,G)=>s.jsxs("button",{onClick:()=>he(I),style:{width:"100%",border:"none",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",background:"linear-gradient(160deg, rgba(13,22,34,0.9), rgba(7,12,20,0.9))",borderRadius:12,padding:"10px 11px",marginTop:G>0||Ve.length>0?8:0,position:"relative",zIndex:1},children:[s.jsx("div",{style:{position:"absolute",inset:0,border:`1px solid ${(Wt==null?void 0:Wt.key)===I.key?`${a.accent}75`:a.border}`,borderRadius:12,pointerEvents:"none"}}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,minWidth:0},children:[s.jsx("img",{src:I.token.logoUri,alt:`${I.token.symbol} logo`,style:{width:28,height:28,borderRadius:"50%",objectFit:"cover",border:`1px solid ${a.border}`,flexShrink:0}}),s.jsxs("div",{style:{minWidth:0},children:[s.jsx("div",{style:{fontSize:11,fontWeight:700,color:a.text,letterSpacing:"0.05em",...L},children:I.token.symbol}),s.jsxs("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.03em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:190},children:[I.token.name,"  ",I.standard.toUpperCase()]})]})]}),s.jsxs("div",{style:{textAlign:"right",paddingRight:12},children:[s.jsx("div",{style:{fontSize:12,fontWeight:700,color:a.text,...L},children:Bn(I.balanceDisplay)}),s.jsx("div",{style:{fontSize:8,color:I.valueUsd!=null?a.accent:a.dim},children:I.valueUsd!=null?qe(I.valueUsd,2):"no spot"})]}),s.jsx("div",{style:{fontSize:10,color:a.dim,...L},children:""})]},I.key)),e&&s.jsx("div",{style:{marginTop:11,textAlign:"right",position:"relative",zIndex:1},children:s.jsx("button",{onClick:()=>chrome.tabs.create({url:Ys}),style:{...V(a.accent,!0),padding:"6px 9px",fontSize:9,color:a.accent},children:"EXPLORER "})})]}),s.jsxs("div",{style:St("default"),children:[s.jsxs("div",{style:{marginBottom:9,display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[s.jsx("div",{style:cn,children:"UTXO SET"}),s.jsx("button",{onClick:()=>ve(I=>I+1),disabled:ge,style:{...V(a.accent,!0),padding:"5px 8px",fontSize:8,color:a.accent},children:ge?"SYNC":"REFRESH"})]}),s.jsxs("div",{style:{display:"flex",gap:6,marginBottom:9},children:[s.jsxs("div",{style:{...J(),flex:1,padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.08em"},children:"COUNT"}),s.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:700,...L},children:ke.length})]}),s.jsxs("div",{style:{...J(),flex:1,padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.08em"},children:"TOTAL"}),s.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:700,...L},children:In(wi,4)})]}),s.jsxs("div",{style:{...J(),flex:1,padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.08em"},children:"LARGEST"}),s.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:700,...L},children:In(Ei,4)})]})]}),hr>0&&s.jsxs("div",{style:{...J(),fontSize:8,color:a.warn,padding:"8px 10px",marginBottom:8,lineHeight:1.45},children:["Covenant outputs detected: ",hr,". Standard send currently uses spendable UTXOs only (",Qs," available)."]}),ge&&ke.length===0&&s.jsxs("div",{style:{...J(),fontSize:8,color:a.dim,padding:"9px 10px"},children:["Fetching UTXOs from ",r,""]}),!ge&&ke.length===0&&!U&&s.jsxs("div",{style:{...J(),fontSize:8,color:a.dim,padding:"9px 10px"},children:["No UTXOs found for this wallet on ",r,"."]}),U&&s.jsx("div",{style:{...J(),fontSize:8,color:a.danger,padding:"9px 10px",marginBottom:ke.length?8:0},children:U}),ke.length>0&&s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[ke.slice(0,6).map((I,G)=>{const xe=to(I.amount);return s.jsx("div",{style:{...J(),padding:"8px 9px"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[s.jsxs("div",{style:{minWidth:0},children:[s.jsxs("div",{style:{fontSize:8,color:a.dim,...L,letterSpacing:"0.04em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["#",G+1," ",I.txId.slice(0,16),":",I.outputIndex]}),s.jsxs("div",{style:{fontSize:8,color:a.muted,marginTop:2},children:["DAA ",I.blockDaaScore.toString()," ",I.isCoinbase?" COINBASE":""," ",(I.scriptClass??"standard")==="covenant"?" COVENANT":""]})]}),s.jsx("div",{style:{fontSize:11,color:a.accent,fontWeight:700,...L},children:In(xe,4)})]})},`${I.txId}:${I.outputIndex}`)}),ke.length>6&&s.jsxs("div",{style:{fontSize:8,color:a.dim,textAlign:"right",paddingTop:1},children:["+",ke.length-6," more UTXOs"]})]}),s.jsx("div",{style:{...F1(),margin:"9px 0 6px"}}),s.jsxs("div",{style:{fontSize:8,color:a.muted,letterSpacing:"0.06em",textAlign:"right"},children:["UPDATED ",Ti]})]})]})}const Tr=()=>({...St("default"),display:"flex",flexDirection:"column",gap:7}),uu=e=>({...$1(e)}),Rl=e=>({...Ir(e),padding:"9px",width:"100%"}),SI={position:"fixed",inset:0,zIndex:50,background:"rgba(3, 7, 12, 0.78)",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"12px 10px 14px",backdropFilter:"blur(1px)"},xI={width:"100%",maxWidth:420,display:"flex",flexDirection:"column",gap:8,maxHeight:"calc(100vh - 26px)",overflowY:"auto"};function vI(e){return e%60===0?`${e/60}H`:`${e}M`}function vr({label:e,value:t,tone:n}){return s.jsxs("div",{style:{...J(),padding:"7px 8px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.07em",marginBottom:4},children:e}),s.jsx("div",{style:{fontSize:10,color:n,fontWeight:700,...L},children:t})]})}function Sh({points:e,color:t}){if(e.length<2)return s.jsx("div",{style:{height:118,display:"flex",alignItems:"center",justifyContent:"center",color:a.dim,fontSize:8},children:"Waiting for enough live points"});const i=Math.min(...e.map(y=>y.price)),l=Math.max(...e.map(y=>y.price)),c=Math.max(1e-9,l-i),u=340-10*2,d=118-10*2,f=u/Math.max(1,e.length-1),m=e.map((y,E)=>{const w=10+f*E,k=10+(l-y.price)/c*d;return`${E===0?"M":"L"} ${w} ${k}`}).join(" "),h=`${m} L ${10+u} 108 L 10 108 Z`;return s.jsxs("svg",{viewBox:"0 0 340 118",width:"100%",height:118,role:"img","aria-label":"Live token chart",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"wallet-chart-fill",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.35"}),s.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0.02"})]})}),s.jsx("path",{d:h,fill:"url(#wallet-chart-fill)"}),s.jsx("path",{d:m,fill:"none",stroke:t,strokeWidth:2.2,strokeLinecap:"round",strokeLinejoin:"round"})]})}function du({icon:e,title:t,sub:n,color:r}){return s.jsxs("div",{style:{...Tr(),textAlign:"center"},children:[s.jsx("div",{style:{fontSize:20},children:e}),s.jsx("div",{style:{fontSize:9,color:r,fontWeight:700,letterSpacing:"0.1em"},children:t}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:n})]})}function wI({tx:e,usdPrice:t,onConfirm:n,onCancel:r}){var m;const o=e.outputs[0],i=o?to(o.amount):0,l=to(e.fee),c=e.platformFee?to(e.platformFee):0,u=e.changeOutput?to(e.changeOutput.amount):0,d=i+l+c,f=(h,y,E=a.text,w)=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:5},children:[s.jsxs("span",{style:{fontSize:8,color:a.dim},children:[h,w&&s.jsx("span",{style:{fontSize:8,color:a.muted,marginLeft:4},children:w})]}),s.jsx("span",{style:{fontSize:9,color:E,fontWeight:700},children:y})]});return s.jsxs("div",{style:{...Tr(),borderColor:`${a.accent}30`},children:[s.jsx("div",{style:{...lr,color:a.accent},children:"CONFIRM TRANSACTION"}),s.jsxs("div",{style:J(),children:[f("TO",(m=e.outputs[0])!=null&&m.address?e.outputs[0].address.slice(0,22)+"":""),f("AMOUNT",`${De(i,4)} KAS${t>0?`  $${De(i*t,2)}`:""}`),f("NETWORK FEE",`${De(l,8)} KAS`,a.warn," miners"),c>0&&f("PLATFORM FEE",`${De(c,6)} KAS`,a.dim," treasury"),u>0&&f("CHANGE",`${De(u,4)} KAS`,a.dim),s.jsx("div",{style:{...F1(),margin:"6px 0"}}),f("TOTAL COST",`${De(d,4)} KAS`,a.accent)]}),s.jsx("div",{style:{fontSize:8,color:a.warn,lineHeight:1.5},children:" Kaspa transactions are irreversible once confirmed."}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{onClick:r,style:{...V(a.dim,!0),flex:1,padding:"8px 0"},children:"CANCEL"}),s.jsx("button",{onClick:n,style:{...Ir(!0),flex:2,padding:"8px 0"},children:"SIGN & SEND "})]})]})}function fs(e){return e&&typeof e=="object"?e:{}}function nr(...e){for(const t of e)if(typeof t=="string"&&t.trim())return t.trim();return""}function xh(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const t=e.replace(/[$,\s]/g,""),n=Number(t);if(Number.isFinite(n))return n}return 0}function To(e){if(typeof e=="number"&&Number.isFinite(e)&&e>0)return e;if(typeof e=="string"){const t=Number(e);if(Number.isFinite(t)&&t>0)return t}return 0}function EI(e){if(typeof e!="string")return null;const t=e.trim().toLowerCase();return t.startsWith("kaspa:")?"mainnet":t.startsWith("kaspatest:")?"testnet":null}function ps(e,t="unknown"){const n=String(e??"").trim().toLowerCase().replace(/_/g,"-");if(n.includes("mainnet")||n==="main"||n==="livenet")return"mainnet";if(n.includes("testnet-12")||n==="tn12")return"testnet-12";if(n.includes("testnet-11")||n==="tn11")return"testnet-11";if(n.includes("testnet-10")||n==="tn10")return"testnet-10";if(n==="testnet"||n.startsWith("tn")||n.startsWith("testnet"))return"testnet";if(n==="kaspa")return"mainnet";if(n==="kaspatest")return"testnet";const r=String(t??"").trim().toLowerCase().replace(/_/g,"-");return r==="mainnet"?"mainnet":r==="testnet-12"||r==="tn12"?"testnet-12":r==="testnet-10"||r==="tn10"?"testnet-10":r==="testnet-11"||r==="tn11"?"testnet-11":r.startsWith("testnet")||r.startsWith("tn")?"testnet":"unknown"}function TI(e,t){const n=fs(e.wallet),r=fs(e.deployTx),o=fs(e.meta),i=nr(e.network,n.network,r.network,o.network);if(i)return ps(i,"unknown");const l=nr(n.address,e.address,r.from,r.to),c=EI(l);return ps(c||t,"unknown")}function kI(e){const t=e.toLowerCase();return t==="autonomous"||t==="auto"||t==="bot"}function AI(e){const t=e.toLowerCase();return t==="active"||t==="running"||t==="live"}function II(e,t){const n=fs(e),r=fs(n.wallet),o=Date.now(),i=nr(n.agentId,n.id,n.name)||`agent_${o}_${Math.random().toString(36).slice(2,8)}`,l=nr(n.name,n.agentName)||"Agent",c=nr(n.strategyLabel,n.strategy,n.strategyTemplate)||"",u=nr(n.risk)||"",f=nr(n.capitalLimit,n.capital_limit)||null,m=nr(n.execMode,n.mode)||"manual",h=nr(n.status)||"idle",y=TI(n,t),E=xh(n.pnlUsd)||xh(n.pnl),w=Math.max(To(n.updatedAt),To(n.lastActionTime),To(n.lastDecisionTs),To(n.lastSeenAt),To(n.deployedAt),To(r.updatedAt)),k=w>0&&o-w<=5*60*1e3,p=kI(m),g=AI(h)||p||k;return{id:i,name:l,strategy:c,risk:u,capitalLimitKas:f,execMode:m,status:h,isBot:p,isActive:g,pnlUsd:E,network:y,updatedAt:w,raw:n}}function CI(e,t){const n=[];for(const r of e){const o=II(r,t);if(o&&n.push(o),n.length>=64)break}return n.sort((r,o)=>r.isActive!==o.isActive?r.isActive?-1:1:o.updatedAt-r.updatedAt),n}function _I(e,t,n){if(t==="all")return!0;if(t==="mainnet")return e==="mainnet";if(t==="testnet-12")return e==="testnet-12"||e==="testnet";if(t==="testnet-10")return e==="testnet-10"||e==="testnet";if(t==="testnet-11")return e==="testnet-11"||e==="testnet";const r=ps(n,"unknown");return r==="mainnet"?e==="mainnet":r==="testnet-12"?e==="testnet-12"||e==="testnet":r==="testnet-10"?e==="testnet-10"||e==="testnet":r==="testnet-11"?e==="testnet-11"||e==="testnet":r==="testnet"?e==="testnet"||e==="testnet-10"||e==="testnet-11"||e==="testnet-12":!0}function NI(e,t,n,r){return e.filter(o=>!(!_I(o.network,t,r)||n==="bots"&&!o.isBot||n==="manual"&&o.isBot))}function H1(e){return e==="mainnet"?"MAINNET":e==="testnet-12"?"TN12":e==="testnet-10"?"TN10":e==="testnet-11"?"TN11":e==="testnet"?"TESTNET":"UNKNOWN"}const bI="forgeos.session.agents.v2";function fu(e,t){if(!e||e<=0)return"No recent heartbeat";const n=Math.max(0,t-e);return n<1e3?"just now":n<6e4?`${Math.floor(n/1e3)}s ago`:n<36e5?`${Math.floor(n/6e4)}m ago`:n<864e5?`${Math.floor(n/36e5)}h ago`:`${Math.floor(n/864e5)}d ago`}function vh(e,t){if(e==="current"){const n=ps(t,"unknown");return`CURRENT (${H1(n)})`}return e==="mainnet"?"MAINNET":e==="testnet-12"?"TN12":e==="testnet-10"?"TN10":e==="testnet-11"?"TN11":"ALL"}function wh(e){return e==="all"?"ALL MODES":e==="bots"?"BOTS":"MANUAL"}function PI({network:e}){const[t,n]=x.useState([]),[r,o]=x.useState(!0),[i,l]=x.useState("current"),[c,u]=x.useState("all"),[d,f]=x.useState(0),[m,h]=x.useState(Date.now()),y=x.useCallback(async()=>{const k=await Fv();n(CI(k,e)),f(Date.now()),o(!1)},[e]);x.useEffect(()=>{y().catch(()=>o(!1))},[y]),x.useEffect(()=>{const k=setInterval(()=>{y().catch(()=>{}),h(Date.now())},5e3);return()=>clearInterval(k)},[y]),x.useEffect(()=>{const k=(p,g)=>{g==="local"&&bI in p&&y().catch(()=>{})};return chrome.storage.onChanged.addListener(k),()=>chrome.storage.onChanged.removeListener(k)},[y]),x.useEffect(()=>{const k=p=>{(p==null?void 0:p.type)==="FORGEOS_AGENTS_UPDATED"&&y().catch(()=>{})};return chrome.runtime.onMessage.addListener(k),()=>chrome.runtime.onMessage.removeListener(k)},[y]);const E=x.useMemo(()=>NI(t,i,c,e),[t,c,e,i]),w=x.useMemo(()=>{const k=E.length,p=E.filter(v=>v.isBot).length,g=E.filter(v=>v.isActive).length,S=E.reduce((v,C)=>v+C.pnlUsd,0);return{total:k,bots:p,active:g,pnlUsd:S}},[E]);return r?s.jsx("div",{style:{...no,paddingTop:20,fontSize:9,color:a.dim,textAlign:"center"},children:"Loading agents"}):E.length===0?s.jsxs("div",{style:{...no,gap:10},children:[s.jsxs("div",{style:St("default",!0),children:[s.jsx("div",{style:{...cn,marginBottom:7},children:"LIVE AGENT FEED  TESTNET/MAINNET FILTERS"}),s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:7},children:["current","mainnet","testnet-10","testnet-11","testnet-12","all"].map(k=>{const p=k===i;return s.jsx("button",{onClick:()=>l(k),style:{...V(p?a.accent:a.dim),padding:"5px 7px",fontSize:8,background:p?`${a.accent}20`:"rgba(16,25,35,0.45)",borderColor:p?`${a.accent}55`:a.border},children:vh(k,e)},k)})}),s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["all","bots","manual"].map(k=>{const p=k===c;return s.jsx("button",{onClick:()=>u(k),style:{...V(p?a.ok:a.dim),padding:"5px 7px",fontSize:8,background:p?`${a.ok}20`:"rgba(16,25,35,0.45)",borderColor:p?`${a.ok}55`:a.border},children:wh(k)},k)})})]}),s.jsxs("div",{style:{...no,...St("accent"),padding:"20px 18px",textAlign:"center",gap:14,alignItems:"center"},children:[s.jsx("div",{style:{width:52,height:52,borderRadius:"50%",background:`${a.accent}14`,border:`1px solid ${a.accent}35`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,boxShadow:"0 8px 18px rgba(57,221,182,0.12)"},children:""}),s.jsxs("div",{children:[s.jsx("div",{style:{...lr,fontSize:11,marginBottom:6},children:"No Agents In This Filter"}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.6,maxWidth:220},children:"Live refresh runs every 5 seconds. Switch filters or deploy a new bot on Forge-OS."}),s.jsxs("div",{style:{fontSize:8,color:a.muted,marginTop:7},children:["Last sync ",d>0?fu(d,m):"never"]})]}),s.jsx("button",{onClick:()=>chrome.tabs.create({url:`https://forge-os.xyz?network=${encodeURIComponent(e)}`}),style:{background:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,border:"none",borderRadius:10,padding:"10px 20px",color:"#04110E",fontSize:9,fontWeight:700,cursor:"pointer",...L,letterSpacing:"0.1em",boxShadow:"0 8px 18px rgba(57,221,182,0.16)"},children:"OPEN FORGE-OS "})]})]}):s.jsxs("div",{style:{...no,paddingTop:10,gap:8},children:[s.jsxs("div",{style:St("default",!0),children:[s.jsx("div",{style:{...cn,marginBottom:7},children:"LIVE AGENT FEED  TESTNET/MAINNET OPTIONS"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:6,marginBottom:8},children:[s.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",border:`1px solid ${a.border}`,borderRadius:7,padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim},children:"VISIBLE"}),s.jsx("div",{style:{fontSize:10,color:a.text,fontWeight:700},children:w.total})]}),s.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",border:`1px solid ${a.border}`,borderRadius:7,padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim},children:"BOTS"}),s.jsx("div",{style:{fontSize:10,color:a.accent,fontWeight:700},children:w.bots})]}),s.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",border:`1px solid ${a.border}`,borderRadius:7,padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim},children:"ACTIVE"}),s.jsx("div",{style:{fontSize:10,color:a.ok,fontWeight:700},children:w.active})]}),s.jsxs("div",{style:{background:"rgba(16,25,35,0.45)",border:`1px solid ${a.border}`,borderRadius:7,padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim},children:"P&L USD"}),s.jsxs("div",{style:{fontSize:10,color:w.pnlUsd>=0?a.ok:a.danger,fontWeight:700},children:[w.pnlUsd>=0?"+":"-","$",De(Math.abs(w.pnlUsd),2)]})]})]}),s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:7},children:["current","mainnet","testnet-10","testnet-11","testnet-12","all"].map(k=>{const p=k===i;return s.jsx("button",{onClick:()=>l(k),style:{...V(p?a.accent:a.dim),padding:"5px 7px",fontSize:8,background:p?`${a.accent}20`:"rgba(16,25,35,0.45)",borderColor:p?`${a.accent}55`:a.border},children:vh(k,e)},k)})}),s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:["all","bots","manual"].map(k=>{const p=k===c;return s.jsx("button",{onClick:()=>u(k),style:{...V(p?a.ok:a.dim),padding:"5px 7px",fontSize:8,background:p?`${a.ok}20`:"rgba(16,25,35,0.45)",borderColor:p?`${a.ok}55`:a.border},children:wh(k)},k)})})]}),s.jsxs("div",{style:{...cn,marginBottom:2},children:["LIVE UPDATE  LAST SYNC ",d>0?fu(d,m).toUpperCase():"NEVER"]}),E.map(k=>{const p=k.pnlUsd>=0,g=String(k.execMode||"manual").toUpperCase(),S=k.isActive?a.ok:a.warn;return s.jsxs("div",{style:{...St(k.isActive?"accent":"default",!0),borderColor:k.isActive?`${a.accent}40`:a.border,padding:"10px 12px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6,gap:8},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,minWidth:0},children:[s.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:S,flexShrink:0}}),s.jsx("span",{style:{fontSize:10,fontWeight:700,color:a.text,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:k.name})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,flexWrap:"wrap",justifyContent:"flex-end"},children:[s.jsx("span",{style:{fontSize:8,color:a.dim,...L,background:"rgba(16,25,35,0.65)",border:`1px solid ${a.border}`,borderRadius:3,padding:"2px 5px"},children:H1(k.network)}),s.jsx("span",{style:{fontSize:8,color:k.isBot?a.accent:a.dim,...L,background:k.isBot?`${a.accent}18`:"rgba(16,25,35,0.65)",border:`1px solid ${k.isBot?`${a.accent}50`:a.border}`,borderRadius:3,padding:"2px 5px"},children:k.isBot?"BOT":"MANUAL"}),s.jsx("span",{style:{fontSize:8,color:k.isActive?a.ok:a.warn,fontWeight:700,...L,background:k.isActive?`${a.ok}15`:`${a.warn}15`,border:`1px solid ${k.isActive?a.ok:a.warn}30`,borderRadius:3,padding:"2px 5px"},children:g})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"STRATEGY"}),s.jsx("div",{style:{fontSize:8,color:a.text,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:k.strategy})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"P&L (USD)"}),s.jsxs("div",{style:{fontSize:8,color:p?a.ok:a.danger,fontWeight:700},children:[p?"+":"","$",De(Math.abs(k.pnlUsd),2)]})]}),k.capitalLimitKas&&s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"CAPITAL"}),s.jsxs("div",{style:{fontSize:8,color:a.text},children:[k.capitalLimitKas," KAS"]})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"LAST HEARTBEAT"}),s.jsx("div",{style:{fontSize:8,color:a.text},children:fu(k.updatedAt,m)})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:1},children:"RISK"}),s.jsx("div",{style:{fontSize:8,color:a.text},children:String(k.risk||"").toUpperCase()})]})]})]},k.id)}),s.jsx("button",{onClick:()=>chrome.tabs.create({url:`https://forge-os.xyz?network=${encodeURIComponent(e)}`}),style:{...V(a.dim,!0),padding:"8px 10px",marginTop:2},children:"MANAGE LIVE ON FORGE-OS "})]})}const jI=["mainnet","testnet-10","testnet-11","testnet-12"],RI=[{label:"1H",ms:60*60*1e3},{label:"6H",ms:6*60*60*1e3},{label:"24H",ms:24*60*60*1e3}],Eh={manual:"MANUAL",swap:"SWAP",agent:"AGENT"},Th={build:"BUILD",validate:"VALIDATE",sign:"SIGN",broadcast:"BROADCAST",reconcile:"RECONCILE"},LI={local_node_enabled_and_healthy:"Local node selected",local_node_disabled:"Local mode disabled",local_node_unhealthy:"Local RPC unhealthy",local_node_syncing:"Local node syncing (remote fallback)",local_profile_mismatch:"Profile does not match active network",local_rpc_missing:"Local RPC endpoint missing",local_endpoint_missing:"Local RPC endpoint missing"};function kh(e){const t=String(e||"").trim().toLowerCase().replace(/_/g,"-");return t==="testnet-10"||t==="tn10"?"testnet-10":t==="testnet-11"||t==="tn11"?"testnet-11":t==="testnet-12"||t==="tn12"?"testnet-12":"mainnet"}function Ll(e){return e==="mainnet"?"MAINNET":e.toUpperCase().replace("TESTNET-","TN")}function Ol(e){if(!e||!Number.isFinite(e))return"never";const t=Math.max(0,Date.now()-e);return t<1e3?"just now":t<6e4?`${Math.floor(t/1e3)}s ago`:t<36e5?`${Math.floor(t/6e4)}m ago`:`${Math.floor(t/36e5)}h ago`}function OI(e){return e?e.length<=16?e:`${e.slice(0,8)}${e.slice(-6)}`:""}function DI({address:e,network:t,isManagedWallet:n,autoLockMinutes:r,persistUnlockSessionEnabled:o,onAutoLockMinutesChange:i,onPersistUnlockSessionChange:l,onLock:c}){var rl,bi;const[u,d]=x.useState("none"),[f,m]=x.useState([]),[h,y]=x.useState(""),[E,w]=x.useState(null),[k,p]=x.useState(!1),[g,S]=x.useState(""),[v,C]=x.useState(""),[_,j]=x.useState(""),[D,Y]=x.useState(null),[B,me]=x.useState(!1),[Q,ce]=x.useState(!1),[ze,ke]=x.useState(!1),[oe,ge]=x.useState(!1),[M,U]=x.useState("official"),[H,X]=x.useState(""),[ie,Ae]=x.useState(!1),[ve,Z]=x.useState(null),[we,K]=x.useState(!1),[ye,Le]=x.useState({}),[de,Ke]=x.useState(""),[dt,He]=x.useState(!1),[Ye,wt]=x.useState(null),[Je,st]=x.useState(!1),[ft,pt]=x.useState(!1),[Se,lt]=x.useState("mainnet"),[Pe,N]=x.useState(""),[A,te]=x.useState(null),[se,Ie]=x.useState(null),[mt,kn]=x.useState(null),[Et,Tt]=x.useState(""),[q,_e]=x.useState(!1),[kt,Kt]=x.useState(!1),[Ht,Wt]=x.useState(null),[ue,Ee]=x.useState(!1),[tn,We]=x.useState(null),[gn,Mn]=x.useState(!1),[b,z]=x.useState(null),[ee,nt]=x.useState([]),[jt,Rt]=x.useState(null),[zn,Lt]=x.useState(6*60*60*1e3),[rt,xi]=x.useState(()=>rh([],{windowMs:6*60*60*1e3})),[yo,Un]=x.useState([]),[R,W]=x.useState(!0),[he,Ne]=x.useState(!1),[Oe,Ze]=x.useState(null),[Ve,ht]=x.useState(null),An={official:"OFFICIAL",igra:"IGRA",kasplex:"KASPLEX",custom:"CUSTOM",local:"LOCAL NODE"},vi=n?"managed":e?"watch-only":"none",Ys=[{label:"1m",value:1},{label:"15m",value:15},{label:"1h",value:60},{label:"4h",value:240},{label:"Never",value:-1}],nn=x.useMemo(()=>kh(t),[t]),wi=Se===nn,Ei=Pe.trim(),uc=kh((A==null?void 0:A.networkProfile)||Se),hr=((A==null?void 0:A.dataDirBase)||"").trim(),Qs=((A==null?void 0:A.dataDirManagedDefault)||"").trim(),Ti=Ei||Qs,Xr=!!(A!=null&&A.running&&(uc!==Se||Ti.length>0&&hr.length>0&&Ti!==hr)),dc=ew(),Bn=(A==null?void 0:A.connectionState)||"stopped",In=((rl=A==null?void 0:A.sync)==null?void 0:rl.progressPct)??null,qe=x.useMemo(()=>Ew(t,M,H.trim()||null,ye),[t,M,H,ye]),re=rt.sloEligible?rt.sloMet?a.ok:a.danger:a.dim,$=rt.sloEligible?rt.sloMet?"SLO MET":"SLO MISS":"INSUFFICIENT SAMPLES",Ge=x.useMemo(()=>yo.filter(T=>T.ts>=rt.fromTs).slice(0,8),[yo,rt.fromTs]),At=M==="official"||M==="igra"||M==="kasplex"?M:null,Vt=()=>w0(t),gr=(T,P)=>{te((T==null?void 0:T.status)??null),Ie((T==null?void 0:T.backend)??null),typeof(P==null?void 0:P.logs)=="string"&&Tt(P.logs),P&&Object.prototype.hasOwnProperty.call(P,"metrics")&&kn(P.metrics??null),Wt(Date.now())},It=async T=>{const P=(T==null?void 0:T.includeLogs)===!0,ne=(T==null?void 0:T.includeMetrics)!==!1,[at,sn,Gt]=await Promise.all([g0(),P?Mm(40):Promise.resolve(""),ne?rw():Promise.resolve(null)]);return gr(at,{logs:P?sn:void 0,metrics:Gt}),at},Cn=x.useCallback(async()=>{try{const T=await PT(320);Un(T),xi(rh(T,{windowMs:zn})),ht(Date.now()),Ze(null)}catch(T){Ze(T instanceof Error?T.message:"Failed to read telemetry stream.")}},[zn]);x.useEffect(()=>{let T=!0;return Ae(!0),Z(null),K(!1),Promise.all([u0(t),a0(t),Vo(t,"official"),Vo(t,"igra"),Vo(t,"kasplex"),f0(),p0(),Yv(),It({includeLogs:!1,includeMetrics:!0})]).then(([P,ne,at,sn,Gt,yr,xo,ol])=>{if(!T)return;X(P??""),U(ne);const Pi={official:at,igra:sn,kasplex:Gt};Le(Pi);const il=ne==="official"||ne==="igra"||ne==="kasplex"?Pi[ne]||[]:[];Ke(il.join(`
`)),pt(yr),lt(xo),N(ol??"")}).catch(()=>{T&&Z("Failed to load RPC settings.")}).finally(()=>{T&&Ae(!1)}),()=>{T=!1}},[t]),x.useEffect(()=>{let T=!1;return W(!0),Cn().catch(()=>{}).finally(()=>{T||W(!1)}),()=>{T=!0}},[Cn]),x.useEffect(()=>{const T=setInterval(()=>{Cn()},6e3);return()=>clearInterval(T)},[Cn]),x.useEffect(()=>{const T=(P,ne)=>{ne==="local"&&"forgeos.execution.audit.v1"in P&&Cn()};return chrome.storage.onChanged.addListener(T),()=>chrome.storage.onChanged.removeListener(T)},[Cn]),x.useEffect(()=>{let T=!1,P=!1,ne=0;const at=async()=>{if(!(T||P)){P=!0;try{const yr=!kt||ne%3===0;await It({includeLogs:!1,includeMetrics:yr})}catch{}finally{ne+=1,P=!1}}};at();const Gt=setInterval(()=>{at()},kt?15e3:6e3);return()=>{T=!0,clearInterval(Gt)}},[kt]),x.useEffect(()=>{const T=iw(P=>{if((P.type==="connected"||P.type==="heartbeat")&&(Kt(!0),Wt(Date.now())),(P.type==="stream_error"||P.type==="error")&&Kt(!1),P.type==="status"){const ne=P.payload;ne!=null&&ne.status&&gr(ne,{metrics:null})}P.type==="lifecycle"&&It({includeLogs:q,includeMetrics:!0})});return()=>{T(),Kt(!1)}},[q]),x.useEffect(()=>{nt([]),z(null),Rt(null)},[t,M]),x.useEffect(()=>{if(!At){Ke("");return}Ke((ye[At]||[]).join(`
`))},[At,ye]),x.useEffect(()=>{if(!q)return;let T=!1;return Mm(120).then(P=>{T||Tt(P)}).catch(()=>{T||Tt("")}),()=>{T=!0}},[q]);const fc=async T=>{T.preventDefault(),w(null),p(!0);try{const P=await uo(h,r,{persistSession:o});m(P.mnemonic.split(" ")),y("")}catch(P){const ne=P instanceof Error?P.message:String(P);w(ne==="INVALID_PASSWORD"?"Incorrect password.":"Authentication failed."),y("")}finally{p(!1)}},Js=()=>{m([]),y(""),w(null),d("none")},ki=async T=>{if(T.preventDefault(),Y(null),v.length<8){Y("New password must be at least 8 characters.");return}if(v!==_){Y("New passwords do not match.");return}if(v===g){Y("New password must differ from current password.");return}ce(!0);try{await R0(g,v),me(!0),S(""),C(""),j("")}catch(P){const ne=P instanceof Error?P.message:String(P);Y(ne==="INVALID_PASSWORD"?"Current password is incorrect.":ne==="WEAK_PASSWORD"?"New password is too short (min 8 chars).":"Failed to change password. Try again.")}finally{ce(!1)}},Ai=async()=>{if(!ze){ke(!0);return}await L0(),c()},rn=(T=!1)=>({...$1(T)}),Ii=()=>{d("none"),m([]),y(""),w(null),S(""),C(""),j(""),Y(null),me(!1),ke(!1)},Ci=T=>{var ne;const P=`${dc}${T}`;if(typeof chrome<"u"&&((ne=chrome.tabs)!=null&&ne.create)){chrome.tabs.create({url:P});return}typeof window<"u"&&window.open(P,"_blank","noopener,noreferrer")},Fn=async()=>{Mn(!0),z(null),nt([]);try{Vt();const P=[...await jw(t)].sort((ne,at)=>{const sn=ne.lastOkAt||0,Gt=at.lastOkAt||0;if(sn!==Gt)return Gt-sn;const yr=ne.consecutiveFails||0,xo=at.consecutiveFails||0;return yr-xo});nt(P),Rt(Date.now())}catch(T){z(T instanceof Error?T.message:"Failed to probe provider endpoints.")}finally{Mn(!1)}},pc=T=>{const P=T.split(/[\n,\s]+/).map(at=>at.trim()).filter(Boolean),ne=[];for(const at of P)try{const sn=new URL(at);if(sn.protocol!=="http:"&&sn.protocol!=="https:")continue;const Gt=at.replace(/\/+$/,"");ne.includes(Gt)||ne.push(Gt)}catch{}return ne},mc=async()=>{if(At){He(!0),wt(null),st(!1);try{const T=pc(de);if(de.trim()&&T.length===0){wt("No valid http(s) endpoints found in override list.");return}await Lm(t,At,T.length>0?T:null),Le(P=>({...P,[At]:T})),st(!0),Vt(),await Fn()}catch(T){wt(T instanceof Error?T.message:"Failed to save endpoint pool override.")}finally{He(!1)}}},Zs=async()=>{if(At){He(!0),wt(null),st(!1);try{await Lm(t,At,null),Le(T=>({...T,[At]:[]})),Ke(""),st(!0),Vt(),await Fn()}catch(T){wt(T instanceof Error?T.message:"Failed to clear endpoint pool override.")}finally{He(!1)}}},qs=async T=>{ge(!0);try{await i(T)}finally{ge(!1)}},on=async()=>{ge(!0);try{await l(!o)}finally{ge(!1)}},So=async T=>{Ee(!0),We(null);try{if(T==="managed_local"){if(await Gc(nn),lt(nn),await Om(null),N(""),await Bi(!0),pt(!0),await xr(t,"local"),U("local"),!(A!=null&&A.running)){const P=await Yc({networkProfile:nn,dataDir:null});gr(P,{})}}else await Bi(!1),pt(!1),await xr(t,"official"),U("official");Vt(),await It({includeLogs:q,includeMetrics:!0})}catch(P){We(P instanceof Error?P.message:"Failed to apply node preset.")}finally{Ee(!1)}},hc=async T=>{Ae(!0),Z(null),K(!1);try{await xr(t,T),T==="local"&&(await Bi(!0),pt(!0)),U(T),K(!0),Vt()}catch{Z("Failed to save RPC provider preset.")}finally{Ae(!1)}},_i=async()=>{const T=H.trim();if(!T){Z("Enter a custom RPC endpoint first.");return}Ae(!0),Z(null),K(!1);try{await Rm(t,T),await xr(t,"custom"),U("custom"),K(!0),Vt()}catch(P){const ne=P instanceof Error?P.message:String(P);Z(ne==="INVALID_RPC_ENDPOINT"?"Invalid endpoint URL. Use http(s)://...":"Failed to save custom RPC endpoint.")}finally{Ae(!1)}},gc=async()=>{Ae(!0),Z(null),K(!1);try{await Rm(t,null),await xr(t,"official"),U("official"),X(""),K(!0),Vt()}catch{Z("Failed to clear custom RPC endpoint.")}finally{Ae(!1)}},yc=async T=>{Ee(!0),We(null);try{let P=Se;if(T&&!wi&&(P=nn,await Gc(P),lt(P)),await Bi(T),pt(T),T){if(await xr(t,"local"),U("local"),!(A!=null&&A.running)){const ne=await Yc({networkProfile:P,dataDir:Ei||null});gr(ne,{})}}else M==="local"&&(await xr(t,"official"),U("official"));Vt(),await It({includeLogs:q,includeMetrics:!0})}catch(P){We(P instanceof Error?P.message:"Failed to update local node mode.")}finally{Ee(!1)}},Ni=async T=>{Ee(!0),We(null);try{await Gc(T),lt(T),Vt(),await It({includeLogs:!1,includeMetrics:!0})}catch(P){We(P instanceof Error?P.message:"Failed to save local node profile.")}finally{Ee(!1)}},el=async T=>{Ee(!0),We(null);try{const P=T!==void 0?typeof T=="string"?T.trim():null:Pe.trim()||null;await Om(P),P||N(""),await It({includeLogs:!1,includeMetrics:!0})}catch(P){We(P instanceof Error?P.message:"Failed to save local node data dir.")}finally{Ee(!1)}},tl=async()=>{Ee(!0),We(null);try{const T=await Yc({networkProfile:Se,dataDir:Pe.trim()||null});gr(T,{}),await Bi(!0),await xr(t,"local"),pt(!0),U("local"),Vt(),await It({includeLogs:q,includeMetrics:!0})}catch(T){We(T instanceof Error?T.message:"Failed to start local node.")}finally{Ee(!1)}},Sc=async()=>{Ee(!0),We(null);try{const T=await tw();gr(T,{}),Vt(),await It({includeLogs:q,includeMetrics:!0})}catch(T){We(T instanceof Error?T.message:"Failed to stop local node.")}finally{Ee(!1)}},nl=async()=>{Ee(!0),We(null);try{const T=await nw({networkProfile:Se,dataDir:Pe.trim()||null});gr(T,{}),Vt(),await It({includeLogs:q,includeMetrics:!0})}catch(T){We(T instanceof Error?T.message:"Failed to restart local node.")}finally{Ee(!1)}},xc=async()=>{if(A!=null&&A.running){if(Xr){await nl();return}await It({includeLogs:q,includeMetrics:!0});return}await tl()},vc=async()=>{Ne(!0),Ze(null);try{await jT(),await Cn()}catch(T){Ze(T instanceof Error?T.message:"Failed to clear telemetry stream.")}finally{Ne(!1)}};return s.jsxs("div",{style:no,children:[s.jsxs("div",{style:St("default"),children:[s.jsx("div",{style:{...cn,marginBottom:8},children:"CONNECTION STATUS"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:3},children:"PROVIDER"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[s.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:e?a.ok:a.warn}}),s.jsx("span",{style:{fontSize:9,color:a.text,fontWeight:700},children:vi.toUpperCase()})]})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:3},children:"NETWORK"}),s.jsx("span",{style:{fontSize:8,color:t==="mainnet"?a.warn:a.ok,fontWeight:700,background:t==="mainnet"?`${a.warn}15`:`${a.ok}15`,border:`1px solid ${t==="mainnet"?a.warn:a.ok}30`,borderRadius:3,padding:"2px 6px"},children:t.toUpperCase()})]}),e&&s.jsxs("div",{style:{gridColumn:"1 / -1"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:3},children:"ADDRESS"}),s.jsx("div",{style:{...J(),fontSize:8,color:a.text,padding:"7px 9px"},children:Hs(e)})]})]})]}),s.jsxs("div",{style:St("default"),children:[s.jsx("div",{style:{...cn,marginBottom:8},children:"KASPA RPC ENDPOINT"}),s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:6},children:["Active network: ",s.jsx("span",{style:{color:a.text,fontWeight:700},children:qe.network.toUpperCase()})]}),s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:7},children:["Provider preset: ",s.jsx("span",{style:{color:a.text,fontWeight:700},children:An[M]}),"  Pool size:"," ",s.jsx("span",{style:{color:a.text,fontWeight:700},children:qe.effectivePool.length})]}),s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:8},children:Object.keys(An).map(T=>{const P=M===T;return s.jsx("button",{onClick:()=>{hc(T)},disabled:ie,style:{...V(P?a.accent:a.dim,!0),padding:"6px 8px",fontSize:8,color:P?a.accent:a.dim,opacity:ie?.7:1},children:An[T]},T)})}),s.jsxs("div",{style:{...J(),marginBottom:8,display:"flex",flexDirection:"column",gap:5},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.45},children:"Effective endpoints (priority order):"}),qe.effectivePool.slice(0,3).map(T=>s.jsx("div",{style:{fontSize:8,color:a.text,lineHeight:1.4,wordBreak:"break-all"},children:T},T)),qe.effectivePool.length>3&&s.jsxs("div",{style:{fontSize:7,color:a.dim},children:["+",qe.effectivePool.length-3," more"]}),qe.usesOfficialFallback&&s.jsx("div",{style:{fontSize:8,color:a.warn,lineHeight:1.45},children:M==="custom"?"Custom endpoint not set; currently falling back to official pool.":`${An[M]} endpoints are not configured; currently falling back to official pool.`}),qe.requiredEnvKeys.length>0&&s.jsxs("div",{style:{fontSize:7,color:a.dim,lineHeight:1.45},children:["Required config: ",qe.requiredEnvKeys.join(", ")]})]}),s.jsx("input",{value:H,onChange:T=>{X(T.target.value),K(!1),Z(null)},placeholder:t==="mainnet"?"https://your-mainnet-kaspa-rpc.example":"https://your-kaspa-rpc.example",disabled:ie,style:{...rn(!!ve),marginBottom:7}}),s.jsxs("div",{style:{display:"flex",gap:6},children:[s.jsx("button",{onClick:()=>{_i()},disabled:ie||!H.trim(),style:{...V(a.accent,!0),flex:1,padding:"7px 8px",color:a.accent,opacity:ie?.7:1},children:ie?"SAVING":"SAVE & USE CUSTOM"}),s.jsx("button",{onClick:()=>{gc()},disabled:ie,style:{...V(a.dim,!0),flex:1,padding:"7px 8px",color:a.dim,opacity:ie?.7:1},children:"CLEAR"})]}),s.jsx("div",{style:{display:"flex",gap:6,marginTop:6},children:s.jsx("button",{onClick:()=>{Fn()},disabled:gn,style:{...V(a.ok,!0),flex:1,padding:"7px 8px",color:a.ok,opacity:gn?.7:1},children:gn?"PROBING":"TEST LIVE FEED"})}),At&&s.jsxs("div",{style:{...J(),marginTop:6,display:"flex",flexDirection:"column",gap:6},children:[s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.45},children:["Editable preset pool override (",An[At],")  one endpoint per line."]}),s.jsx("textarea",{value:de,onChange:T=>{Ke(T.target.value),st(!1),wt(null)},rows:3,placeholder:"https://your-rpc-1\\nhttps://your-rpc-2",disabled:dt,style:{...rn(!!Ye),minHeight:68,resize:"vertical",marginBottom:0}}),s.jsxs("div",{style:{display:"flex",gap:6},children:[s.jsx("button",{onClick:()=>{mc()},disabled:dt,style:{...V(a.accent,!0),flex:1,padding:"7px 8px",color:a.accent,opacity:dt?.7:1},children:dt?"SAVING":"SAVE POOL OVERRIDE"}),s.jsx("button",{onClick:()=>{Zs()},disabled:dt,style:{...V(a.dim,!0),flex:1,padding:"7px 8px",color:a.dim,opacity:dt?.7:1},children:"CLEAR OVERRIDE"})]}),Ye&&s.jsx("div",{style:{fontSize:8,color:a.danger,lineHeight:1.45},children:Ye}),!Ye&&Je&&s.jsx("div",{style:{fontSize:8,color:a.ok,lineHeight:1.45},children:"Preset pool override saved."})]}),ve&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:6},children:ve}),!ve&&we&&s.jsx("div",{style:{fontSize:8,color:a.ok,marginTop:6},children:"Saved RPC settings for this network."}),b&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:6},children:b}),jt&&!b&&s.jsxs("div",{style:{fontSize:8,color:a.dim,marginTop:6},children:["Last provider probe: ",Ol(jt)]}),ee.length>0&&s.jsx("div",{style:{...J(),marginTop:6,display:"flex",flexDirection:"column",gap:5},children:ee.slice(0,4).map(T=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:8,alignItems:"center"},children:[s.jsx("div",{style:{fontSize:8,color:a.text,wordBreak:"break-all",lineHeight:1.35},children:T.base}),s.jsxs("div",{style:{fontSize:7,color:T.circuit==="open"?a.danger:a.ok},children:[T.circuit.toUpperCase(),"  ",T.lastLatencyMs?`${Math.round(T.lastLatencyMs)}ms`:"n/a"]})]},T.base))}),s.jsxs("div",{style:{...J(),marginTop:8,display:"flex",flexDirection:"column",gap:7},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em"},children:"LOCAL NODE MODE"}),s.jsx("div",{style:{fontSize:7,color:kt?a.ok:a.warn,border:`1px solid ${kt?`${a.ok}45`:`${a.warn}45`}`,borderRadius:4,padding:"2px 5px",letterSpacing:"0.06em"},children:kt?"EVENTS LIVE":"POLL MODE"})]}),s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[s.jsxs("div",{style:{fontSize:7,color:A!=null&&A.running?a.ok:a.dim,border:`1px solid ${A!=null&&A.running?`${a.ok}45`:a.border}`,borderRadius:4,padding:"2px 5px",letterSpacing:"0.06em"},children:["NODE ",A!=null&&A.running?"RUNNING":"STOPPED"]}),s.jsxs("div",{style:{fontSize:7,color:A!=null&&A.rpcHealthy?a.ok:a.warn,border:`1px solid ${A!=null&&A.rpcHealthy?`${a.ok}45`:`${a.warn}45`}`,borderRadius:4,padding:"2px 5px",letterSpacing:"0.06em"},children:["RPC ",A!=null&&A.rpcHealthy?"HEALTHY":"CHECKING"]}),s.jsxs("div",{style:{fontSize:7,color:Bn==="healthy"?a.ok:Bn==="degraded"?a.danger:a.dim,border:`1px solid ${Bn==="healthy"?`${a.ok}45`:Bn==="degraded"?`${a.danger}55`:a.border}`,borderRadius:4,padding:"2px 5px",letterSpacing:"0.06em"},children:["STATE ",Bn.toUpperCase()]}),s.jsx("button",{onClick:()=>Ci("/node/status"),style:{...V(a.dim,!0),padding:"2px 6px",fontSize:7,color:a.dim,letterSpacing:"0.06em"},children:"STATUS JSON"}),s.jsx("button",{onClick:()=>Ci("/metrics"),style:{...V(a.dim,!0),padding:"2px 6px",fontSize:7,color:a.dim,letterSpacing:"0.06em"},children:"METRICS"})]}),s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>{So("managed_local")},disabled:ue,style:{...V(a.accent,!0),padding:"6px 8px",fontSize:8,color:a.accent,opacity:ue?.7:1},children:"PRESET: MANAGED LOCAL"}),s.jsx("button",{onClick:()=>{So("remote_official")},disabled:ue,style:{...V(a.dim,!0),padding:"6px 8px",fontSize:8,color:a.dim,opacity:ue?.7:1},children:"PRESET: REMOTE OFFICIAL"})]}),!A&&s.jsxs("div",{style:{fontSize:8,color:a.warn,lineHeight:1.45},children:["Local control service is unreachable. Start it with ",s.jsx("span",{style:{...L,color:a.text},children:"npm run local-node:start"}),"."]}),s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>{yc(!ft)},disabled:ue,style:{...V(ft?a.ok:a.dim,!0),padding:"6px 8px",fontSize:8,color:ft?a.ok:a.dim,opacity:ue?.7:1},children:ft?"ENABLED":"DISABLED"}),s.jsxs("button",{onClick:()=>{Ni(nn)},disabled:ue||Se===nn,style:{...V(Se===nn?a.ok:a.accent,!0),padding:"6px 8px",fontSize:8,color:Se===nn?a.ok:a.accent,opacity:ue?.7:1},children:["MATCH ACTIVE (",Ll(nn),")"]})]}),s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:jI.map(T=>s.jsx("button",{onClick:()=>{Ni(T)},disabled:ue,style:{...V(Se===T?a.accent:a.dim,!0),padding:"6px 8px",fontSize:8,color:Se===T?a.accent:a.dim,opacity:ue?.7:1},children:Ll(T)},T))}),!wi&&s.jsxs("div",{style:{fontSize:8,color:a.warn,lineHeight:1.45},children:["Local profile (",Ll(Se),") differs from active network (",Ll(nn),"). Remote fallback stays active until profiles match."]}),s.jsx("input",{value:Pe,onChange:T=>N(T.target.value),placeholder:"Optional custom data root (leave empty for managed default)",disabled:ue,style:{...rn(!!tn),marginBottom:0}}),s.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[s.jsx("button",{onClick:()=>{el()},disabled:ue,style:{...V(a.accent,!0),flex:1,minWidth:86,padding:"7px 8px",color:a.accent,opacity:ue?.7:1},children:"SAVE DIR"}),s.jsx("button",{onClick:()=>{el(null)},disabled:ue,style:{...V(a.dim,!0),minWidth:120,padding:"7px 8px",color:a.dim,opacity:ue?.7:1},children:"USE MANAGED DIR"}),s.jsx("button",{onClick:()=>{xc()},disabled:ue,style:{...V(A!=null&&A.running&&Xr?a.warn:a.ok,!0),flex:1,minWidth:120,padding:"7px 8px",color:A!=null&&A.running&&Xr?a.warn:a.ok,opacity:ue?.7:1},children:A!=null&&A.running?Xr?"APPLY & RESTART":"RUNNING":"START"}),s.jsx("button",{onClick:()=>{nl()},disabled:ue||!(A!=null&&A.running),style:{...V(a.warn,!0),flex:1,minWidth:86,padding:"7px 8px",color:a.warn,opacity:ue||!(A!=null&&A.running)?.7:1},children:"RESTART"}),s.jsx("button",{onClick:()=>{Sc()},disabled:ue||!(A!=null&&A.running),style:{...V(a.danger,!0),flex:1,minWidth:72,padding:"7px 8px",color:a.danger,opacity:ue||!(A!=null&&A.running)?.7:1},children:"STOP"}),s.jsx("button",{onClick:()=>{It({includeLogs:q,includeMetrics:!0})},disabled:ue,style:{...V(a.dim,!0),minWidth:82,padding:"7px 8px",color:a.dim,opacity:ue?.7:1},children:"REFRESH"}),s.jsx("button",{onClick:()=>_e(T=>!T),disabled:ue,style:{...V(q?a.accent:a.dim,!0),minWidth:92,padding:"7px 8px",color:q?a.accent:a.dim,opacity:ue?.7:1},children:q?"HIDE LOGS":"SHOW LOGS"})]}),s.jsxs("div",{style:{fontSize:8,color:A!=null&&A.rpcHealthy?a.ok:a.dim,lineHeight:1.45},children:["Status: ",A!=null&&A.running?"running":"stopped","  RPC: ",A!=null&&A.rpcHealthy?"healthy":"unhealthy","  Sync:"," ",In!=null?`${De(In,2)}%`:"","  Updated ",Ol(Ht)]}),s.jsx("div",{style:{...J(),height:8,padding:0,overflow:"hidden"},children:s.jsx("div",{style:{width:`${Math.max(0,Math.min(100,In??0))}%`,height:"100%",background:(bi=A==null?void 0:A.sync)!=null&&bi.synced?`linear-gradient(90deg, ${a.ok}, #6DD6A7)`:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,transition:"width 200ms ease"}})}),s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.45,wordBreak:"break-all"},children:["Data mode: ",A!=null&&A.dataDirOverride?"CUSTOM OVERRIDE":"MANAGED DEFAULT","  Root: ",(A==null?void 0:A.dataDirBase)||""]}),s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.45,wordBreak:"break-all"},children:["Profile dir: ",(A==null?void 0:A.dataDir)||""]}),s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.45},children:["Backend: ",((se==null?void 0:se.source)||"remote").toUpperCase(),"  ",LI[(se==null?void 0:se.reason)||""]||(se==null?void 0:se.reason)||"No status reason"]}),mt&&s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:6},children:[s.jsxs("div",{style:{...J(),padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"REQ"}),s.jsx("div",{style:{fontSize:9,color:a.text,fontWeight:700},children:mt.control.requestsTotal})]}),s.jsxs("div",{style:{...J(),padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"EVENTS"}),s.jsx("div",{style:{fontSize:9,color:a.text,fontWeight:700},children:mt.control.eventsEmittedTotal})]}),s.jsxs("div",{style:{...J(),padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"UPTIME"}),s.jsxs("div",{style:{fontSize:9,color:a.text,fontWeight:700},children:[mt.uptimeSec,"s"]})]}),s.jsxs("div",{style:{...J(),padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"RESTARTS"}),s.jsx("div",{style:{fontSize:9,color:a.warn,fontWeight:700},children:mt.node.restartsTotal})]})]}),(A==null?void 0:A.rpcBaseUrl)&&s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.45,wordBreak:"break-all"},children:["RPC Endpoint: ",A.rpcBaseUrl]}),(A==null?void 0:A.error)&&s.jsx("div",{style:{fontSize:8,color:a.danger,lineHeight:1.45},children:A.error}),tn&&s.jsx("div",{style:{fontSize:8,color:a.danger,lineHeight:1.45},children:tn}),q&&s.jsx("div",{style:{...J(),fontSize:7,color:a.muted,whiteSpace:"pre-wrap",lineHeight:1.4,maxHeight:96,overflowY:"auto"},children:Et||"No recent logs available yet."})]}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginTop:6},children:"Presets are stored per network. Local mode uses a local control service (`VITE_LOCAL_NODE_CONTROL_URL`) and falls back to the selected remote pool if local RPC is unhealthy."})]}),s.jsxs("div",{style:St("default"),children:[s.jsx("div",{style:{...cn,marginBottom:8},children:"EXECUTION TELEMETRY"}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:8},children:"Unified kernel audit stream across manual send, swaps, and agent dispatch."}),s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:8},children:RI.map(T=>{const P=zn===T.ms;return s.jsx("button",{onClick:()=>Lt(T.ms),style:{...V(P?a.accent:a.dim,!0),padding:"5px 7px",fontSize:8,color:P?a.accent:a.dim},children:T.label},T.ms)})}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))",gap:6,marginBottom:8},children:[s.jsxs("div",{style:{...J(),padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"EVENTS"}),s.jsx("div",{style:{fontSize:10,color:a.text,fontWeight:700},children:rt.totalEvents})]}),s.jsxs("div",{style:{...J(),padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"RUNS"}),s.jsx("div",{style:{fontSize:10,color:a.text,fontWeight:700},children:rt.uniqueRuns})]}),s.jsxs("div",{style:{...J(),padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"SUCCESS"}),s.jsxs("div",{style:{fontSize:10,color:a.ok,fontWeight:700},children:[De(rt.overall.successRatePct,1),"%"]})]}),s.jsxs("div",{style:{...J(),padding:"6px 7px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"FAILED"}),s.jsx("div",{style:{fontSize:10,color:a.danger,fontWeight:700},children:rt.overall.failed})]})]}),s.jsxs("div",{style:{...J(),marginBottom:8,display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.4},children:["SLO target ",De(rt.sloTargetPct,1),"%  min ",rt.sloMinSamples," samples"]}),s.jsx("div",{style:{fontSize:7,color:re,border:`1px solid ${re}45`,borderRadius:4,padding:"2px 5px",letterSpacing:"0.06em"},children:$})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6,marginBottom:8},children:[s.jsxs("div",{style:{...J(),padding:"7px 8px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim,marginBottom:5},children:"CHANNEL COUNTERS"}),CT.map(T=>{const P=rt.byChannel[T];return s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:6,alignItems:"center",marginBottom:4},children:[s.jsx("span",{style:{fontSize:7,color:a.text,letterSpacing:"0.06em"},children:Eh[T]}),s.jsxs("div",{style:{fontSize:7,color:a.dim},children:[P.ok,"/",P.total," ok"]}),s.jsxs("div",{style:{fontSize:7,color:P.failed>0?a.warn:a.ok},children:[De(P.successRatePct,1),"%"]})]},T)})]}),s.jsxs("div",{style:{...J(),padding:"7px 8px"},children:[s.jsx("div",{style:{fontSize:7,color:a.dim,marginBottom:5},children:"STAGE COUNTERS"}),_T.map(T=>{const P=rt.byStage[T];return s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:6,alignItems:"center",marginBottom:4},children:[s.jsx("span",{style:{fontSize:7,color:a.text,letterSpacing:"0.06em"},children:Th[T]}),s.jsxs("div",{style:{fontSize:7,color:a.dim},children:[P.ok,"/",P.total," ok"]}),s.jsxs("div",{style:{fontSize:7,color:P.failed>0?a.warn:a.ok},children:[De(P.successRatePct,1),"%"]})]},T)})]})]}),s.jsxs("div",{style:{display:"flex",gap:6},children:[s.jsx("button",{onClick:()=>{Cn()},disabled:he,style:{...V(a.ok,!0),flex:1,padding:"7px 8px",color:a.ok,opacity:he?.7:1},children:"REFRESH"}),s.jsx("button",{onClick:()=>{vc()},disabled:he,style:{...V(a.warn,!0),flex:1,padding:"7px 8px",color:a.warn,opacity:he?.7:1},children:"CLEAR STREAM"})]}),R&&s.jsx("div",{style:{fontSize:8,color:a.dim,marginTop:6},children:"Loading telemetry stream"}),Oe&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:6},children:Oe}),!Oe&&Ve&&s.jsxs("div",{style:{fontSize:8,color:a.dim,marginTop:6},children:["Last telemetry sync: ",Ol(Ve)]}),s.jsxs("div",{style:{...J(),marginTop:8,display:"flex",flexDirection:"column",gap:6},children:[s.jsx("div",{style:{fontSize:7,color:a.dim},children:"RECENT EVENTS"}),Ge.length===0?s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.45},children:"No telemetry events in the selected window."}):Ge.map(T=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:8,alignItems:"center"},children:[s.jsxs("div",{style:{minWidth:0},children:[s.jsxs("div",{style:{fontSize:8,color:a.text,lineHeight:1.35,overflowWrap:"anywhere"},children:[Eh[T.channel],"  ",Th[T.stage],"  ",Ol(T.ts)]}),s.jsxs("div",{style:{fontSize:7,color:a.dim,lineHeight:1.35},children:["Run ",T.runId.slice(0,16),T.runId.length>16?"":"","  tx ",OI(T.txId)]})]}),s.jsx("div",{style:{fontSize:7,color:T.status==="ok"?a.ok:a.danger,border:`1px solid ${T.status==="ok"?`${a.ok}45`:`${a.danger}45`}`,borderRadius:4,padding:"2px 5px",letterSpacing:"0.06em"},children:T.status.toUpperCase()})]},T.id))]})]}),n&&s.jsxs("div",{style:St("default"),children:[s.jsx("div",{style:{...cn,marginBottom:8},children:"SESSION SETTINGS"}),s.jsxs("div",{style:{marginBottom:10},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:5,letterSpacing:"0.08em"},children:"AUTO-LOCK"}),s.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:Ys.map(T=>s.jsx("button",{disabled:oe,onClick:()=>{qs(T.value)},style:{...V(r===T.value?a.accent:a.dim,!0),padding:"6px 8px",fontSize:8,color:r===T.value?a.accent:a.dim,opacity:oe?.7:1},children:T.label},T.value))})]}),s.jsx("button",{onClick:()=>{on()},disabled:oe,style:{...V(o?a.ok:a.dim,!0),width:"100%",padding:"8px 10px",color:o?a.ok:a.dim,textAlign:"left",opacity:oe?.7:1},children:o?" KEEP UNLOCKED WHEN POPUP CLOSES":"KEEP UNLOCKED WHEN POPUP CLOSES"}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginTop:6},children:"Stores unlocked session in browser session memory only; lock manually on shared devices."})]}),n&&s.jsxs(s.Fragment,{children:[u==="none"&&s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:7},children:[s.jsx("button",{onClick:()=>d("reveal"),style:pu(a.accent),children:" REVEAL SEED PHRASE"}),s.jsx("button",{onClick:()=>d("change_pw"),style:pu(a.dim),children:" CHANGE PASSWORD"}),s.jsx("button",{onClick:()=>d("reset"),style:pu(a.danger),children:" RESET WALLET"})]}),u==="reveal"&&s.jsxs("div",{style:{...St("warn")},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx("span",{style:{...lr,color:a.warn},children:"SEED PHRASE"}),s.jsx("button",{onClick:Js,style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...L},children:" close"})]}),f.length===0?s.jsxs("form",{onSubmit:fc,children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:6,lineHeight:1.5},children:"Enter your password to view your seed phrase. Never share it  anyone with this phrase controls your wallet."}),s.jsx("input",{type:"password",value:h,onChange:T=>y(T.target.value),placeholder:"Your password",disabled:k,style:{...rn(!!E),marginBottom:6}}),E&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:6},children:E}),s.jsx("button",{type:"submit",disabled:!h||k,style:{...V(h&&!k?a.warn:a.dim,!0),width:"100%",padding:"7px 0",color:h&&!k?a.warn:a.dim,cursor:h&&!k?"pointer":"not-allowed"},children:k?"AUTHENTICATING":"SHOW SEED PHRASE"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{...J(),display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:4,marginBottom:8},children:f.map((T,P)=>s.jsxs("div",{style:{background:"rgba(5,7,10,0.9)",border:`1px solid ${a.border}`,borderRadius:4,padding:"5px 4px",display:"flex",alignItems:"center",gap:3},children:[s.jsxs("span",{style:{fontSize:8,color:a.dim,flexShrink:0},children:[P+1,"."]}),s.jsx("span",{style:{fontSize:8,color:a.text,fontWeight:600},children:T})]},P))}),s.jsx("div",{style:{fontSize:8,color:a.warn,lineHeight:1.4},children:" Store offline. Never photograph or share digitally."})]})]}),u==="change_pw"&&s.jsxs("div",{style:St("default"),children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx("span",{style:lr,children:"CHANGE PASSWORD"}),s.jsx("button",{onClick:Ii,style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...L},children:" close"})]}),B?s.jsx("div",{style:{fontSize:8,color:a.ok,textAlign:"center",padding:"8px 0"},children:" Password updated successfully."}):s.jsxs("form",{onSubmit:ki,style:{display:"flex",flexDirection:"column",gap:7},children:[s.jsx("input",{type:"password",value:g,onChange:T=>S(T.target.value),placeholder:"Current password",disabled:Q,style:rn()}),s.jsx("input",{type:"password",value:v,onChange:T=>C(T.target.value),placeholder:"New password (min 8 chars)",disabled:Q,style:rn()}),s.jsx("input",{type:"password",value:_,onChange:T=>j(T.target.value),placeholder:"Confirm new password",disabled:Q,style:rn()}),D&&s.jsx("div",{style:{fontSize:8,color:a.danger},children:D}),s.jsx("button",{type:"submit",disabled:!g||!v||!_||Q,style:{...Ir(g&&v&&_&&!Q),padding:"8px 0",cursor:g&&v&&_&&!Q?"pointer":"not-allowed"},children:Q?"RE-ENCRYPTING":"UPDATE PASSWORD"})]})]}),u==="reset"&&s.jsxs("div",{style:{...St("danger"),backgroundColor:a.dLow},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx("span",{style:{...lr,color:a.danger},children:" RESET WALLET"}),s.jsx("button",{onClick:Ii,style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...L},children:" cancel"})]}),s.jsxs("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:10},children:["This will permanently delete your encrypted vault from this extension. Your on-chain funds are NOT affected. You can re-import using your seed phrase.",s.jsx("strong",{style:{color:a.warn},children:" Make sure your seed phrase is backed up before proceeding."})]}),s.jsx("button",{onClick:Ai,style:{...V(a.danger,!0),width:"100%",padding:"8px 0",background:ze?a.danger:"rgba(49,21,32,0.65)",border:`1px solid ${a.danger}${ze?"90":"50"}`,color:ze?"#fff":a.danger},children:ze?" CONFIRM  PERMANENTLY DELETE VAULT":"RESET WALLET"}),ze&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:5,textAlign:"center"},children:"This cannot be undone. Your seed phrase is your only recovery option."})]})]}),s.jsxs("div",{style:{...J(),padding:"10px 12px"},children:[s.jsx("div",{style:{...cn,marginBottom:6},children:"SECURITY NOTES"}),["Seed phrase encrypted with AES-256-GCM before storage.","Password derived with PBKDF2-SHA256 (600,000 iterations).","Plaintext secrets never touch chrome.storage.","All signing happens locally  nothing is transmitted to servers."].map((T,P,ne)=>s.jsxs("div",{style:{display:"flex",gap:6,marginBottom:P<ne.length-1?4:0},children:[s.jsx("span",{style:{color:a.ok,fontSize:8,flexShrink:0},children:""}),s.jsx("span",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:T})]},P))]}),n&&u==="none"&&s.jsx("button",{onClick:c,style:{...V(a.dim,!0),padding:"8px 0"},children:" LOCK WALLET"})]})}function pu(e){return{...V(e,!0),padding:"10px 12px",color:e,textAlign:"left",letterSpacing:"0.08em"}}const MI={KAS:"../icons/kaspa-logo.png",USDC:"../icons/usdc.png",USDT:"../icons/usdt.png"};function Dl({symbol:e,logoUri:t,size:n=22}){const r=t??MI[e];return r?s.jsx("img",{src:r,alt:e,style:{width:n,height:n,borderRadius:"50%",objectFit:"contain",flexShrink:0,background:"rgba(57,221,182,0.08)"},onError:o=>{o.currentTarget.style.display="none"}}):s.jsx("div",{style:{width:n,height:n,borderRadius:"50%",background:"rgba(57,221,182,0.18)",border:"1px solid rgba(57,221,182,0.35)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:s.jsx("span",{style:{color:"#39DDB6",fontSize:n*.45,fontWeight:800},children:e.slice(0,1)})})}function Ah(e){return 36}function zI(e,t){const n=String(e||"").trim();if(!n||!/^\d+(\.\d+)?$/.test(n))return null;const[r,o=""]=n.split("."),i=r.replace(/^0+(?=\d)/,"")||"0",l=o.slice(0,t).padEnd(t,"0"),c=`${i}${l}`.replace(/^0+(?=\d)/,"")||"0";try{return BigInt(c)}catch{return null}}function mu(e,t,n=6){const r=e<0n,o=r?-e:e,i=10n**BigInt(Math.max(0,t)),l=o/i,c=o%i;let u=l.toString();if(u.length>15&&(u=`${u.slice(0,6)}${u.slice(-4)}`),c===0n||t<=0)return`${r?"-":""}${u}`;let d=c.toString().padStart(t,"0").slice(0,n);return d=d.replace(/0+$/,""),d?`${r?"-":""}${u}.${d}`:`${r?"-":""}${u}`}function Ih(){const[e,t]=x.useState(()=>wd()),[n,r]=x.useState(null),[o,i]=x.useState([]),[l,c]=x.useState(null),[u,d]=x.useState(!1),[f,m]=x.useState(!1),[h,y]=x.useState(!1),[E,w]=x.useState(!1),[k,p]=x.useState(!1),g=o1(),S=H0(),[v,C]=x.useState("KAS"),[_,j]=x.useState("USDC"),[D,Y]=x.useState(""),[B,me]=x.useState(fe.defaultSlippageBps),[Q,ce]=x.useState(""),[ze,ke]=x.useState("krc20"),[oe,ge]=x.useState(null),[M,U]=x.useState(!1),[H,X]=x.useState(null),[ie,Ae]=x.useState(!1),[ve,Z]=x.useState(!1),[we,K]=x.useState(null),[ye,Le]=x.useState(!0),[de,Ke]=x.useState(""),[dt,He]=x.useState("20"),[Ye,wt]=x.useState("auto"),Je=!g.enabled,st=Q.trim().toLowerCase();st&&S.filter(b=>`${b.symbol} ${b.name} ${b.id}`.toLowerCase().includes(st)).slice(0,8);const ft=S.find(b=>b.id===_)??null;x.useEffect(()=>{t(wd()),kd().catch(()=>{}),as().then(i).catch(()=>{})},[]),x.useEffect(()=>{const b=setInterval(()=>{kd().then(()=>as().then(z=>i(z.slice(0,4)))).catch(()=>{})},fe.settlementPollIntervalMs);return()=>clearInterval(b)},[]);const pt=async()=>{const b=await as();i(b.slice(0,4))},Se=()=>{r(null),c(null),p(!1)},lt=async()=>{c(null);const b=S.find(ee=>ee.id===v),z=zI(D,(b==null?void 0:b.decimals)??8);if(!z||z<=0n){c("Enter a valid amount.");return}m(!0);try{const ee=await KT({tokenIn:v,tokenOut:_,amountIn:z,slippageBps:B,customTokenOut:oe},{routeSource:kt,allowHybridAuto:Ye==="auto"});if(!ee){c(g.reason??"Swap is currently unavailable.");return}r(ee)}catch(ee){c(ee instanceof Error?ee.message:String(ee))}finally{m(!1)}},Pe=async b=>{X(null),c(null);const z=String(b||"").trim();if(!z){X("Paste a token address first.");return}U(!0);try{const ee=await wa().catch(()=>"mainnet"),nt=await sc(z,ze,ee);ce(z),ge(nt),j("USDC"),Z(!1),Se()}catch(ee){ge(null),X(ee instanceof Error?ee.message:String(ee))}finally{U(!1)}},N=()=>{ge(null),X(null),Z(!1),Se()},A=async()=>{var b;if(X(null),c(null),!((b=navigator==null?void 0:navigator.clipboard)!=null&&b.readText)){X("Clipboard read is unavailable in this browser.");return}Ae(!0);try{const ee=(await navigator.clipboard.readText()).trim();if(!ee){X("Clipboard is empty.");return}ce(ee),ge(null),Z(!1),Se(),await se(ee)}catch(z){X(z instanceof Error?z.message:"Failed to read clipboard.")}finally{Ae(!1)}},te=b=>{j(b),ge(null),X(null),Z(!1),ce(""),Se()},se=async b=>{X(null),c(null);const z=String(b??Q).trim();if(!z){X("Type a token name/symbol or paste a token address.");return}const ee=z.toLowerCase(),nt=S.find(Lt=>Lt.id.toLowerCase()===ee||Lt.symbol.toLowerCase()===ee||Lt.name.toLowerCase()===ee);if(nt){if(!nt.enabled){X(nt.disabledReason??`${nt.symbol} is not currently available.`);return}te(nt.id);return}const jt=S.find(Lt=>`${Lt.symbol} ${Lt.name} ${Lt.id}`.toLowerCase().includes(ee));if(jt){if(!jt.enabled){X(jt.disabledReason??`${jt.symbol} is not currently available.`);return}te(jt.id);return}const Rt=await wa().catch(()=>"mainnet"),zn=await O1(z,ze,Rt);if(zn){ge(zn),j("USDC"),Z(!1),Se();return}await Pe(z)},Ie=async()=>{var b;if(oe!=null&&oe.address&&(b=navigator==null?void 0:navigator.clipboard)!=null&&b.writeText)try{await navigator.clipboard.writeText(oe.address),Z(!0),setTimeout(()=>Z(!1),1400)}catch{}},mt=async()=>{c(null),d(!0);try{const b=await WT();t(b),w(!1)}catch(b){c(b instanceof Error?b.message:String(b))}finally{d(!1)}},kn=()=>{CE(),t(null)},Et=async()=>{if(n){c(null),y(!0);try{await XT(n),p(!1),await pt()}catch(b){c(b instanceof Error?b.message:String(b))}finally{y(!1)}}},Tt=()=>{if(!new Set(S.filter(z=>z.enabled).map(z=>z.id)).has(_)){c(`Cannot flip while ${_} is disabled for input.`);return}C(_),j(v),N(),Se()},q=S.find(b=>b.id===v),_e=oe?{symbol:oe.symbol,name:oe.name,logoUri:oe.logoUri}:ft?{symbol:ft.symbol,name:ft.name,logoUri:void 0}:null,kt=Ye==="auto"?fe.routeSource:Ye,Kt=Gf(v,oe?"USDC":_,kt,{allowHybridAuto:Ye==="auto"});q==null||q.decimals;const Ht=(oe==null?void 0:oe.decimals)??(ft==null?void 0:ft.decimals)??8,Wt=n?mu(n.amountOut,Ht,6):"0.00",ue=Ye==="auto"?"AUTO":Ye==="kaspa_native"?"KASPA":"0x EVM",Ee=st?S.filter(b=>`${b.symbol} ${b.name} ${b.id}`.toLowerCase().includes(st)):S,tn=()=>{K(null),ce(""),X(null)},We=b=>{we==="from"?(C(b),Se()):te(b),tn()},gn={background:"linear-gradient(155deg, rgba(14,20,29,0.97) 0%, rgba(10,15,22,0.94) 100%)",border:"1px solid rgba(28,42,58,0.9)",borderRadius:18,padding:"16px 16px 14px",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.05), 0 10px 28px rgba(0,0,0,0.32)"},Mn=b=>({display:"flex",alignItems:"center",gap:7,background:b?"rgba(24,34,48,0.95)":"linear-gradient(90deg, rgba(57,221,182,0.12), rgba(57,221,182,0.06))",border:`1px solid ${b?"rgba(28,42,58,0.9)":"rgba(57,221,182,0.3)"}`,borderRadius:999,padding:b?"8px 12px 8px 9px":"8px 14px",color:b?a.text:a.accent,fontSize:13,fontWeight:700,cursor:Je?"not-allowed":"pointer",flexShrink:0,whiteSpace:"nowrap",...L});if(we!==null){const b=ie||M;return s.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",minHeight:440},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"14px 15px 12px",borderBottom:`1px solid ${a.border}`},children:[s.jsx("button",{onClick:tn,style:{background:"none",border:"none",color:a.dim,cursor:"pointer",fontSize:18,display:"flex",alignItems:"center",padding:"0 4px 0 0"},children:""}),s.jsx("span",{style:{fontSize:13,fontWeight:700,color:a.text,letterSpacing:"0.04em"},children:"Select a Token"}),s.jsx("span",{style:{marginLeft:"auto",fontSize:9,fontWeight:700,letterSpacing:"0.1em",color:we==="from"?a.accent:a.dim,background:we==="from"?`${a.accent}15`:"rgba(28,42,58,0.5)",border:`1px solid ${we==="from"?`${a.accent}30`:a.border}`,borderRadius:4,padding:"2px 7px"},children:we==="from"?"FROM":"TO"})]}),s.jsxs("div",{style:{padding:"12px 15px 0"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:0,background:"rgba(10,15,22,0.9)",border:`1px solid ${a.border}`,borderRadius:12,overflow:"hidden"},children:[s.jsx("span",{style:{padding:"0 10px",color:a.dim,fontSize:14,flexShrink:0},children:""}),s.jsx("input",{autoFocus:!0,value:Q,onChange:z=>{ce(z.target.value),oe&&(ge(null),Z(!1)),X(null),Se()},onKeyDown:z=>{z.key==="Enter"&&(z.preventDefault(),b||se().catch(()=>{}))},placeholder:"Search name or symbol",style:{flex:1,background:"none",border:"none",outline:"none",color:a.text,fontSize:11,padding:"11px 0",...L}}),s.jsx("button",{onClick:A,disabled:b,style:{marginRight:6,background:b?"rgba(22,32,45,0.8)":"rgba(57,221,182,0.12)",border:`1px solid ${b?a.border:`${a.accent}35`}`,borderRadius:8,color:b?a.dim:a.accent,fontSize:9,fontWeight:700,letterSpacing:"0.08em",padding:"6px 9px",cursor:b?"wait":"pointer",...L},children:b?"":"PASTE"}),s.jsx("button",{onClick:()=>{b||se().catch(()=>{})},disabled:b,style:{marginRight:6,background:"rgba(22,32,45,0.8)",border:`1px solid ${a.border}`,borderRadius:8,color:a.text,fontSize:9,fontWeight:700,letterSpacing:"0.08em",padding:"6px 9px",cursor:b?"wait":"pointer",...L},children:"GO"})]}),s.jsx("div",{style:{fontSize:8,color:a.muted,marginTop:7,paddingLeft:2},children:"Paste token address, then press GO (or Enter) to resolve."}),s.jsx("div",{style:{display:"flex",gap:6,marginTop:10},children:["krc20","krc721"].map(z=>{const ee=ze===z;return s.jsx("button",{onClick:()=>ke(z),style:{flex:1,padding:"5px 0",fontSize:9,fontWeight:700,letterSpacing:"0.08em",borderRadius:8,cursor:"pointer",background:ee?`${a.accent}18`:"rgba(16,25,35,0.5)",border:`1px solid ${ee?`${a.accent}45`:a.border}`,color:ee?a.accent:a.dim,...L},children:z.toUpperCase()},z)})})]}),H&&s.jsx("div",{style:{margin:"8px 15px 0",fontSize:9,color:a.danger,padding:"6px 10px",background:`${a.danger}0D`,borderRadius:8,border:`1px solid ${a.danger}30`},children:H}),oe&&s.jsxs("div",{style:{margin:"10px 15px 0",background:`${a.accent}0A`,border:`1px solid ${a.accent}30`,borderRadius:12,padding:"10px 12px"},children:[s.jsx("div",{style:{fontSize:8,color:a.accent,letterSpacing:"0.1em",marginBottom:8},children:"RESOLVED TOKEN"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[s.jsx(Dl,{symbol:oe.symbol,logoUri:oe.logoUri,size:34}),s.jsxs("div",{style:{flex:1,minWidth:0},children:[s.jsx("div",{style:{fontSize:12,color:a.text,fontWeight:700},children:oe.symbol}),s.jsx("div",{style:{fontSize:9,color:a.dim,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:oe.address})]}),s.jsx("button",{onClick:Ie,style:{...V(ve?a.ok:a.dim),padding:"4px 8px",fontSize:8},children:ve?"":"COPY ADDR"})]}),s.jsxs("button",{onClick:()=>{we==="to"&&(K(null),ce(""),X(null))},style:{...Ir(!0),width:"100%",padding:"9px 0",marginTop:10,fontSize:10},children:["SELECT ",oe.symbol," "]})]}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"10px 15px 16px"},children:[!st&&s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:8},children:"POPULAR TOKENS"}),Ee.map((z,ee)=>s.jsxs("button",{onClick:()=>We(z.id),disabled:!z.enabled,style:{width:"100%",background:"none",border:"none",display:"flex",alignItems:"center",gap:12,padding:"9px 4px",borderBottom:ee<Ee.length-1?"1px solid rgba(28,42,58,0.6)":"none",cursor:z.enabled?"pointer":"not-allowed",borderRadius:0},children:[s.jsx(Dl,{symbol:z.symbol,size:36}),s.jsxs("div",{style:{flex:1,textAlign:"left"},children:[s.jsx("div",{style:{fontSize:13,color:z.enabled?a.text:a.dim,fontWeight:700,...L},children:z.symbol}),s.jsx("div",{style:{fontSize:10,color:a.dim,marginTop:1},children:z.name})]}),!z.enabled&&s.jsx("span",{style:{fontSize:8,fontWeight:700,letterSpacing:"0.08em",color:a.warn,background:`${a.warn}12`,border:`1px solid ${a.warn}30`,borderRadius:4,padding:"2px 7px",...L},children:"SOON"}),z.enabled&&(v===z.id&&we==="from"||_===z.id&&we==="to")&&s.jsx("span",{style:{fontSize:12,color:a.accent},children:""})]},z.id)),st&&Ee.length===0&&!M&&!oe&&s.jsxs("div",{style:{textAlign:"center",padding:"24px 0",color:a.dim,fontSize:10},children:[s.jsx("div",{style:{marginBottom:6},children:"No token found."}),s.jsx("div",{style:{fontSize:9,color:a.muted},children:"Paste a KRC20 contract address to add it."})]})]})]})}return s.jsxs("div",{style:{...no,gap:8},children:[Je&&s.jsxs("div",{style:{...St("purple"),display:"flex",alignItems:"flex-start",gap:10},children:[s.jsx("span",{style:{fontSize:16,flexShrink:0},children:""}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:9,color:a.purple,fontWeight:700,letterSpacing:"0.1em",marginBottom:3},children:"SWAP UNAVAILABLE"}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:g.reason??"Swap coming soon to Kaspa."})]})]}),Kt.requiresEvmSigner&&s.jsxs("div",{style:St("default",!0),children:[s.jsx("div",{style:{...cn,marginBottom:6},children:"EVM SIDECAR"}),e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{fontSize:8,color:a.text,marginBottom:6},children:[e.address.slice(0,8),"",e.address.slice(-6)," (chain ",e.chainId,")"]}),s.jsx("button",{onClick:kn,style:{...V(a.warn),width:"100%",padding:"7px 0"},children:"DISCONNECT"})]}):E?s.jsxs("div",{style:{...J(),padding:"8px 10px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:6},children:"Forge-OS Kaspa keys are not shared with this signer."}),s.jsxs("div",{style:{display:"flex",gap:6},children:[s.jsx("button",{onClick:mt,style:{...Ir(!0),flex:1,padding:"7px 0"},disabled:u,children:u?"CONNECTING":"CONNECT"}),s.jsx("button",{onClick:()=>w(!1),style:{...V(a.dim),flex:1,padding:"7px 0"},children:"CANCEL"})]})]}):s.jsx("button",{onClick:()=>w(!0),style:{...V(a.accent),width:"100%",padding:"7px 0"},disabled:u,children:"CONNECT METAMASK SIDECAR"})]}),s.jsxs("div",{style:gn,children:[s.jsx("div",{style:{fontSize:11,color:a.dim,marginBottom:12,letterSpacing:"0.04em"},children:"from"}),s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,minWidth:0},children:s.jsxs("button",{onClick:()=>!Je&&K("from"),style:Mn(!0),children:[s.jsx(Dl,{symbol:(q==null?void 0:q.symbol)??"KAS",size:Ah(q==null?void 0:q.symbol)}),s.jsx("span",{children:(q==null?void 0:q.symbol)??"KAS"}),s.jsx("span",{style:{color:a.dim,fontSize:11},children:""})]})}),s.jsx("input",{type:"number",min:"0",value:D,onChange:b=>Y(b.target.value),placeholder:"0.00",disabled:Je,style:{width:"100%",minWidth:0,marginTop:12,background:"none",border:"none",outline:"none",color:Je?a.dim:a.text,fontSize:20,fontWeight:600,textAlign:"center",cursor:Je?"not-allowed":"text",lineHeight:1.1,...L}}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[s.jsxs("div",{style:{fontSize:10,color:a.dim},children:["Available: 0 ",(q==null?void 0:q.symbol)??"KAS"]}),s.jsx("button",{onClick:()=>{},style:{background:`${a.accent}12`,border:`1px solid ${a.accent}30`,borderRadius:6,color:a.accent,fontSize:9,fontWeight:700,padding:"2px 8px",cursor:"pointer",letterSpacing:"0.06em",...L},children:"MAX"})]})]}),s.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"-4px 0",zIndex:1},children:s.jsx("button",{disabled:Je,onClick:Tt,style:{background:"rgba(14,20,29,0.98)",border:"1px solid rgba(28,42,58,0.9)",borderRadius:"50%",width:34,height:34,color:Je?a.muted:a.text,fontSize:16,cursor:Je?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 16px rgba(0,0,0,0.4)"},children:""})}),s.jsxs("div",{style:gn,children:[s.jsx("div",{style:{fontSize:11,color:a.dim,marginBottom:12,letterSpacing:"0.04em"},children:"to"}),s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,minWidth:0},children:_e?s.jsxs("button",{onClick:()=>!Je&&K("to"),style:Mn(!0),children:[s.jsx(Dl,{symbol:_e.symbol,logoUri:_e.logoUri,size:Ah(_e.symbol)}),s.jsx("span",{children:_e.symbol}),s.jsx("span",{style:{color:a.dim,fontSize:11},children:""})]}):s.jsxs("button",{onClick:()=>!Je&&K("to"),style:Mn(!1),children:[s.jsx("span",{children:"Select Token"}),s.jsx("span",{style:{fontSize:11},children:""})]})}),s.jsx("div",{style:{width:"100%",minWidth:0,marginTop:12,textAlign:"center",color:n?a.text:a.dim,fontSize:20,fontWeight:600,...L,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.1},children:Wt}),s.jsxs("div",{style:{fontSize:10,color:a.dim,marginTop:10},children:["Available: 0 ",(_e==null?void 0:_e.symbol)??""]})]}),s.jsxs("div",{style:{padding:"2px 4px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{style:{fontSize:10,color:a.dim},children:["Rate: ",s.jsxs("span",{style:{color:a.text},children:["1 ",(q==null?void 0:q.symbol)??"KAS","  ",n?`~${mu(n.amountOut,Ht,4)}`:""," ",(_e==null?void 0:_e.symbol)??""]})]}),s.jsx("button",{onClick:()=>Le(!ye),style:{background:ye?`${a.accent}12`:"none",border:`1px solid ${ye?`${a.accent}35`:a.border}`,borderRadius:8,padding:"4px 10px",color:ye?a.accent:a.dim,fontSize:9,fontWeight:700,letterSpacing:"0.06em",cursor:"pointer",...L},children:" SETTINGS"})]}),ye&&s.jsxs("div",{style:{marginTop:8,padding:"12px 14px",background:"linear-gradient(155deg, rgba(14,20,29,0.97) 0%, rgba(10,15,22,0.94) 100%)",border:"1px solid rgba(28,42,58,0.9)",borderRadius:14},children:[s.jsx("div",{style:{fontSize:9,color:a.dim,letterSpacing:"0.1em",marginBottom:8,fontWeight:700},children:"SLIPPAGE TOLERANCE"}),s.jsxs("div",{style:{display:"flex",gap:5,alignItems:"center"},children:[[25,50,100,200].map(b=>{const z=B===b&&!de;return s.jsx("button",{onClick:()=>{me(b),Ke("")},style:{flex:1,padding:"7px 0",borderRadius:8,fontSize:10,fontWeight:700,background:z?`${a.accent}20`:"rgba(22,32,45,0.8)",border:`1px solid ${z?`${a.accent}55`:a.border}`,color:z?a.accent:a.dim,cursor:"pointer",...L},children:b===200?"2%":`${(b/100).toFixed(2).replace(".00","")}%`},b)}),s.jsx("input",{value:de,onChange:b=>{Ke(b.target.value);const z=parseFloat(b.target.value);!isNaN(z)&&z>0&&z<=50&&me(Math.round(z*100))},placeholder:"Custom",style:{flex:1,background:de?`${a.accent}10`:"rgba(22,32,45,0.8)",border:`1px solid ${de?`${a.accent}55`:a.border}`,borderRadius:8,color:a.text,fontSize:10,textAlign:"center",padding:"7px 4px",outline:"none",...L}})]}),s.jsxs("div",{style:{fontSize:9,color:a.muted,marginTop:8},children:["Current slippage:"," ",s.jsxs("span",{style:{color:B>150?a.warn:a.text,fontWeight:600},children:[(B/100).toFixed(2),"%"]}),B>150&&s.jsx("span",{style:{color:a.warn},children:"  High slippage. Proceed with caution."})]}),s.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(28,42,58,0.7)"},children:[s.jsx("div",{style:{fontSize:9,color:a.dim,letterSpacing:"0.1em",marginBottom:6,fontWeight:700},children:"STANDARD SETTINGS"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[s.jsxs("div",{style:{background:"rgba(22,32,45,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"7px 8px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"Deadline (min)"}),s.jsx("input",{value:dt,onChange:b=>{const z=b.target.value.replace(/[^\d]/g,"");if(!z){He("");return}const ee=Math.max(1,Math.min(120,Number(z)));He(String(ee))},placeholder:"20",style:{width:"100%",background:"none",border:"none",outline:"none",color:a.text,fontSize:11,...L}})]}),s.jsxs("div",{style:{background:"rgba(22,32,45,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"7px 8px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"Route Source"}),s.jsx("div",{style:{display:"flex",gap:4,marginBottom:7},children:[{id:"auto",label:"AUTO"},{id:"kaspa_native",label:"KASPA"},{id:"evm_0x",label:"0x EVM"}].map(b=>{const z=Ye===b.id;return s.jsx("button",{onClick:()=>{wt(b.id),c(null),Se()},style:{flex:1,padding:"5px 0",borderRadius:7,fontSize:8,fontWeight:700,background:z?`${a.accent}20`:"rgba(16,25,35,0.5)",border:`1px solid ${z?`${a.accent}45`:a.border}`,color:z?a.accent:a.dim,cursor:"pointer",...L},children:b.label},b.id)})}),s.jsxs("div",{style:{fontSize:10,color:a.text,...L},children:[Kt.label.toUpperCase()," (",ue,")"]}),!Kt.allowed&&Kt.reason&&s.jsx("div",{style:{fontSize:8,color:a.warn,lineHeight:1.4,marginTop:4},children:Kt.reason})]})]})]}),s.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(28,42,58,0.7)"},children:[s.jsx("div",{style:{fontSize:9,color:a.dim,letterSpacing:"0.1em",marginBottom:6,fontWeight:700},children:"NETWORK"}),s.jsx("div",{style:{fontSize:10,color:a.text},children:"Kaspa Mainnet  BlockDAG  10 BPS"}),s.jsx("div",{style:{fontSize:9,color:a.dim,marginTop:3},children:"Transactions confirm in ~1 second on average."})]})]})]}),Je?s.jsx("div",{style:{textAlign:"center",padding:"8px 0"},children:s.jsx("div",{style:{fontSize:9,color:a.muted,letterSpacing:"0.1em"},children:"SWAP COMING SOON TO KASPA"})}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:lt,style:{...Ir(!0),width:"100%",padding:"14px 0",fontSize:12,letterSpacing:"0.08em",borderRadius:14},disabled:f,children:f?"PREPARING SWAP":"SWAP"}),n&&s.jsxs("div",{style:{...St("accent",!0)},children:[s.jsx("div",{style:{...cn,marginBottom:8,color:a.accent},children:"SWAP PREVIEW"}),n.customTokenOut&&s.jsxs("div",{style:{fontSize:9,color:a.dim,marginBottom:4},children:["Output: ",s.jsxs("span",{style:{color:a.text},children:[n.customTokenOut.symbol," (",n.customTokenOut.standard.toUpperCase(),")"]})]}),s.jsxs("div",{style:{fontSize:9,color:a.dim,marginBottom:3},children:["Route: ",s.jsx("span",{style:{color:a.text},children:n.route.join("  ")})]}),s.jsxs("div",{style:{fontSize:9,color:a.dim,marginBottom:10},children:["Min received: ",s.jsxs("span",{style:{color:a.text},children:[mu(n.amountOut,Ht,6)," ",(_e==null?void 0:_e.symbol)??_]})]}),s.jsxs("div",{style:{fontSize:9,color:a.dim,marginBottom:10},children:["Deadline: ",s.jsxs("span",{style:{color:a.text},children:[dt||"20","m"]})]}),k?s.jsxs("div",{style:{...J(),padding:"10px 12px"},children:[s.jsx("div",{style:{fontSize:9,color:a.dim,lineHeight:1.6,marginBottom:8},children:n.routeSource==="kaspa_native"?"This will sign and broadcast via the managed Kaspa signer. Settlement is saved and recovers after restart.":"This will sign and broadcast via the external EVM signer. Settlement is saved and recovers after restart."}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{onClick:Et,style:{...Ir(!0),flex:1,padding:"9px 0"},disabled:h,children:h?"EXECUTING":"CONFIRM"}),s.jsx("button",{onClick:()=>p(!1),style:{...V(a.dim),flex:1,padding:"9px 0"},children:"CANCEL"})]})]}):s.jsx("button",{onClick:()=>p(!0),style:{...Ir(!0),width:"100%",padding:"10px 0",borderRadius:10},disabled:h,children:"SIGN & EXECUTE SWAP"})]})]}),l&&s.jsx("div",{style:{...J(),border:`1px solid ${a.danger}50`,color:a.danger,fontSize:9,lineHeight:1.5},children:l}),o.length>0&&s.jsxs("div",{style:{...J(),padding:"10px 12px"},children:[s.jsx("div",{style:{...cn,marginBottom:6},children:"RECENT SWAPS"}),o.map((b,z)=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:z<o.length-1?6:0},children:[s.jsx("div",{style:{width:6,height:6,borderRadius:"50%",flexShrink:0,background:b.state==="settled"?a.ok:b.state==="failed"?a.danger:a.warn}}),s.jsx("span",{style:{fontSize:9,color:a.text,flex:1},children:b.state}),s.jsx("span",{style:{fontSize:8,color:a.dim},children:b.txHash?`${b.txHash.slice(0,8)}`:"pending"}),s.jsx("span",{style:{fontSize:8,color:a.muted},children:new Date(b.updatedAt).toLocaleTimeString()})]},b.id))]})]})}const pi=1,qo=440,zs=720,W1=qo,V1=zs;function UI({autoLockMinutes:e,persistSession:t,onUnlock:n,onReset:r,walletAddress:o}){const[i,l]=x.useState(""),[c,u]=x.useState(null),[d,f]=x.useState(!1),[m,h]=x.useState(!1),y=x.useRef(null);x.useEffect(()=>{var w;(w=y.current)==null||w.focus()},[]);const E=async w=>{var k;if(w.preventDefault(),!(!i||d)){f(!0),u(null);try{const p=await uo(i,e,{persistSession:t});n(p)}catch(p){const g=p instanceof Error?p.message:String(p);u(g==="INVALID_PASSWORD"?"Incorrect password.":"Failed to unlock. Try again."),l(""),(k=y.current)==null||k.focus()}finally{f(!1)}}};return s.jsxs("div",{style:{width:qo,minHeight:zs,...fi(),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:"28px 30px 24px",...L,position:"relative",overflow:"hidden",overflowX:"hidden",overflowY:"auto",zoom:pi},children:[s.jsx("div",{style:{position:"absolute",top:"-12%",left:"50%",transform:"translateX(-50%)",width:360,height:360,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}18 0%, transparent 70%)`,pointerEvents:"none"}}),s.jsx("div",{style:{position:"absolute",bottom:"-10%",right:"-32%",width:260,height:260,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}0A 0%, transparent 72%)`,pointerEvents:"none"}}),s.jsxs("div",{style:{position:"relative",zIndex:1,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",marginTop:4},children:[s.jsxs("div",{style:{marginBottom:o?14:22,textAlign:"center"},children:[s.jsx("img",{src:"../icons/icon128.png",alt:"Forge-OS",style:{width:58,height:58,objectFit:"contain",imageRendering:"auto",filter:"drop-shadow(0 0 8px rgba(57,221,182,0.52))",marginBottom:12}}),s.jsxs("div",{style:{fontSize:17,fontWeight:700,letterSpacing:"0.12em"},children:[s.jsx("span",{style:{color:a.accent},children:"FORGE"}),s.jsx("span",{style:{color:a.text},children:"-OS"})]}),s.jsx("div",{style:{fontSize:10,color:a.dim,marginTop:5,letterSpacing:"0.12em"},children:o?"WELCOME BACK":"WALLET LOCKED"})]}),o&&s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:16,background:`${a.accent}0A`,border:`1px solid ${a.accent}25`,borderRadius:20,padding:"6px 14px"},children:[s.jsx("div",{style:{width:7,height:7,borderRadius:"50%",background:a.ok,flexShrink:0}}),s.jsx("span",{style:{fontSize:11,color:a.text,fontWeight:600},children:Hs(o)})]}),s.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:`${a.accent}15`,border:`1px solid ${a.accent}30`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:18},children:s.jsx("span",{style:{fontSize:22},children:""})}),s.jsxs("form",{onSubmit:E,style:{width:"100%"},children:[s.jsxs("div",{style:{marginBottom:12},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:6},children:o?"ENTER PASSWORD TO SIGN IN":"PASSWORD"}),s.jsx("input",{ref:y,type:"password",value:i,onChange:w=>l(w.target.value),placeholder:"Enter your password",disabled:d,style:{width:"100%",boxSizing:"border-box",background:"rgba(8,13,20,0.7)",border:`1px solid ${c?a.danger:a.border}`,borderRadius:8,padding:"10px 12px",color:a.text,fontSize:11,...L,outline:"none"}})]}),c&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10,textAlign:"center"},children:c}),s.jsx("button",{type:"submit",disabled:!i||d,style:{width:"100%",padding:"10px 0",background:i&&!d?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:`${a.accent}30`,border:"none",borderRadius:8,color:i&&!d?"#04110E":a.dim,fontSize:10,fontWeight:700,cursor:i&&!d?"pointer":"not-allowed",letterSpacing:"0.1em",...L,transition:"background 0.15s, color 0.15s"},children:d?"UNLOCKING":"UNLOCK WALLET"})]}),s.jsx("div",{style:{marginTop:20,textAlign:"center"},children:m?s.jsxs("div",{style:{background:a.dLow,border:`1px solid ${a.danger}40`,borderRadius:8,padding:"12px 14px",marginTop:4},children:[s.jsx("div",{style:{fontSize:9,color:a.warn,fontWeight:700,marginBottom:6,letterSpacing:"0.08em"},children:" RESET WALLET"}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5,marginBottom:10},children:"This will permanently delete your encrypted vault. Make sure you have your seed phrase backed up before proceeding."}),s.jsxs("div",{style:{display:"flex",gap:8},children:[s.jsx("button",{onClick:()=>h(!1),style:{flex:1,padding:"7px 0",background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,borderRadius:6,color:a.dim,fontSize:8,cursor:"pointer",...L},children:"CANCEL"}),s.jsx("button",{onClick:r,style:{flex:1,padding:"7px 0",background:a.dLow,border:`1px solid ${a.danger}60`,borderRadius:6,color:a.danger,fontSize:8,fontWeight:700,cursor:"pointer",...L},children:"RESET WALLET"})]})]}):s.jsx("button",{onClick:()=>h(!0),style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...L},children:"Forgot password?"})})]})]})}const G1="forgeos.import.addressbook.v1",Ch="forgeos.import.addressbook.salt.v1",BI=32,FI=240;function X1(){return chrome.storage.local}function $I(e){return String(e||"").trim().toLowerCase().split(/\s+/).join(" ")}function KI(e){return String(e||"").trim()}function Rd(e){return Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")}function HI(e){const t=e.trim();if(!t||t.length%2!==0)return new Uint8Array;const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=parseInt(t.slice(r,r+2),16);return n}async function Y1(e){return new Promise(t=>{X1().get(e,n=>t((n==null?void 0:n[e])??null))})}async function Q1(e,t){return new Promise(n=>{X1().set({[e]:t},n)})}async function WI(){const e=await Y1(Ch);if(e&&typeof e=="string"){const n=HI(e);if(n.length>0)return n}const t=crypto.getRandomValues(new Uint8Array(16));return await Q1(Ch,Rd(t)),t}async function J1(){const e=await Y1(G1);return!e||typeof e!="object"?{}:e}async function VI(e){await Q1(G1,e)}async function Z1(e,t){const n=await WI(),r=$I(e),o=KI(t);if(!r)return"";const i=new TextEncoder().encode(`${Rd(n)}
${r}
${o}`),l=await crypto.subtle.digest("SHA-256",i);return Rd(new Uint8Array(l))}function GI(e){const t=Qt(e.derivation);return{address:e.address,derivation:t,derivationPath:bn(t),chainLabel:Mf(t.chain)}}function XI(e,t,n){const r=Qt(e.derivation);return{address:e.address,network:t,derivation:r,derivationPath:bn(r),chainLabel:Mf(r.chain),createdAt:n,lastUsedAt:n}}function YI(e){const t=new Map;for(const n of e){const r=`${n.network.toLowerCase()}|${n.address.toLowerCase()}|${n.derivationPath}`,o=t.get(r);if(!o){t.set(r,n);continue}t.set(r,{...o,lastUsedAt:Math.max(o.lastUsedAt,n.lastUsedAt),createdAt:Math.min(o.createdAt,n.createdAt)})}return[...t.values()].sort((n,r)=>r.lastUsedAt-n.lastUsedAt)}function QI(e){const t=Object.entries(e).sort((n,r)=>{var l,c,u,d;const o=((c=(l=n[1])==null?void 0:l[0])==null?void 0:c.lastUsedAt)??0;return(((d=(u=r[1])==null?void 0:u[0])==null?void 0:d.lastUsedAt)??0)-o});return Object.fromEntries(t.slice(0,BI))}async function JI(e,t,n){const r=await Z1(e,t);return r?((await J1())[r]??[]).filter(l=>l.network===n).sort((l,c)=>c.lastUsedAt-l.lastUsedAt).map(GI):[]}async function Ld(e,t,n,r){const o=await Z1(e,t);if(!o||!r.length)return;const i=Date.now(),l=await J1(),c=l[o]??[],u=r.map(f=>XI(f,n,i)),d=YI([...u,...c]).slice(0,FI);l[o]=d,await VI(QI(l))}async function ZI(e,t,n,r){await Ld(e,t,n,[r])}const qI=qo,hu=[0,4],gu=[0,9],Od=80,q1=320,eC=[...Df].join(`
`);function Hi(e){return`${e.address.toLowerCase()}|${e.derivationPath}`}function Dd(e,t){const n=Number(String(e||"").trim());return!Number.isFinite(n)||n<0?t:Math.floor(n)}function _h(e,t,n){const r=Dd(e,n[0]),o=Dd(t,n[1]);return[Math.min(r,o),Math.max(r,o)]}function tC(e){const t=Dd(e,Od);return Math.max(1,Math.min(q1,t||Od))}function nC(e){const t=String(e||"").split(/[,\n]+/).map(n=>n.trim()).filter(Boolean);return t.length?t:[...Df]}function Nh({onSubmit:e,loading:t,submitLabel:n}){const[r,o]=x.useState(""),[i,l]=x.useState(""),[c,u]=x.useState(null),d=m=>{if(m.preventDefault(),u(null),r.length<8){u("Password must be at least 8 characters.");return}if(r!==i){u("Passwords do not match.");return}e(r)},f=(m=!1)=>({width:"100%",boxSizing:"border-box",background:"rgba(8,13,20,0.8)",border:`1px solid ${m?a.danger:a.border}`,borderRadius:8,padding:"10px 12px",color:a.text,fontSize:11,...L,outline:"none",marginBottom:8});return s.jsxs("form",{onSubmit:d,children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:8},children:"CREATE PASSWORD"}),s.jsx("input",{type:"password",placeholder:"Password (min 8 characters)",value:r,onChange:m=>o(m.target.value),disabled:t,style:f()}),s.jsx("input",{type:"password",placeholder:"Confirm password",value:i,onChange:m=>l(m.target.value),disabled:t,style:{...f(),marginBottom:0}}),c&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginTop:6},children:c}),s.jsx("button",{type:"submit",disabled:!r||!i||t,style:{width:"100%",marginTop:12,padding:"11px 0",background:r&&i&&!t?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:`${a.accent}25`,border:"none",borderRadius:8,color:r&&i&&!t?"#04110E":a.dim,fontSize:10,fontWeight:700,cursor:r&&i&&!t?"pointer":"not-allowed",letterSpacing:"0.1em",...L},children:t?"ENCRYPTING":n})]})}function Yr({children:e}){return s.jsxs("div",{style:{width:qI,minHeight:zs,...fi(),display:"flex",flexDirection:"column",padding:"22px 22px 18px",...L,overflowX:"hidden",overflowY:"auto",position:"relative",zoom:pi},children:[s.jsx("div",{style:{position:"absolute",top:-80,right:-50,width:240,height:240,background:`radial-gradient(ellipse, ${a.accent}14 0%, transparent 70%)`,borderRadius:"50%",pointerEvents:"none"}}),s.jsx("div",{style:{position:"absolute",bottom:-60,left:-50,width:180,height:180,background:"radial-gradient(ellipse, rgba(57,221,182,0.10) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none"}}),s.jsx("div",{style:{position:"relative",zIndex:1,display:"flex",flexDirection:"column",flex:1},children:e})]})}function ko({title:e,sub:t,onBack:n}){return s.jsxs("div",{style:{marginBottom:20},children:[n&&s.jsx("button",{onClick:n,style:{background:"none",border:"none",color:a.dim,fontSize:8,cursor:"pointer",...L,marginBottom:10,padding:0},children:" back"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[s.jsx("img",{src:"../icons/icon48.png",alt:"",style:{width:30,height:30,objectFit:"contain",filter:"drop-shadow(0 0 10px rgba(57,221,182,0.65))"}}),s.jsxs("span",{style:{fontSize:15,fontWeight:700,letterSpacing:"0.11em"},children:[s.jsx("span",{style:{color:a.accent},children:"FORGE"}),s.jsx("span",{style:{color:a.text},children:"-OS"})]})]}),s.jsx("div",{style:{fontSize:13,color:a.text,fontWeight:700,letterSpacing:"0.05em"},children:e}),t&&s.jsx("div",{style:{fontSize:8,color:a.dim,marginTop:5,lineHeight:1.6},children:t})]})}function rC({network:e,onComplete:t}){const[n,r]=x.useState("choose"),o="mainnet",[i,l]=x.useState(""),[c,u]=x.useState(""),[d,f]=x.useState(Ut),[m,h]=x.useState(""),[y,E]=x.useState(""),[w,k]=x.useState(""),[p,g]=x.useState(Ut),[S,v]=x.useState([]),[C,_]=x.useState([]),[j,D]=x.useState(eC),[Y,B]=x.useState(String(hu[0])),[me,Q]=x.useState(String(hu[1])),[ce,ze]=x.useState(String(gu[0])),[ke,oe]=x.useState(String(gu[1])),[ge,M]=x.useState(!0),[U,H]=x.useState(!0),[X,ie]=x.useState(String(Od)),[Ae,ve]=x.useState(bn(Ut)),[Z,we]=x.useState(!1),[K,ye]=x.useState(!1),[Le,de]=x.useState(null),Ke=(N,A)=>{const te=new Map;for(const se of[...N,...A]){const Ie=Hi(se);te.has(Ie)||te.set(Ie,se)}return[...te.values()]},dt=()=>{const N=[];return ge&&N.push(0),U&&N.push(1),N.length?N:[0]},He=async()=>{const N=await JI(m,y||void 0,o);return _(N.map(A=>Hi(A))),N},Ye=async()=>{ye(!0),de(null);try{const N=await He();if(!N.length)throw new Error("No remembered candidates found for this phrase/passphrase.");v(N);const A=N[0];k(A.address),g(A.derivation),ve(A.derivationPath),r("import_discover")}catch(N){const A=N instanceof Error?N.message:String(N);de(A||"Failed to load remembered candidates.")}finally{ye(!1)}},wt=async()=>{var N;ye(!0),de(null);try{const A=Ow(Ae),te=await oh(m,o,{mnemonicPassphrase:y||void 0,derivation:A}),se={address:te.address,derivation:Qt(te.derivation??A),derivationPath:bn(te.derivation??A),chainLabel:((N=te.derivation)==null?void 0:N.chain)===1?"change":"receive"};k(se.address),g(se.derivation),v(Ie=>Ke([se],Ie)),await Ld(m,y||void 0,o,[se]),_(Ie=>{const mt=new Set(Ie);return mt.add(Hi(se)),[...mt]}),r("import_password")}catch(A){const te=A instanceof Error?A.message:String(A);de(te||"Failed to validate derivation path.")}finally{ye(!1)}},Je=async()=>{ye(!0),de(null);try{const N=await JT(o);l(N.phrase),u(N.address),f(Qt(N.derivation??Ut)),r("create_view")}catch{de("Failed to generate wallet. Please try again.")}finally{ye(!1)}},st=async N=>{ye(!0),de(null);try{await Os(i,N,c,o,{derivation:d}),await ud({address:c,network:o});const A=await uo(N);l(""),t(A)}catch{de("Failed to encrypt vault. Please try again."),ye(!1)}},ft=async()=>{ye(!0),de(null);try{const N=await oh(m,o,{mnemonicPassphrase:y||void 0}),A=Qt(N.derivation??Ut),te={address:N.address,derivation:A,derivationPath:bn(A),chainLabel:A.chain===1?"change":"receive"};k(N.address),g(A),v([te]),ve(te.derivationPath),r("import_password")}catch(N){const A=N instanceof Error?N.message:String(N);de(A.toLowerCase().includes("bip39")||A.toLowerCase().includes("checksum")?"Invalid BIP39 phrase. Check word count, spelling, and passphrase.":"Failed to validate phrase.")}finally{ye(!1)}},pt=async()=>{ye(!0),de(null);let N=[],A=[],te="";try{try{N=await He()}catch{N=[]}const se=_h(Y,me,hu),Ie=_h(ce,ke,gu),mt=dt(),kn=nC(j),Et=tC(X);try{A=await ZT(m,o,{mnemonicPassphrase:y||void 0,basePaths:kn,accountRange:se,indexRange:Ie,chains:mt,limit:Et})}catch(_e){te=_e instanceof Error?_e.message:String(_e)}const Tt=Ke(A,N);if(!Tt.length)throw new Error(te||"No derivation candidates found for the configured scan window.");A.length&&await Ld(m,y||void 0,o,A),te&&N.length&&de(`${te} Showing remembered candidates only.`),v(Tt),_(Tt.map(_e=>Hi(_e)));const q=Tt[0];w||(k(q.address),g(q.derivation)),ve(q.derivationPath),r("import_discover")}catch(se){const Ie=se instanceof Error?se.message:String(se);de(Ie||"Failed to scan import paths.")}finally{ye(!1)}},Se=N=>{k(N.address),g(Qt(N.derivation)),ve(N.derivationPath),r("import_password")},lt=async N=>{ye(!0),de(null);try{const A=m.trim().toLowerCase().split(/\s+/).join(" ");await Os(A,N,w,o,{mnemonicPassphrase:y||void 0,derivation:p}),await ud({address:w,network:o});try{await ZI(A,y||void 0,o,{address:w,derivation:p,derivationPath:bn(p),chainLabel:p.chain===1?"change":"receive"})}catch{}const te=await uo(N);h(""),E(""),v([]),_([]),t(te)}catch{de("Failed to encrypt vault. Please try again."),ye(!1)}},Pe=i.split(" ");return n==="choose"?s.jsxs(Yr,{children:[s.jsx(ko,{title:"SET UP YOUR WALLET",sub:"Non-custodial  Your keys never leave your device"}),s.jsx("div",{style:{display:"flex",gap:5,flexWrap:"wrap",marginBottom:14},children:["KASPA L1  L2","NON-CUSTODIAL","BIP44"].map(N=>s.jsx("span",{style:{fontSize:8,color:a.accent,fontWeight:700,letterSpacing:"0.08em",background:`${a.accent}10`,border:`1px solid ${a.accent}22`,borderRadius:4,padding:"3px 7px"},children:N},N))}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:18,padding:"7px 12px",background:`${a.accent}08`,border:`1px solid ${a.accent}20`,borderRadius:8},children:[s.jsx("div",{style:{width:7,height:7,borderRadius:"50%",background:a.ok,flexShrink:0}}),s.jsx("span",{style:{fontSize:8,color:a.accent,fontWeight:700,letterSpacing:"0.08em"},children:"MAINNET"})]}),Le&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Le}),s.jsx("button",{onClick:Je,disabled:K,style:{width:"100%",padding:"18px 16px",textAlign:"left",background:`linear-gradient(145deg, ${a.accent}1A, rgba(11,17,24,0.95))`,border:`1px solid ${a.accent}45`,borderRadius:12,marginBottom:10,cursor:K?"not-allowed":"pointer",...L},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:40,height:40,borderRadius:"50%",flexShrink:0,background:`${a.accent}18`,border:`1px solid ${a.accent}40`,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("span",{style:{color:a.accent,fontSize:18},children:""})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:11,fontWeight:700,color:a.accent,marginBottom:4,letterSpacing:"0.06em"},children:K?"GENERATING":"CREATE NEW WALLET"}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.6},children:"Generate a new wallet  24-word seed phrase  fully encrypted locally"})]})]})}),s.jsx("button",{onClick:()=>{de(null),h(""),E(""),k(""),v([]),_([]),g(Ut),ve(bn(Ut)),r("import_phrase")},style:{width:"100%",padding:"18px 16px",textAlign:"left",background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:12,marginBottom:18,cursor:"pointer",...L},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[s.jsx("div",{style:{width:40,height:40,borderRadius:"50%",flexShrink:0,background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("span",{style:{color:a.dim,fontSize:18},children:""})}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:11,fontWeight:700,color:a.text,marginBottom:4,letterSpacing:"0.06em"},children:"IMPORT WALLET"}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.6},children:"Restore from a BIP39 seed phrase  supports 12/15/18/21/24 words"})]})]})}),s.jsx("div",{style:{marginTop:"auto",padding:"10px 12px",background:"rgba(5,7,10,0.5)",border:`1px solid ${a.border}`,borderRadius:8},children:["Your keys never leave your device.","Non-custodial  Forge-OS has zero access to your funds."].map((N,A)=>s.jsxs("div",{style:{display:"flex",gap:6,marginBottom:A===0?4:0},children:[s.jsx("span",{style:{color:a.ok,fontSize:8,flexShrink:0},children:""}),s.jsx("span",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:N})]},A))})]}):n==="create_view"?s.jsxs(Yr,{children:[s.jsx(ko,{title:"YOUR SEED PHRASE",sub:"Write these 24 words down in order and store them offline. Anyone with this phrase controls your wallet.",onBack:()=>{r("choose"),l(""),u(""),f(Ut)}}),s.jsx("div",{style:{background:a.wLow,border:`1px solid ${a.warn}40`,borderRadius:8,padding:"8px 12px",marginBottom:12},children:s.jsx("div",{style:{fontSize:8,color:a.warn,fontWeight:700},children:" NEVER share this phrase. Forge-OS will never ask for it."})}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:4,marginBottom:14},children:Pe.map((N,A)=>s.jsxs("div",{style:{background:"rgba(5,7,10,0.9)",border:`1px solid ${a.border}`,borderRadius:5,padding:"5px 4px",display:"flex",alignItems:"center",gap:3},children:[s.jsxs("span",{style:{fontSize:8,color:a.dim,flexShrink:0},children:[A+1,"."]}),s.jsx("span",{style:{fontSize:8,color:a.text,fontWeight:600},children:N})]},A))}),s.jsxs("label",{style:{display:"flex",gap:8,alignItems:"flex-start",cursor:"pointer",marginBottom:14},children:[s.jsx("input",{type:"checkbox",checked:Z,onChange:N=>we(N.target.checked),style:{marginTop:2,accentColor:a.accent,flexShrink:0}}),s.jsx("span",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:"I have written down my 24-word seed phrase and stored it securely offline."})]}),s.jsx("button",{onClick:()=>r("create_password"),disabled:!Z,style:{width:"100%",padding:"11px 0",background:Z?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:`${a.accent}25`,border:"none",borderRadius:8,color:Z?"#04110E":a.dim,fontSize:10,fontWeight:700,cursor:Z?"pointer":"not-allowed",letterSpacing:"0.1em",...L},children:"I'VE SAVED MY PHRASE "})]}):n==="create_password"?s.jsxs(Yr,{children:[s.jsx(ko,{title:"ENCRYPT YOUR WALLET",sub:"Your seed phrase will be encrypted and stored locally. You'll need this password to unlock your wallet.",onBack:()=>r("create_view")}),Le&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Le}),s.jsx(Nh,{onSubmit:st,loading:K,submitLabel:"CREATE WALLET"})]}):n==="import_phrase"?s.jsxs(Yr,{children:[s.jsx(ko,{title:"IMPORT SEED PHRASE",sub:"Enter a BIP39 seed phrase (12/15/18/21/24 words). Optional BIP39 passphrase supported.",onBack:()=>r("choose")}),Le&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Le}),s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:7},children:"SEED PHRASE"}),s.jsx("textarea",{value:m,onChange:N=>{h(N.target.value),v([]),_([]),k(""),de(null)},placeholder:"word1 word2 word3  (space-separated)",rows:4,style:{width:"100%",boxSizing:"border-box",background:"rgba(8,13,20,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px 12px",color:a.text,fontSize:10,resize:"vertical",...L,outline:"none",marginBottom:10}}),s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em",marginBottom:7},children:"BIP39 PASSPHRASE (OPTIONAL)"}),s.jsx("input",{type:"password",value:y,onChange:N=>{E(N.target.value),v([]),_([]),k(""),de(null)},placeholder:"Optional passphrase / 25th word",style:{width:"100%",boxSizing:"border-box",background:"rgba(8,13,20,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px 12px",color:a.text,fontSize:10,...L,outline:"none",marginBottom:10}}),m.trim()&&(()=>{const N=m.trim().split(/\s+/).filter(Boolean).length,A=[12,15,18,21,24].includes(N);return s.jsxs("div",{style:{fontSize:8,color:A?a.ok:a.warn,marginBottom:8},children:[N," words ",A?"":"(need 12/15/18/21/24)"]})})(),s.jsxs("div",{style:{background:"rgba(8,13,20,0.65)",border:`1px solid ${a.border}`,borderRadius:8,padding:"9px 10px",marginBottom:10},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em",marginBottom:6},children:"DISCOVERY SCAN OPTIONS"}),s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:5},children:"BASE PATH ROOTS (ONE PER LINE)"}),s.jsx("textarea",{value:j,onChange:N=>D(N.target.value),rows:2,style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"8px 10px",color:a.text,fontSize:8,resize:"vertical",...L,outline:"none",marginBottom:8}}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:8},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"ACCOUNT RANGE"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[s.jsx("input",{type:"number",min:0,value:Y,onChange:N=>B(N.target.value),placeholder:"start",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...L,outline:"none"}}),s.jsx("input",{type:"number",min:0,value:me,onChange:N=>Q(N.target.value),placeholder:"end",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...L,outline:"none"}})]})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"INDEX RANGE"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6},children:[s.jsx("input",{type:"number",min:0,value:ce,onChange:N=>ze(N.target.value),placeholder:"start",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...L,outline:"none"}}),s.jsx("input",{type:"number",min:0,value:ke,onChange:N=>oe(N.target.value),placeholder:"end",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...L,outline:"none"}})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:5},children:"CHAINS"}),s.jsxs("div",{style:{display:"flex",gap:10},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:5,fontSize:8,color:a.dim,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:ge,onChange:N=>M(N.target.checked),style:{accentColor:a.accent}}),"RECEIVE (0)"]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:5,fontSize:8,color:a.dim,cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:U,onChange:N=>H(N.target.checked),style:{accentColor:a.accent}}),"CHANGE (1)"]})]})]}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4},children:"RESULT LIMIT"}),s.jsx("input",{type:"number",min:1,max:q1,value:X,onChange:N=>ie(N.target.value),style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:7,padding:"7px 8px",color:a.text,fontSize:8,...L,outline:"none"}})]})]})]}),s.jsxs("div",{style:{background:"rgba(8,13,20,0.65)",border:`1px solid ${a.border}`,borderRadius:8,padding:"9px 10px",marginBottom:10},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.08em",marginBottom:6},children:"MANUAL DERIVATION PATH"}),s.jsx("input",{value:Ae,onChange:N=>ve(N.target.value),placeholder:"m/44'/111'/0'/0/0",style:{width:"100%",boxSizing:"border-box",background:"rgba(5,7,10,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"9px 10px",color:a.text,fontSize:8,...L,outline:"none",marginBottom:8}}),s.jsx("button",{onClick:wt,disabled:!m.trim()||K,style:{width:"100%",padding:"9px 0",background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:8,color:m.trim()&&!K?a.text:a.dim,fontSize:8,fontWeight:700,cursor:m.trim()&&!K?"pointer":"not-allowed",letterSpacing:"0.08em",...L},children:K?"VALIDATING":"USE MANUAL PATH"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[s.jsx("button",{onClick:ft,disabled:!m.trim()||K,style:{width:"100%",padding:"11px 0",background:m.trim()&&!K?`linear-gradient(90deg, ${a.accent}, #7BE9CF)`:`${a.accent}25`,border:"none",borderRadius:8,color:m.trim()&&!K?"#04110E":a.dim,fontSize:10,fontWeight:700,cursor:m.trim()&&!K?"pointer":"not-allowed",letterSpacing:"0.1em",...L},children:K?"VALIDATING":"VALIDATE PHRASE "}),s.jsx("button",{onClick:pt,disabled:!m.trim()||K,style:{width:"100%",padding:"11px 0",background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:8,color:m.trim()&&!K?a.text:a.dim,fontSize:9,fontWeight:700,cursor:m.trim()&&!K?"pointer":"not-allowed",letterSpacing:"0.08em",...L},children:K?"SCANNING":"SCAN PATHS"})]}),s.jsx("button",{onClick:Ye,disabled:!m.trim()||K,style:{width:"100%",padding:"10px 0",marginTop:8,background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:8,color:m.trim()&&!K?a.text:a.dim,fontSize:8,fontWeight:700,cursor:m.trim()&&!K?"pointer":"not-allowed",letterSpacing:"0.08em",...L},children:K?"LOADING":"LOAD REMEMBERED CANDIDATES"})]}):n==="import_discover"?s.jsxs(Yr,{children:[s.jsx(ko,{title:"SELECT DERIVATION",sub:"Choose the address/path that matches your existing wallet. This choice will be saved for signing.",onBack:()=>r("import_phrase")}),Le&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Le}),s.jsxs("div",{style:{background:"rgba(11,17,24,0.65)",border:`1px solid ${a.border}`,borderRadius:8,padding:"8px 10px",marginBottom:10},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.5},children:"Showing common derivation candidates for your phrase/passphrase. If unsure, compare with the address shown in your current wallet app and select the exact match."}),s.jsxs("div",{style:{fontSize:8,color:a.dim,marginTop:6},children:["Remembered candidates for this mnemonic fingerprint: ",C.length]})]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6,maxHeight:300,overflowY:"auto",paddingRight:2,marginBottom:12},children:S.map((N,A)=>{const te=N.address.toLowerCase()===w.toLowerCase()&&bn(N.derivation)===bn(p),se=C.includes(Hi(N));return s.jsxs("button",{onClick:()=>Se(N),style:{width:"100%",textAlign:"left",background:te?`${a.accent}10`:"rgba(8,13,20,0.8)",border:`1px solid ${te?`${a.accent}55`:a.border}`,borderRadius:8,padding:"9px 10px",cursor:"pointer",...L},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,marginBottom:4},children:[s.jsxs("span",{style:{fontSize:8,color:te?a.accent:a.text,fontWeight:700},children:["#",A+1,"  ",N.chainLabel.toUpperCase()]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[se&&s.jsx("span",{style:{fontSize:8,color:a.accent,border:`1px solid ${a.accent}44`,background:`${a.accent}14`,borderRadius:4,padding:"2px 4px",letterSpacing:"0.06em"},children:"REMEMBERED"}),s.jsx("span",{style:{fontSize:8,color:a.dim},children:N.derivation.account===0?"acct 0":`acct ${N.derivation.account}`})]})]}),s.jsx("div",{style:{fontSize:8,color:a.text,lineHeight:1.45,wordBreak:"break-all",marginBottom:4},children:N.address}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.4,wordBreak:"break-all"},children:N.derivationPath})]},`${N.address}-${N.derivationPath}`)})}),s.jsx("button",{onClick:()=>pt(),disabled:K,style:{width:"100%",padding:"10px 0",background:"rgba(11,17,24,0.85)",border:`1px solid ${a.border}`,borderRadius:8,color:K?a.dim:a.text,fontSize:9,fontWeight:700,cursor:K?"not-allowed":"pointer",letterSpacing:"0.08em",...L},children:K?"SCANNING":"RESCAN CANDIDATES"})]}):n==="import_password"?s.jsxs(Yr,{children:[s.jsx(ko,{title:"ENCRYPT YOUR WALLET",sub:"Your imported phrase will be encrypted and stored locally. Choose a strong password.",onBack:()=>r(S.length?"import_discover":"import_phrase")}),s.jsxs("div",{style:{background:"rgba(8,13,20,0.8)",border:`1px solid ${a.border}`,borderRadius:8,padding:"8px 10px",marginBottom:10},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,marginBottom:4,letterSpacing:"0.08em"},children:"SELECTED ADDRESS"}),s.jsx("div",{style:{fontSize:8,color:a.text,lineHeight:1.4,wordBreak:"break-all",marginBottom:4},children:w}),s.jsx("div",{style:{fontSize:8,color:a.dim,lineHeight:1.4,wordBreak:"break-all"},children:bn(p)})]}),Le&&s.jsx("div",{style:{fontSize:8,color:a.danger,marginBottom:10},children:Le}),s.jsx(Nh,{onSubmit:lt,loading:K,submitLabel:"IMPORT WALLET"})]}):s.jsx(Yr,{children:s.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("img",{src:"../icons/icon48.png",alt:"",style:{width:36,height:36,objectFit:"contain",filter:"drop-shadow(0 0 12px rgba(57,221,182,0.7))",marginBottom:14}}),s.jsx("div",{style:{fontSize:10,color:a.accent,marginBottom:6,letterSpacing:"0.1em",fontWeight:700},children:"ENCRYPTING VAULT"}),s.jsx("div",{style:{fontSize:8,color:a.dim},children:"Deriving key  This may take a moment"})]})})})}function oC({address:e,network:t,origin:n,onApprove:r,onReject:o}){const i=n??"forge-os.xyz",[l,c]=x.useState(!1);function u(){l&&n&&Jv(n,{address:e,network:t,connectedAt:Date.now()}).catch(()=>{}),r()}return s.jsxs("div",{style:{width:"100%",maxWidth:W1,height:"100%",minHeight:V1,...fi(),display:"flex",flexDirection:"column",...L,overflow:"hidden",zoom:pi},children:[s.jsxs("div",{style:{padding:"12px 14px 10px",borderBottom:`1px solid ${a.border}`,display:"flex",alignItems:"center",gap:8},children:[s.jsx("img",{src:"../icons/icon48.png",alt:"Forge-OS",style:{width:22,height:22,objectFit:"contain",filter:"drop-shadow(0 0 6px rgba(57,221,182,0.5))"}}),s.jsxs("span",{style:{fontSize:13,fontWeight:700,letterSpacing:"0.1em"},children:[s.jsx("span",{style:{color:a.accent},children:"FORGE"}),s.jsx("span",{style:{color:a.text},children:"-OS"})]})]}),s.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column",padding:"14px 16px 12px",gap:12,overflowY:"auto"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{width:52,height:52,borderRadius:"50%",background:`${a.accent}18`,border:`2px solid ${a.accent}40`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 10px"},children:s.jsx("img",{src:"../icons/icon48.png",alt:"",style:{width:30,height:30,objectFit:"contain"}})}),s.jsx("div",{style:{fontSize:13,fontWeight:700,color:a.text,marginBottom:4},children:"Connect to Site"}),s.jsx("div",{style:{fontSize:10,color:a.dim,letterSpacing:"0.06em",wordBreak:"break-word",overflowWrap:"anywhere"},children:i})]}),s.jsxs("div",{style:{background:"rgba(11,17,24,0.8)",border:`1px solid ${a.border}`,borderRadius:10,padding:"12px 14px"},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.12em",marginBottom:10},children:"THIS SITE WILL BE ABLE TO"}),[{icon:"",label:"View your wallet address"},{icon:"",label:"Request message signatures"}].map(d=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6,fontSize:10,color:a.text},children:[s.jsx("span",{style:{color:a.ok,fontSize:9,flexShrink:0},children:d.icon}),d.label]},d.label)),s.jsx("div",{style:{height:1,background:a.border,margin:"10px 0"}}),s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.12em",marginBottom:6},children:"THIS SITE WILL NOT BE ABLE TO"}),[{icon:"",label:"Access your private keys or seed phrase"},{icon:"",label:"Send transactions without your approval"}].map(d=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,fontSize:10,color:a.muted},children:[s.jsx("span",{style:{color:a.danger,fontSize:9,flexShrink:0},children:d.icon}),d.label]},d.label))]}),s.jsxs("div",{style:{background:`${a.accent}08`,border:`1px solid ${a.accent}20`,borderRadius:8,padding:"10px 12px",display:"flex",alignItems:"center",gap:10},children:[s.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:a.ok,flexShrink:0}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontSize:9,color:a.dim,marginBottom:2},children:"CONNECTING WITH"}),s.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:600},children:Hs(e)}),s.jsx("div",{style:{fontSize:8,color:a.dim},children:t})]})]}),s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:10,color:a.dim},children:[s.jsx("input",{type:"checkbox",checked:l,onChange:d=>c(d.target.checked),style:{accentColor:a.accent,width:13,height:13,cursor:"pointer"}}),"Remember this site (skip approval next time)"]}),s.jsxs("div",{style:{display:"flex",gap:10,marginTop:2},children:[s.jsx("button",{onClick:o,style:{flex:1,background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px 0",color:a.dim,fontSize:10,fontWeight:700,cursor:"pointer",letterSpacing:"0.08em",...L},children:"REJECT"}),s.jsx("button",{onClick:u,style:{flex:2,background:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,border:"none",borderRadius:8,padding:"10px 0",color:"#04110E",fontSize:11,fontWeight:700,cursor:"pointer",letterSpacing:"0.08em",...L},children:"CONNECT "})]})]})]})}function iC({address:e,network:t,origin:n,message:r,loading:o=!1,error:i,onApprove:l,onReject:c}){const u=n??"forge-os.xyz";return s.jsxs("div",{style:{width:"100%",maxWidth:W1,height:"100%",minHeight:V1,...fi(),display:"flex",flexDirection:"column",...L,overflow:"hidden",zoom:pi},children:[s.jsxs("div",{style:{padding:"12px 14px 10px",borderBottom:`1px solid ${a.border}`,display:"flex",alignItems:"center",gap:8},children:[s.jsx("img",{src:"../icons/icon48.png",alt:"Forge-OS",style:{width:22,height:22,objectFit:"contain",filter:"drop-shadow(0 0 6px rgba(57,221,182,0.5))"}}),s.jsxs("span",{style:{fontSize:13,fontWeight:700,letterSpacing:"0.1em"},children:[s.jsx("span",{style:{color:a.accent},children:"FORGE"}),s.jsx("span",{style:{color:a.text},children:"-OS"})]})]}),s.jsxs("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column",padding:"18px 16px",gap:12,overflowY:"auto"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx("div",{style:{width:52,height:52,borderRadius:"50%",background:`${a.warn}18`,border:`2px solid ${a.warn}40`,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px"},children:s.jsx("span",{style:{fontSize:22},children:""})}),s.jsx("div",{style:{fontSize:12,fontWeight:700,color:a.text,marginBottom:3},children:"Signature Request"}),s.jsx("div",{style:{fontSize:10,color:a.dim,letterSpacing:"0.06em"},children:u})]}),s.jsxs("div",{style:{background:"rgba(11,17,24,0.9)",border:`1px solid ${a.border}`,borderRadius:10,padding:"10px 12px",minWidth:0},children:[s.jsx("div",{style:{fontSize:8,color:a.dim,letterSpacing:"0.12em",marginBottom:6},children:"MESSAGE TO SIGN"}),s.jsx("div",{style:{maxHeight:180,overflowY:"auto",background:"rgba(5,7,10,0.7)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px",fontSize:9,color:a.text,lineHeight:1.5,whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},children:r})]}),s.jsxs("div",{style:{background:`${a.accent}08`,border:`1px solid ${a.accent}20`,borderRadius:8,padding:"10px 12px",display:"flex",alignItems:"center",gap:10,minWidth:0},children:[s.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:a.ok,flexShrink:0}}),s.jsxs("div",{style:{minWidth:0},children:[s.jsx("div",{style:{fontSize:9,color:a.dim,marginBottom:2},children:"SIGNING WITH"}),s.jsx("div",{style:{fontSize:11,color:a.text,fontWeight:600},children:Hs(e)}),s.jsx("div",{style:{fontSize:8,color:a.dim},children:t})]})]}),i&&s.jsx("div",{style:{fontSize:9,color:a.danger,lineHeight:1.5,textAlign:"center"},children:i})]}),s.jsxs("div",{style:{padding:"12px 16px",borderTop:`1px solid ${a.border}`,display:"flex",gap:10},children:[s.jsx("button",{onClick:c,disabled:o,style:{flex:1,background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,borderRadius:8,padding:"10px 0",color:a.dim,fontSize:10,fontWeight:700,cursor:o?"not-allowed":"pointer",letterSpacing:"0.08em",...L},children:"REJECT"}),s.jsx("button",{onClick:l,disabled:o,style:{flex:2,background:o?`${a.accent}35`:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,border:"none",borderRadius:8,padding:"10px 0",color:o?a.dim:"#04110E",fontSize:11,fontWeight:700,cursor:o?"not-allowed":"pointer",letterSpacing:"0.08em",...L},children:o?"SIGNING":"SIGN MESSAGE "})]})]})}const bh="forgeos.connect.pending",Ph="forgeos.sign.pending",sC=12e4,lC=new Set(["forge-os.xyz","www.forge-os.xyz","forgeos.xyz","www.forgeos.xyz","localhost","127.0.0.1"]);function aC(){const[e,t]=x.useState({type:"loading"}),[n,r]=x.useState(null),[o,i]=x.useState("mainnet"),[l,c]=x.useState(null),[u,d]=x.useState(0),[f,m]=x.useState(!1),[h,y]=x.useState("wallet"),[E,w]=x.useState(),[k,p]=x.useState(0),[g,S]=x.useState(!1),[v,C]=x.useState(15),[_,j]=x.useState(!1),[D,Y]=x.useState(!1),[B,me]=x.useState(null),[Q,ce]=x.useState(null),[ze,ke]=x.useState(!1),[oe,ge]=x.useState(null),M=x.useRef(new Set),U=x.useRef(null),[H,X]=x.useState(null),[ie,Ae]=x.useState(null),[ve,Z]=x.useState(null),[we,K]=x.useState(null),[ye,Le]=x.useState(null),[de,Ke]=x.useState(null),[dt,He]=x.useState(null),Ye=["mainnet","testnet-10","testnet-11","testnet-12"],wt={mainnet:"MAINNET","testnet-10":"TN10","testnet-11":"TN11","testnet-12":"TN12"},Je=45e3,st=45e3,ft=6e4,pt=x.useCallback(R=>{if(!R)return!1;let W="";try{W=R.origin?new URL(R.origin).hostname.toLowerCase():""}catch{W=""}const he=lC.has(W),Ne=R.message.includes("Sign in to Forge.OS")&&R.message.includes("Domain: forge-os.xyz");return he&&Ne},[]);x.useEffect(()=>{(async()=>{try{const[R,W,he,Ne,Oe]=await Promise.all([b0(),wa(),Kv(),Wv(),Gv()]);if(i(W),C(he),j(Ne===!0),Y(Oe===!0),!R){const Ve=await jm();Ve!=null&&Ve.address?(r({mnemonic:"",address:Ve.address,network:W,autoLockAt:1/0}),Pe(Ve.address,W),t({type:"unlocked"})):t({type:"first_run"});return}const Ze=$r()??await P0();if(Ze)r(Ze),Pe(Ze.address,W),t({type:"unlocked"}),Za().then(Ve=>{Ve.filter(ht=>(ht.state==="CONFIRMING"||ht.state==="BROADCASTING")&&ht.txId).forEach(ht=>xE(ht,An=>{(An.state==="CONFIRMED"||An.state==="FAILED")&&Pe(Ze.address,W)}).catch(()=>{}))}).catch(()=>{}),kd().catch(()=>{});else{const Ve=await jm();X((Ve==null?void 0:Ve.address)??null),t({type:"locked"})}}catch{t({type:"first_run"})}})()},[]);const Se=x.useCallback(()=>{var W;const R=(W=chrome.storage)==null?void 0:W.session;R!=null&&R.get&&R.get([bh,Ph]).then(he=>{const Ne=he==null?void 0:he[bh],Oe=he==null?void 0:he[Ph];me(Ne!=null&&Ne.requestId?Ne:null),ce(Oe!=null&&Oe.requestId&&typeof(Oe==null?void 0:Oe.message)=="string"?Oe:null)}).catch(()=>{})},[]);x.useEffect(()=>{Se()},[Se]),x.useEffect(()=>{const R=(W,he)=>{he==="session"&&Se()};return chrome.storage.onChanged.addListener(R),()=>chrome.storage.onChanged.removeListener(R)},[Se]),x.useEffect(()=>{ge(null)},[Q==null?void 0:Q.requestId]),x.useEffect(()=>{const R=()=>{U.current!==null&&(window.clearTimeout(U.current),U.current=null)};if(e.type!=="unlocked"||_){R();return}if(!!(B||Q)){R();return}return R(),U.current=window.setTimeout(()=>{U.current=null,gd(!1)},sC),R},[e.type,_,B==null?void 0:B.requestId,Q==null?void 0:Q.requestId]),x.useEffect(()=>()=>{U.current!==null&&(window.clearTimeout(U.current),U.current=null)},[]),x.useEffect(()=>{const R=W=>{(W==null?void 0:W.type)==="AUTOLOCK_FIRED"&&A()};return chrome.runtime.onMessage.addListener(R),()=>chrome.runtime.onMessage.removeListener(R)},[]),x.useEffect(()=>{if(e.type!=="unlocked"||!n)return;const R=setInterval(()=>{if(!$r()){A();return}Yi(v,{persistSession:_})},3e4);return()=>clearInterval(R)},[e.type,n,v,_]);const lt=x.useCallback(R=>{var Ne;const W=vw(R);if(!Array.isArray(W)||W.length===0){Z(null);return}const he=[...W].sort((Oe,Ze)=>Oe.lastOkAt!==Ze.lastOkAt?Ze.lastOkAt-Oe.lastOkAt:Oe.consecutiveFails!==Ze.consecutiveFails?Oe.consecutiveFails-Ze.consecutiveFails:Ze.lastFailAt-Oe.lastFailAt);Z(((Ne=he[0])==null?void 0:Ne.base)??null)},[]);x.useEffect(()=>{if(e.type!=="unlocked")return;const R=async()=>{const he=await k0(o);he!=null&&he.virtualDaaScore?(Ae(he.virtualDaaScore),Ke(Date.now()),He(Ne=>Ne!=null&&Ne.startsWith("Live BlockDAG feed")?null:Ne)):He("Live BlockDAG feed unavailable  retrying"),lt(o)};R();const W=setInterval(R,2e4);return()=>clearInterval(W)},[e.type,o,lt]);const Pe=x.useCallback(async(R,W)=>{try{const he=is(R,W),[Ne,Oe]=await Promise.allSettled([Rw(he,W),A0(W)]),Ze=Date.now();let Ve=!1;Ne.status==="fulfilled"?(c(Ne.value),K(Ze)):Ve=!0,Oe.status==="fulfilled"?(d(Oe.value),Le(Ze)):Ve=!0,He(ht=>Ve?"Live balance/price feed degraded  retrying":ht!=null&&ht.startsWith("Live balance/price feed")?null:ht),lt(W)}catch{}},[lt]);x.useEffect(()=>{if(e.type!=="unlocked"||!(n!=null&&n.address))return;const R=()=>{Pe(n.address,o)};R();const W=setInterval(R,15e3);return()=>clearInterval(W)},[e.type,n==null?void 0:n.address,o,Pe]),x.useEffect(()=>{if(e.type!=="unlocked"||!(n!=null&&n.address))return;O0(o).catch(()=>{});const R=Zw(n.address,()=>{Pe(n.address,o)}),W=qw(he=>{Ae(he),Ke(Date.now())});return()=>{R(),W(),D0().catch(()=>{})}},[e.type,n==null?void 0:n.address,o,Pe]);const N=R=>{X(null),r(R),Pe(R.address,o),t({type:"unlocked"})},A=()=>{X((n==null?void 0:n.address)??null),j0(),r(null),c(null),d(0),Ae(null),Z(null),K(null),Le(null),Ke(null),He(null),t({type:"locked"})},te=async()=>{const{resetWallet:R}=await jf(async()=>{const{resetWallet:W}=await Promise.resolve().then(()=>Ww);return{resetWallet:W}},void 0);await R(),r(null),c(null),d(0),Ae(null),Z(null),K(null),Le(null),Ke(null),He(null),t({type:"first_run"})},se=R=>{r(R),Pe(R.address,o),t({type:"unlocked"})},Ie=(()=>{if(!(n!=null&&n.address))return null;try{return is(n.address,o)}catch{return n.address}})(),mt=async()=>{if(Ie)try{await navigator.clipboard.writeText(Ie),m(!0),setTimeout(()=>m(!1),2e3)}catch{}},kn=async()=>{const R=Ye.indexOf(o),W=Ye[(R+1)%Ye.length];if(i(W),await $v(W),c(null),Ae(null),Z(null),K(null),Le(null),Ke(null),He(null),n!=null&&n.address){try{await ud({address:is(n.address,W),network:W})}catch{}Pe(n.address,W)}},Et=()=>{e.type==="unlocked"&&Yi(v,{persistSession:_})},Tt=async R=>{C(R),await Hv(R),e.type==="unlocked"&&Yi(R,{persistSession:_})},q=async R=>{j(R),await Vv(R),await gd(R),e.type==="unlocked"&&Yi(v,{persistSession:R})},_e=async()=>{const R=!D;Y(R);try{await Xv(R)}catch{}};x.useEffect(()=>{e.type!=="unlocked"||!Q||n!=null&&n.mnemonic||(chrome.runtime.sendMessage({type:"FORGEOS_SIGN_REJECT",requestId:Q.requestId,error:"Managed wallet is required for site signing"}).catch(()=>{}),ce(null))},[e.type,Q,n==null?void 0:n.mnemonic]);const kt=async()=>{const R=Q;if(R){if(!(n!=null&&n.mnemonic)){ge("Wallet is locked. Unlock to sign.");return}ke(!0),ge(null);try{const W=await qT(n.mnemonic,R.message,{mnemonicPassphrase:n.mnemonicPassphrase,derivation:n.derivation});await chrome.runtime.sendMessage({type:"FORGEOS_SIGN_APPROVE",requestId:R.requestId,signature:W}),ce(null)}catch(W){const he=W instanceof Error?W.message:String(W);ge(he||"Signing failed")}finally{ke(!1)}}},Kt=()=>{Q&&(chrome.runtime.sendMessage({type:"FORGEOS_SIGN_REJECT",requestId:Q.requestId,error:"Signing rejected by user"}).catch(()=>{}),window.close())};if(x.useEffect(()=>{if(e.type!=="unlocked"||!Q||ze||!(n!=null&&n.mnemonic))return;const R=Q.requestId;!R||M.current.has(R)||pt(Q)&&(M.current.add(R),kt())},[e.type,Q,n==null?void 0:n.mnemonic,ze,pt]),e.type==="loading")return s.jsxs("div",{style:{width:qo,height:zs,...fi(),display:"flex",alignItems:"center",justifyContent:"center",...L,position:"relative",overflowX:"hidden",overflowY:"auto",zoom:pi},children:[s.jsx("div",{style:{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",width:260,height:260,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}12 0%, transparent 70%)`,pointerEvents:"none"}}),s.jsxs("div",{style:{textAlign:"center",position:"relative"},children:[s.jsx("img",{src:"../icons/icon48.png",alt:"",style:{width:36,height:36,objectFit:"contain",opacity:.7,filter:"drop-shadow(0 0 10px rgba(57,221,182,0.5))"}}),s.jsx("div",{style:{fontSize:9,color:a.dim,marginTop:10,letterSpacing:"0.14em"},children:"LOADING"})]})]});if(e.type==="first_run")return s.jsx(rC,{network:o,onComplete:se});if(e.type==="locked"){const R=_||!!(B||Q);return s.jsx(UI,{walletAddress:H,autoLockMinutes:v,persistSession:R,onUnlock:N,onReset:te})}const Ht=!!(n!=null&&n.mnemonic);if(Q&&Ie&&Ht&&!pt(Q))return s.jsx(iC,{address:Ie,network:o,origin:Q.origin,message:Q.message,loading:ze,error:oe,onApprove:kt,onReject:Kt});if(B&&Ie)return s.jsx(oC,{address:Ie,network:o,origin:B.origin,onApprove:()=>{chrome.runtime.sendMessage({type:"FORGEOS_CONNECT_APPROVE",requestId:B.requestId,address:Ie,network:o}).catch(()=>{}),me(null)},onReject:()=>{chrome.runtime.sendMessage({type:"FORGEOS_CONNECT_REJECT",requestId:B.requestId}).catch(()=>{}),window.close()}});const Wt=Ie,ue="USD",Ee=l!==null&&u>0?l*u:null,tn=Ee!==null?Ov(Ee,ue):"",We=D?"":tn,gn=o==="mainnet",Mn=Date.now(),b=(R,W)=>R!==null&&Mn-R<=W,z=b(we,Je),ee=b(ye,st),nt=b(de,ft),jt=z&&ee&&nt,Rt=z||ee||nt,zn=jt?"LIVE FEED":Rt?"PARTIAL FEED":"FEED OFFLINE",Lt=jt?a.ok:Rt?a.warn:a.danger,rt=Math.max(we??0,ye??0,de??0),xi=rt>0?new Date(rt).toLocaleTimeString([],{hour12:!1}):"never",yo=(()=>{if(!ve)return"endpoint unknown";try{return new URL(ve).host}catch{return ve}})(),Un=gn?a.ok:a.warn;return s.jsxs("div",{onClick:Et,style:{width:qo,minHeight:zs,...fi(),display:"flex",flexDirection:"column",...L,position:"relative",overflowX:"hidden",overflowY:"auto",zoom:pi},children:[s.jsx("div",{style:{position:"absolute",top:-60,left:"50%",transform:"translateX(-50%)",width:320,height:320,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}0D 0%, transparent 70%)`,pointerEvents:"none",zIndex:0}}),s.jsx("div",{style:{position:"absolute",bottom:40,right:-60,width:200,height:200,borderRadius:"50%",background:`radial-gradient(ellipse, ${a.accent}07 0%, transparent 70%)`,pointerEvents:"none",zIndex:0}}),s.jsxs("div",{style:{padding:"13px 16px 11px",borderBottom:`1px solid ${a.border}`,display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",zIndex:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:9},children:[s.jsx("img",{src:"../icons/icon48.png",alt:"Forge-OS",style:{width:24,height:24,objectFit:"contain",filter:"drop-shadow(0 0 8px rgba(57,221,182,0.55))"}}),s.jsxs("span",{style:{fontSize:14,fontWeight:700,letterSpacing:"0.1em"},children:[s.jsx("span",{style:{color:a.accent},children:"FORGE"}),s.jsx("span",{style:{color:a.text},children:"-OS"})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("button",{onClick:kn,title:"Click to switch network",style:{fontSize:9,color:Un,fontWeight:700,letterSpacing:"0.1em",background:`${Un}15`,border:`1px solid ${Un}35`,borderRadius:4,padding:"3px 8px",cursor:"pointer",...L},children:wt[o]??o.toUpperCase()}),Ht&&s.jsx("button",{onClick:A,title:"Lock wallet",style:{background:"rgba(33,48,67,0.5)",border:`1px solid ${a.border}`,borderRadius:4,padding:"3px 8px",color:a.dim,fontSize:10,cursor:"pointer",...L},children:""})]})]}),Wt?s.jsxs("div",{style:{padding:"20px 16px 16px",borderBottom:`1px solid ${a.border}`,textAlign:"center",position:"relative",zIndex:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,marginBottom:16},children:[s.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:a.ok,flexShrink:0,boxShadow:`0 0 6px ${a.ok}`}}),s.jsx("span",{style:{fontSize:10,color:a.dim,letterSpacing:"0.04em"},children:Hs(Wt)}),s.jsx("button",{onClick:mt,style:{...V(f?a.ok:a.dim,!0),padding:"3px 8px",fontSize:9,letterSpacing:"0.08em",color:f?a.ok:a.dim,minWidth:56},children:f?"COPIED":"COPY"})]}),s.jsxs("div",{style:{marginBottom:6},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,marginBottom:6},children:[s.jsx("span",{style:{fontSize:8,color:a.dim,letterSpacing:"0.1em"},children:"TOTAL PORTFOLIO VALUE"}),s.jsx("button",{onClick:_e,"aria-label":D?"Show portfolio balances":"Hide portfolio balances",title:D?"Show portfolio balances":"Hide portfolio balances",style:{...V(D?a.warn:a.dim,!0),padding:"3px 0",fontSize:9,letterSpacing:"0.08em",color:D?a.warn:a.dim,minWidth:34,width:34,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",style:{flexShrink:0},children:[s.jsx("path",{d:"M1 6C1 6 2.8 3.4 6 3.4C9.2 3.4 11 6 11 6C11 6 9.2 8.6 6 8.6C2.8 8.6 1 6 1 6Z",stroke:"currentColor",strokeWidth:"1"}),s.jsx("circle",{cx:"6",cy:"6",r:"1.3",fill:"currentColor"}),D&&s.jsx("path",{d:"M1.3 1.3L10.7 10.7",stroke:"currentColor",strokeWidth:"1.2"})]})})]}),s.jsx("div",{style:{fontSize:38,fontWeight:700,color:a.text,letterSpacing:"0.005em",lineHeight:1},children:We})]}),s.jsx("div",{style:{display:"flex",gap:8,marginTop:16},children:[{label:"SEND",action:()=>{y("wallet"),w("send"),p(R=>R+1)}},{label:"RECEIVE",action:()=>{y("wallet"),w("receive"),p(R=>R+1)}},{label:"SWAP",action:()=>S(!0)}].map(R=>s.jsx("button",{onClick:R.action,style:{flex:1,background:`linear-gradient(145deg, ${a.accent}1A, rgba(8,13,20,0.7))`,border:`1px solid ${a.accent}40`,borderRadius:10,padding:"9px 0",color:a.accent,fontSize:10,fontWeight:700,cursor:"pointer",...L,letterSpacing:"0.1em",transition:"background 0.15s, border-color 0.15s"},children:R.label},R.label))})]}):s.jsxs("div",{style:{padding:"28px 16px",textAlign:"center",borderBottom:`1px solid ${a.border}`,position:"relative",zIndex:1},children:[s.jsx("div",{style:{fontSize:11,color:a.dim,marginBottom:12},children:"No wallet connected"}),s.jsx("button",{onClick:()=>chrome.tabs.create({url:"https://forge-os.xyz"}),style:{background:`linear-gradient(90deg, ${a.accent}, #7BE9CF)`,color:"#04110E",border:"none",borderRadius:10,padding:"10px 20px",fontSize:11,fontWeight:700,cursor:"pointer",...L,letterSpacing:"0.08em"},children:"OPEN FORGE-OS "})]}),g&&s.jsx("div",{style:{position:"absolute",inset:0,zIndex:40,background:"rgba(3,7,12,0.78)",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"10px 8px 12px",backdropFilter:"blur(1px)"},onClick:R=>{R.target===R.currentTarget&&S(!1)},children:s.jsxs("div",{style:{width:"100%",maxWidth:qo-10,maxHeight:"100%",borderRadius:14,border:`1px solid ${a.border}`,background:"linear-gradient(165deg, rgba(8,13,20,0.98) 0%, rgba(5,9,15,0.98) 100%)",boxShadow:"0 18px 34px rgba(0,0,0,0.45)",overflow:"hidden",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderBottom:`1px solid ${a.border}`},children:[s.jsx("div",{style:{fontSize:10,color:a.accent,fontWeight:700,letterSpacing:"0.1em",...L},children:"SWAP"}),s.jsx("button",{onClick:()=>S(!1),style:{background:"none",border:"none",color:a.dim,fontSize:14,cursor:"pointer",...L},"aria-label":"Close swap overlay",title:"Close swap overlay",children:""})]}),s.jsx("div",{style:{overflowY:"auto",padding:"8px 8px 10px",flex:1},children:s.jsx(Ih,{})})]})}),s.jsx("div",{style:{display:"flex",borderBottom:`1px solid ${a.border}`,position:"relative",zIndex:1},children:["wallet","swap","agents","security"].map(R=>s.jsx("button",{onClick:()=>y(R),style:{flex:1,background:h===R?`${a.accent}08`:"none",border:"none",borderBottom:`2px solid ${h===R?a.accent:"transparent"}`,color:h===R?a.accent:a.dim,fontSize:10,fontWeight:700,cursor:"pointer",padding:"9px 0",letterSpacing:"0.1em",...L,textTransform:"uppercase",transition:"color 0.15s, border-color 0.15s, background 0.15s",boxShadow:h===R?`0 2px 12px ${a.accent}25`:"none"},children:R},R))}),s.jsxs("div",{style:{flex:1,overflow:"auto",position:"relative",zIndex:1},children:[h==="wallet"&&s.jsx(yI,{address:Wt,balance:l,usdPrice:u,network:o,mode:E,modeRequestId:k,onModeConsumed:()=>w(void 0),onBalanceInvalidated:()=>(n==null?void 0:n.address)&&Pe(n.address,o),hideBalances:D}),h==="swap"&&s.jsx(Ih,{}),h==="agents"&&s.jsx(PI,{network:o}),h==="security"&&s.jsx(DI,{address:Wt,network:o,isManagedWallet:Ht,autoLockMinutes:v,persistUnlockSessionEnabled:_,onAutoLockMinutesChange:Tt,onPersistUnlockSessionChange:q,onLock:A})]}),s.jsxs("div",{style:{padding:"7px 16px",borderTop:`1px solid ${a.border}`,display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",zIndex:1},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s.jsx("span",{style:{fontSize:8,color:a.muted,letterSpacing:"0.06em"},children:"FORGE-OS"}),s.jsxs("span",{style:{fontSize:8,color:Lt,letterSpacing:"0.05em",fontWeight:700},children:[" ",zn]}),ie&&s.jsxs("span",{style:{fontSize:8,color:a.dim,letterSpacing:"0.04em"},children:[" ",T0[o]??10," BPS  DAA ",(parseInt(ie,10)/1e6).toFixed(1),"M"]}),s.jsxs("span",{style:{fontSize:8,color:a.dim,letterSpacing:"0.04em"},children:[" RPC ",yo]}),s.jsxs("span",{style:{fontSize:8,color:a.dim,letterSpacing:"0.04em"},children:[" UPDATE ",xi]})]}),s.jsx("button",{onClick:()=>chrome.tabs.create({url:"https://forge-os.xyz"}),style:{background:"none",border:"none",color:a.accent,fontSize:8,cursor:"pointer",...L,letterSpacing:"0.06em"},children:"OPEN SITE "})]}),dt&&s.jsx("div",{style:{padding:"0 16px 7px",fontSize:8,color:a.warn,letterSpacing:"0.03em",position:"relative",zIndex:1},children:dt})]})}t0(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(aC,{})}));
